<!-- ==========================================================
â‘  HEAD / STYLE  (REBUILD â€” GOLD HARD / LINK UPGRADE / NO LEAK)
========================================================== -->
<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="color-scheme" content="dark light" />
  <meta name="theme-color" content="#070A14" />
  <meta name="format-detection" content="telephone=no,address=no,email=no" />

  <title>ë“±ì‘ ç‡ˆé…Œ DUNGZAK CESTLAVIE âˆ®27 Â· Lightflow</title>
  <meta name="description" content="LIGHTFLOW Â· LIGHT Â· MEMORY Â· BEING â€” ë“±ì‘ ç‡ˆé…Œ DUNGZAK CESTLAVIE" />

  <link rel="canonical" href="https://dungzak.art/" />

  <!-- OG / Twitter -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="ë“±ì‘ ç‡ˆé…Œ DUNGZAK CESTLAVIE Â· Lightflow âˆ®27" />
  <meta property="og:description" content="LIGHTFLOW Â· LIGHT Â· MEMORY Â· BEING" />
  <meta property="og:url" content="https://dungzak.art/" />
  <!-- <meta property="og:image" content="https://dungzak.art/images/og.jpg" /> -->
  <meta name="twitter:card" content="summary_large_image" />

  <!-- Google Translate bar ì°¨ë‹¨ -->
  <meta name="google" content="notranslate" />
  <meta name="googlebot" content="notranslate" />

  <!-- (ì„ íƒ) base ê°•ì œ -->
  <!-- <meta name="lf-base" content=""> -->

  <style>
    /* =========================================================
       Base / Reset
    ========================================================= */
    :root{
      --bg0:#050812;
      --bg1:#070A14;
      --bg2:#0A1022;

      --gold:#D7B86A;
      --gold2:#E9D59B;
      --blue:#79A7FF;

      --ink:#EDE3C9;
      --muted:rgba(237,227,201,.72);
      --muted2:rgba(237,227,201,.55);

      --card:rgba(255,255,255,.035);
      --card2:rgba(255,255,255,.055);
      --line:rgba(215,184,106,.22);
      --line2:rgba(121,167,255,.18);

      --shadow: 0 16px 40px rgba(0,0,0,.45);
      --shadow2: 0 10px 26px rgba(0,0,0,.35);
      --r:18px;

      --safe-top: env(safe-area-inset-top, 0px);
      --safe-bot: env(safe-area-inset-bottom, 0px);
      --safe-left: env(safe-area-inset-left, 0px);
      --safe-right: env(safe-area-inset-right, 0px);

      --maxw: 1120px;

      /* âœ… ê¸ˆë¹› â€œë‹¨ë‹¨í•¨(ë²ˆì§ ì—†ìŒ)â€ìš© ì—£ì§€ */
      --gold-edge: rgba(0,0,0,.62);
      --gold-edge2: rgba(0,0,0,.38);
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      background:
        radial-gradient(1200px 700px at 50% 0%, rgba(215,184,106,.10), rgba(121,167,255,.06) 40%, rgba(0,0,0,0) 72%),
        linear-gradient(180deg, var(--bg1), var(--bg0) 65%, #03040A);
      color:var(--ink);
      font-family: ui-sans-serif, system-ui, -apple-system, "Apple SD Gothic Neo", "Noto Sans KR", "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      letter-spacing:.2px;
      overflow-x:hidden;

      /* âœ… ì ë¦¼ ë°©ì§€: body safe-area íŒ¨ë”© ê¸ˆì§€ */
      padding-left: 0;
      padding-right: 0;
    }

    header, main, footer{
      padding-left: var(--safe-left);
      padding-right: var(--safe-right);
    }

    a{ color:var(--gold2); text-decoration:none; }
    a:hover{ text-decoration:underline; }
    img{ max-width:100%; display:block; }

    /* =========================================================
       Language visibility
    ========================================================= */
    .ko,.en{ display:block; }
    body.korean .en{ display:none !important; }
    body.english .ko{ display:none !important; }
    body.hybrid .ko,
    body.hybrid .en{ display:block !important; }

    /* =========================================================
       Waves canvas
    ========================================================= */
    #waves{
      position:fixed;
      inset:0;
      width:100%;
      height:100%;
      z-index:-2;
      pointer-events:none;
      opacity:1;
    }

    /* =========================================================
       Header / Nav (ê¸ˆë¹› ë‹¨ë‹¨í•˜ê²Œ + ë²„íŠ¼ í„°ì¹˜ê° ê°•í™”)
    ========================================================= */
    header{
      position:sticky;
      top:0;
      z-index:20;
      padding-top: calc(14px + var(--safe-top));
      padding-bottom: 12px;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      background: linear-gradient(180deg, rgba(5,8,18,.90), rgba(5,8,18,.60));
      border-bottom:1px solid rgba(215,184,106,.18);
    }

    header .brand,
    header .brand-sub{
      max-width: var(--maxw);
      margin: 0 auto;
      padding: 0 18px;
    }

    /* âœ… ë“±ì‘/íƒ€ì´í‹€: â€œë‹¨ë‹¨í•œ ê¸ˆë¹›(ë²ˆì§X)â€ */
    header .brand{
      font-weight: 900;
      color: var(--gold2);
      letter-spacing: .9px;
      font-size: 16px;
      line-height: 1.25;

      /* ë²ˆì§ ëŒ€ì‹  â€œì—£ì§€â€ */
      -webkit-text-stroke: .35px rgba(0,0,0,.35);
      text-shadow:
        0 1px 0 var(--gold-edge),
        0 -1px 0 var(--gold-edge2);
    }

    header .brand-sub{
      margin-top: 7px;
      font-size: 12px;
      letter-spacing: .40px;
      color: rgba(237,227,201,.78);
      text-shadow:
        0 1px 0 rgba(0,0,0,.55);
    }

    nav.primary{
      max-width: var(--maxw);
      margin: 12px auto 0;
      padding: 0 18px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }

    /* âœ… ìƒë‹¨ íƒ­: ë” â€œë²„íŠ¼ê¸‰â€ + ê¸ˆë¹› ì„ ëª… */
    nav.primary button{
      appearance:none;
      border: 1px solid rgba(215,184,106,.34);
      background: rgba(255,255,255,.03);
      color: var(--gold2);
      padding: 11px 14px;
      border-radius: 999px;
      font-weight: 900;
      font-size: 13.5px;
      cursor:pointer;
      transition: transform .06s ease, background .18s ease, border-color .18s ease, box-shadow .18s ease;
      min-height: 44px; /* í„°ì¹˜ì˜ì—­ */
      box-shadow: var(--shadow2);
      text-shadow:
        0 1px 0 rgba(0,0,0,.62);
    }
    nav.primary button:hover{
      background: rgba(215,184,106,.10);
      border-color: rgba(215,184,106,.55);
      box-shadow: 0 12px 30px rgba(0,0,0,.42);
    }
    nav.primary button.active{
      background: rgba(215,184,106,.14);
      border-color: rgba(215,184,106,.70);
      box-shadow: 0 14px 34px rgba(0,0,0,.48);
    }
    nav.primary button:active{ transform: translateY(1px); }
    nav.primary button:focus-visible{
      outline:2px solid rgba(121,167,255,.55);
      outline-offset:2px;
    }

    .lang{
      max-width: var(--maxw);
      margin: 10px auto 0;
      padding: 0 18px;
      display:flex;
      gap:8px;
      flex-wrap:wrap;
    }
    .lang button{
      appearance:none;
      border:1px solid rgba(121,167,255,.22);
      background: rgba(255,255,255,.03);
      color: rgba(237,227,201,.92);
      padding: 9px 12px;
      border-radius: 999px;
      font-weight: 900;
      font-size: 12.5px;
      cursor:pointer;
      min-height: 42px;
      box-shadow: 0 10px 24px rgba(0,0,0,.32);
      text-shadow: 0 1px 0 rgba(0,0,0,.55);
    }
    .lang button.active{
      border-color: rgba(215,184,106,.70);
      background: rgba(215,184,106,.12);
      color: var(--gold2);
    }
    .lang button:hover{
      border-color: rgba(215,184,106,.45);
      background: rgba(215,184,106,.08);
    }
    .lang button:focus-visible{
      outline:2px solid rgba(121,167,255,.55);
      outline-offset:2px;
    }

    /* =========================================================
       Main layout (ì¤‘ì•™ ê³ ì •)
    ========================================================= */
    main{
      max-width: var(--maxw);
      margin: 0 auto;
      padding: 18px 18px calc(26px + var(--safe-bot));
    }

    section{
      background: rgba(255,255,255,.02);
      border:1px solid rgba(255,255,255,.04);
      border-radius: var(--r);
      box-shadow: var(--shadow);
      overflow:hidden;
    }

    /* =========================================================
       POEM
    ========================================================= */
    .hero{
      padding: 18px 18px 20px;
      position:relative;
    }
    .hero h1{
      margin:0;
      font-size: 20px;
      letter-spacing:.45px;
      color: var(--gold2);
      -webkit-text-stroke: .25px rgba(0,0,0,.28);
      text-shadow:
        0 1px 0 rgba(0,0,0,.62);
    }
    .poemwrap{
      margin-top:14px;
      padding: 14px 14px;
      border-radius: 14px;
      background: linear-gradient(180deg, rgba(255,255,255,.035), rgba(255,255,255,.015));
      border: 1px solid rgba(215,184,106,.14);
    }
    .poem p{ margin:10px 0; line-height:1.7; color:rgba(237,227,201,.88); }

    /* =========================================================
       WORKS
    ========================================================= */
    #works{ padding: 18px; }
    #works h2{
      margin:0;
      color:var(--gold2);
      -webkit-text-stroke: .25px rgba(0,0,0,.28);
      text-shadow: 0 1px 0 rgba(0,0,0,.62);
    }
    .tabs{
      margin-top:14px;
      display:flex;
      gap:8px;
      flex-wrap:wrap;
    }
    .tabs .tab{
      appearance:none;
      border:1px solid rgba(215,184,106,.24);
      background: rgba(255,255,255,.02);
      color:rgba(237,227,201,.90);
      border-radius: 999px;
      padding:10px 12px;
      font-weight:900;
      font-size:12.5px;
      cursor:pointer;
      min-height: 42px;
      box-shadow: 0 10px 24px rgba(0,0,0,.30);
      text-shadow: 0 1px 0 rgba(0,0,0,.55);
    }
    .tabs .tab.active{
      border-color: rgba(215,184,106,.70);
      background: rgba(215,184,106,.12);
      color: var(--gold2);
    }
    .tabs .tab:hover{
      border-color: rgba(215,184,106,.45);
      background: rgba(215,184,106,.08);
    }
    .tabs .tab:focus-visible{
      outline:2px solid rgba(121,167,255,.55);
      outline-offset:2px;
    }

    .tabpanel{ display:none; margin-top:16px; }
    .tabpanel.active{ display:block; }

    .w-grid{
      display:grid;
      grid-template-columns: repeat(4, minmax(0,1fr));
      gap: 12px;
    }
    @media (max-width: 980px){
      .w-grid{ grid-template-columns: repeat(3, minmax(0,1fr)); }
    }
    @media (max-width: 680px){
      .w-grid{ grid-template-columns: repeat(2, minmax(0,1fr)); }
    }

    .w-card{
      background: linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.015));
      border:1px solid rgba(255,255,255,.05);
      border-radius: 16px;
      overflow:hidden;
      cursor:pointer;
      transition: transform .10s ease, border-color .16s ease, background .16s ease;
    }
    .w-card:hover{
      transform: translateY(-1px);
      border-color: rgba(215,184,106,.28);
      background: rgba(215,184,106,.05);
    }
    .w-thumb{
      width:100%;
      aspect-ratio: 4/5;
      object-fit: cover;
      background: rgba(0,0,0,.18);
    }
    .w-meta{
      padding: 10px 10px 12px;
      border-top:1px solid rgba(255,255,255,.045);
    }
    .w-title{
      font-weight: 900;
      color: rgba(237,227,201,.94);
      line-height:1.35;
      font-size: 13px;
      text-shadow: 0 1px 0 rgba(0,0,0,.58);
    }
    .w-title .ko,
    .w-title .en{ margin:0; }
    .w-sub{
      margin-top:6px;
      font-size: 12px;
      color: rgba(237,227,201,.70);
      line-height:1.45;
      white-space: pre-line;
    }
    .w-msg{
      padding: 16px;
      border-radius: 14px;
      background: rgba(0,0,0,.18);
      border: 1px solid rgba(255,255,255,.05);
      color: rgba(237,227,201,.85);
    }
    .w-msg small{ display:block; margin-top:6px; color: rgba(237,227,201,.58); }

    /* =========================================================
       REPORTS
    ========================================================= */
    #reports{ padding:18px; }
    #reports h2{
      margin:0;
      color:var(--gold2);
      -webkit-text-stroke: .25px rgba(0,0,0,.28);
      text-shadow: 0 1px 0 rgba(0,0,0,.62);
    }
    .reports-omega{ margin-top:14px; }

    .r-head{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
      padding: 10px 10px;
      border-radius: 14px;
      background: rgba(255,255,255,.02);
      border: 1px solid rgba(255,255,255,.05);
    }
    .r-tabs{ display:flex; gap:8px; flex-wrap:wrap; }
    .r-tab{
      appearance:none;
      border:1px solid rgba(121,167,255,.18);
      background: rgba(255,255,255,.02);
      color: rgba(237,227,201,.88);
      border-radius: 999px;
      padding:9px 12px;
      font-weight:900;
      font-size:12.5px;
      cursor:pointer;
      min-height: 42px;
      box-shadow: 0 10px 24px rgba(0,0,0,.30);
      text-shadow: 0 1px 0 rgba(0,0,0,.55);
    }
    .r-tab.is-active{
      border-color: rgba(215,184,106,.70);
      background: rgba(215,184,106,.12);
      color: var(--gold2);
    }
    .r-tab:hover{
      border-color: rgba(215,184,106,.42);
      background: rgba(215,184,106,.08);
    }

    .r-toggle{
      appearance:none;
      border:1px solid rgba(215,184,106,.34);
      background: rgba(215,184,106,.10);
      color: var(--gold2);
      border-radius: 999px;
      padding:9px 12px;
      font-weight: 950;
      cursor:pointer;
      min-height: 42px;
      box-shadow: 0 10px 24px rgba(0,0,0,.30);
      text-shadow: 0 1px 0 rgba(0,0,0,.55);
    }

    .r-grid{
      margin-top: 12px;
      display:none;
      grid-template-columns: repeat(3, minmax(0,1fr));
      gap: 12px;
    }
    @media (max-width: 980px){
      .r-grid{ grid-template-columns: repeat(2, minmax(0,1fr)); }
    }
    @media (max-width: 680px){
      .r-grid{ grid-template-columns: 1fr; }
    }

    .r-item{
      background: linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.015));
      border:1px solid rgba(255,255,255,.05);
      border-radius: 16px;
      padding: 12px 12px;
      cursor:pointer;
      transition: transform .10s ease, border-color .16s ease, background .16s ease;
      white-space: pre-line;
    }
    .r-item:hover{
      transform: translateY(-1px);
      border-color: rgba(215,184,106,.28);
      background: rgba(215,184,106,.05);
    }
    .r-item .t{
      font-weight: 950;
      color: rgba(237,227,201,.94);
      line-height:1.35;
      text-shadow: 0 1px 0 rgba(0,0,0,.58);
    }
    .r-item .m{
      margin-top:6px;
      font-size:12px;
      color: rgba(237,227,201,.62);
    }
    .r-item .s{
      margin-top:10px;
      font-size:12px;
      color: rgba(237,227,201,.78);
      line-height:1.55;
      white-space: pre-line;
    }

    /* =========================================================
       BIO MODAL
    ========================================================= */
    #bio-modal[hidden]{ display:none !important; }
    #bio-modal{ position: fixed; inset:0; z-index: 50; }
    .bio-backdrop{
      position:absolute; inset:0;
      background: rgba(0,0,0,.62);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
    }
    .bio-card{
      position:relative;
      max-width: 980px;
      width: calc(100% - 28px);
      margin: calc(18px + var(--safe-top)) auto calc(18px + var(--safe-bot));
      background: linear-gradient(180deg, rgba(10,16,34,.92), rgba(5,8,18,.92));
      border:1px solid rgba(215,184,106,.18);
      border-radius: 18px;
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .bio-head{
      display:flex; align-items:center; justify-content:space-between;
      gap:10px;
      padding: 14px 14px;
      border-bottom:1px solid rgba(255,255,255,.05);
    }
    .bio-head h2{
      margin:0;
      color: var(--gold2);
      font-size: 15px;
      font-weight: 950;
      -webkit-text-stroke: .25px rgba(0,0,0,.28);
      text-shadow: 0 1px 0 rgba(0,0,0,.62);
    }
    .bio-lang{ display:flex; gap:8px; align-items:center; }
    .bio-lang .lang{
      appearance:none;
      border:1px solid rgba(121,167,255,.18);
      background: rgba(255,255,255,.02);
      color: rgba(237,227,201,.88);
      border-radius: 999px;
      padding:8px 12px;
      font-weight:950;
      font-size:12px;
      cursor:pointer;
      min-height: 38px;
      box-shadow: 0 10px 24px rgba(0,0,0,.28);
      text-shadow: 0 1px 0 rgba(0,0,0,.55);
    }
    .bio-lang .lang.active{
      border-color: rgba(215,184,106,.70);
      background: rgba(215,184,106,.12);
      color: var(--gold2);
    }
    .bio-close{
      appearance:none;
      border:1px solid rgba(215,184,106,.34);
      background: rgba(255,255,255,.02);
      color: var(--gold2);
      width: 44px;
      height: 44px;
      border-radius: 14px;
      cursor:pointer;
      font-size: 18px;
      font-weight: 950;
      box-shadow: 0 10px 24px rgba(0,0,0,.28);
    }

    .expo-kicker{
      width:100%;
      text-align:left;
      appearance:none;
      border:0;
      border-bottom:1px solid rgba(255,255,255,.05);
      background: rgba(255,255,255,.02);
      color: rgba(237,227,201,.92);
      padding: 12px 14px;
      font-weight: 950;
      cursor:pointer;
      text-shadow: 0 1px 0 rgba(0,0,0,.55);
    }

    .slide-wrap{
      max-height: 0px;
      overflow:hidden;
      transition: max-height .35s ease;
      border-bottom:1px solid rgba(255,255,255,.05);
    }
    .slide-wrap[data-open="true"]{ max-height: 1400px; }
    .bio-body{
      padding: 14px 14px;
      color: rgba(237,227,201,.88);
      line-height: 1.7;
    }
    .bio-body p{ margin: 10px 0; }
    .bio-body strong{ color: var(--gold2); }

    /* =========================================================
       LIGHTBOX
    ========================================================= */
    #lightbox{
      position: fixed; inset:0; z-index: 60;
      display:none;
      background: rgba(0,0,0,.72);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
    }
    #lightbox.is-open{ display:block; }
    .lb-stage{
      position:absolute;
      inset: 14px 14px calc(14px + var(--safe-bot)) 14px;
      display:flex; flex-direction:column;
      align-items:center; justify-content:center;
      gap: 12px;
      padding-top: calc(var(--safe-top));
    }
    #lbImg{
      max-width: min(980px, 96vw);
      max-height: min(72vh, 760px);
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.08);
      box-shadow: var(--shadow);
      background: rgba(0,0,0,.25);
      object-fit: contain;
    }
    .lb-caption{
      width: min(980px, 96vw);
      padding: 12px 12px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.06);
      background: rgba(5,8,18,.62);
      color: rgba(237,227,201,.88);
      white-space: pre-wrap;
      line-height:1.65;
      text-shadow: 0 1px 0 rgba(0,0,0,.55);
    }
    .lb-close{
      position:absolute;
      top: calc(14px + var(--safe-top));
      right: calc(14px + var(--safe-right));
      width: 46px;
      height: 46px;
      border-radius: 14px;
      appearance:none;
      border:1px solid rgba(215,184,106,.34);
      background: rgba(255,255,255,.02);
      color: var(--gold2);
      font-size: 18px;
      font-weight: 950;
      cursor:pointer;
      box-shadow: 0 12px 28px rgba(0,0,0,.32);
    }

    /* =========================================================
       FFT + Controls (íˆ¬ëª… ìœ ì§€)
    ========================================================= */
    #fftBar{
      position: fixed;
      left: 0;
      right: 0;
      bottom: calc(0px + var(--safe-bot));
      height: 3px;
      z-index: 70;
      background: rgba(255,255,255,.06);
      pointer-events:none;
    }
    #fftBar span{
      display:block;
      height:100%;
      width:0%;
      background: rgba(215,184,106,.55);
      transition: width .08s linear;
    }

    #ctrl{
      position: fixed;
      right: calc(14px + var(--safe-right));
      bottom: calc(14px + var(--safe-bot) + 6px);
      z-index: 71;
      display:flex;
      gap:10px;
    }
    .ctrlbtn{
      width: 48px;
      height: 48px;
      border-radius: 16px;
      appearance:none;
      border: 1px solid rgba(215,184,106,.34);

      /* âœ… íˆ¬ëª… ê·œì¹™ ìœ ì§€ */
      background: rgba(0,0,0,0);

      color: var(--gold2);
      font-size: 18px;
      cursor:pointer;
      box-shadow: 0 12px 28px rgba(0,0,0,.28);
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
      text-shadow: 0 1px 0 rgba(0,0,0,.55);
    }
    .ctrlbtn[disabled]{ opacity:.5; cursor:not-allowed; }

    /* =========================================================
       Footer (ë§í¬ â€œë²„íŠ¼ê¸‰â€ + ê¸ˆë¹› ì„ ëª… + í„°ì¹˜ê°)
    ========================================================= */
    footer{
      max-width: var(--maxw);
      margin: 18px auto 0;
      padding: 14px 18px calc(16px + var(--safe-bot));
      border-top:1px solid rgba(215,184,106,.16);
      background: linear-gradient(180deg, rgba(5,8,18,.10), rgba(0,0,0,0));
      border-radius: 18px;
    }
    footer .links{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
    }
    footer .links a{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      min-height: 48px;
      padding: 0 16px;
      border-radius: 999px;
      border:1px solid rgba(215,184,106,.34);
      background: rgba(255,255,255,.02);
      color: var(--gold2);
      font-weight: 950;
      letter-spacing:.25px;
      text-decoration:none;
      box-shadow: 0 10px 24px rgba(0,0,0,.30);
      text-shadow: 0 1px 0 rgba(0,0,0,.60);
    }
    footer .links a:hover{
      background: rgba(215,184,106,.12);
      border-color: rgba(215,184,106,.70);
      text-decoration:none;
    }
    footer .links a:active{ transform: translateY(1px); }
    footer .links a:focus-visible{
      outline:2px solid rgba(121,167,255,.55);
      outline-offset:2px;
    }

    footer small{
      display:block;
      margin-top: 10px;
      color: rgba(237,227,201,.70);
      letter-spacing:.2px;
      text-shadow: 0 1px 0 rgba(0,0,0,.55);
    }

    /* =========================================================
       Reduced motion
    ========================================================= */
    @media (prefers-reduced-motion: reduce){
      *{ scroll-behavior:auto !important; transition:none !important; animation:none !important; }
      #fftBar span{ transition:none !important; }
    }
  </style>
</head>

<body class="korean">
  <!-- BACKGROUND -->
  <canvas id="waves" aria-hidden="true"></canvas>

  <!-- HEADER -->
  <header>
    <div class="brand">ë“±ì‘ ç‡ˆé…Œ DUNGZAK CESTLAVIE âˆ®27</div>
    <div class="brand-sub">LIGHTFLOW Â· LIGHT Â· MEMORY Â· BEING</div>

    <nav class="primary" aria-label="Primary">
      <button type="button" data-target="poem" class="active" aria-current="page">Poem</button>
      <button type="button" data-target="works">Works</button>
      <button type="button" data-target="reports">Reports</button>
      <button type="button" id="tab-bio">Artist Bio</button>
    </nav>

    <div class="lang" aria-label="Language">
      <button type="button" id="koBtn" class="active">KR</button>
      <button type="button" id="enBtn">EN</button>
      <button type="button" id="hyBtn">KR+EN</button>
    </div>
  </header>

  <main>
    <!-- 1) POEM -->
    <section id="poem" class="hero">
      <h1 class="ko">ë¹› Â· ê¸°ì–µ Â· ì¡´ì¬</h1>
      <h1 class="en">Light Â· Memory Â· Being</h1>

      <div class="poemwrap">
        <p class="ko" style="font-weight:700">ã€ˆíŒŒë¦¬ì˜ ì„¼ëŠê°•ã€‰</p>
        <p class="en" style="font-weight:700">ã€ˆThe Seine of Parisã€‰</p>
        <p class="ko" style="opacity:.85;margin-top:4px">ë“±ì‘ ç‡ˆé…Œ DUNGZAK CESTLAVIE</p>
        <p class="en" style="opacity:.85;margin-top:4px">DUNGZAK CESTLAVIE</p>

        <div class="poem">
          <p class="ko">ì„¼ëŠê°• ë‹¤ë¦¬ ì•„ë˜, ë…¸íŠ¸ë¥´ë‹´ ì„±ë‹¹ì˜ ì´›ë¶ˆì´ ì¼œì§ˆ ë¬´ë µâ€”</p>
          <p class="en">Beneath the bridge of the Seine, as the candles of Notre-Dame begin to glowâ€”</p>

          <p class="ko">ì†Œë°•í•œ ê¿ˆë“¤ì„ ì•ˆê³  ì‚¬ëŠ” ì‚¬ëŒë“¤ì´ ëª¨ì—¬ ì¶¤ì¶˜ë‹¤.</p>
          <p class="en">People who live with humble dreams gather to dance.</p>

          <p class="ko">ë¹™ê¸€ë¹™ê¸€ ëŒì•„ê°€ë©° ë‚´ë”›ëŠ” ë°œê±¸ìŒì˜ í™”ìŒ ìœ„ë¡œ,</p>
          <p class="en">Their circling steps form harmonies upon the rhythm of their feet,</p>

          <p class="ko">ë°”ì´ì˜¬ë¦°ì´ ìƒˆíŒŒë—ê³  ìƒ›ë…¸ë‘ì˜ ë¹›ì„ í©ë¿Œë¦¬ë©° ì›ƒëŠ”ë‹¤.</p>
          <p class="en">As violins scatter blue and golden light, laughing in brilliance.</p>

          <p class="ko">ê¿ˆê¾¸ëŠ” ì—¬ì¸ë“¤ê³¼ ê¿ˆê¾¸ëŠ” ë‚¨ì„±ë“¤ì´ ì†ì„ ì¡ê³ ,</p>
          <p class="en">Dreaming women and dreaming men clasp hands,</p>

          <p class="ko">ì‚¬ëŒì˜ í–¥ê¸°ë¥¼ ë§¡ìœ¼ë©° ì¬ë¹ ë¥¸ ìŒë¥ ì— ëª¸ì„ ë§¡ê¸´ë‹¤.</p>
          <p class="en">Breathing the scent of humanity, surrendering to the swift rhythm.</p>

          <p class="ko">ì•„ë‹´ê³¼ ì´ë¸Œì˜ ë³„ìêµ­ì´ ëˆˆë¬¼ë°©ìš¸ì²˜ëŸ¼ í˜ëŸ¬ë‚´ë¦¬ëŠ” ë‚˜ë¬´,</p>
          <p class="en">A tree where Adam and Eveâ€™s star-traces drip like tears,</p>

          <p class="ko">ê·¸ í’ê²½ ì†ì—ì„œ ì´ˆìŠ¹ë‹¬ì€ ì–´ì—¬ìœ í•˜ì–€ ë¯¸ì†Œë¥¼ í˜ë¦°ë‹¤.</p>
          <p class="en">In that scene, the crescent moon releases a tender white smile.</p>

          <p class="ko">ìƒ¤ë½, ìƒ¤ë½â€” ì¶¤ì‚¬ìœ„ì˜ ë¦¬ë“¬ì´ í™•ì¥ë ìˆ˜ë¡,</p>
          <p class="en">Sharak, sharakâ€” as the rhythm of dance expands,</p>

          <p class="ko">êµ¬ê²½í•˜ë˜ ì´ë“¤ë§ˆì € ì–´ê¹¨ì™€ í—ˆë¦¬ë¥¼ ë“¤ì©ì´ë©°,</p>
          <p class="en">Even the onlookers begin to sway their shoulders and waists,</p>

          <p class="ko">ì‚¬ë‘ì˜ ì…ë§ì¶¤ì„ ì˜ì‹í•œë‹¤.</p>
          <p class="en">Becoming aware of loveâ€™s gentle kiss.</p>

          <p class="ko">í˜ëŸ¬ê° ì†ì— í¬ê°œì§„ ìˆœê°„, ê·¸ë“¤ì€ ì˜í˜¼ì˜ ë°•ì œê°€ ë˜ì–´,</p>
          <p class="en">Within the flowing overlap of time, they become taxidermies of the soul,</p>

          <p class="ko">ë©ˆì¶¤ ì†ì— ì˜ì›ì„ ìƒˆê¸´ë‹¤.</p>
          <p class="en">inscribing eternity into stillness.</p>
        </div>
      </div>
    </section>

    <!-- 2) WORKS -->
    <!-- âœ… ë³€ê²½: display:none ì œê±° (ëª¨ë“  ì‘í’ˆì´ í•­ìƒ ë‚˜ì˜¤ê²Œ) -->
    <section id="works">
      <h2 class="ko">ì‘í’ˆ ì•„ì¹´ì´ë¸Œ</h2>
      <h2 class="en">Artworks</h2>

      <div class="tabs" role="tablist">
        <button type="button" class="tab active" data-panel="pray">â…  ìš°ë¦¬ë¥¼ ìœ„í•´ ê¸°ë„í•´ ì£¼ì„¸ìš” Â· Pray for Us</button>
        <button type="button" class="tab" data-panel="human">â…¡ ì¸ê°„ Â· Human Being</button>
        <button type="button" class="tab" data-panel="rebirth">â…¢ ì •ì‹ ì˜ ì¬íƒ„ìƒ Â· Rebirth of Mind</button>
        <button type="button" class="tab" data-panel="exist">â…£ ì¡´ì¬ì˜ íšŒë³µ Â· Restoration of Being</button>
        <button type="button" class="tab" data-panel="cosmos">â…¤ ë¹›ì˜ ì´ˆì˜ì‹ Â· Metaconsciousness of Light</button>
      </div>

      <!-- âœ… SCRIPTì—ì„œ works.json ì½ì–´ì„œ ì—¬ê¸° 5ê°œ íŒ¨ë„ì— ê°ê° â€œê·¸ë¦¬ë“œâ€ë¥¼ ì±„ìš°ë©´ ë¨ -->
      <div id="panel-pray" class="tabpanel active"></div>
      <div id="panel-human" class="tabpanel"></div>
      <div id="panel-rebirth" class="tabpanel"></div>
      <div id="panel-exist" class="tabpanel"></div>
      <div id="panel-cosmos" class="tabpanel"></div>
    </section>

    <!-- 3) REPORTS -->
    <!-- âœ… ë³€ê²½: display:none ì œê±° (Reportsë„ í•­ìƒ í‘œì‹œ) -->
    <section id="reports">
      <h2 class="ko">ë¯¸í•™ ë³´ê³ ì„œ (DCAR Series)</h2>
      <h2 class="en">Aesthetic Reports (DCAR Series)</h2>

      <div class="reports-omega">
        <div class="r-head">
          <div class="r-tabs">
            <button type="button" class="r-tab is-active" data-r="all">All</button>
            <button type="button" class="r-tab" data-r="theory">Theory</button>
            <button type="button" class="r-tab" data-r="archive">Archive</button>
            <button type="button" class="r-tab" data-r="practice">Practice</button>
          </div>

          <button type="button" id="reportsToggle" class="r-toggle" aria-expanded="false">
            Open Reports
          </button>
        </div>

        <!-- âœ… í•µì‹¬: reports.jsonì—ì„œ title_ko/title_en + summary_ko/summary_enì„ â€œSCRIPTê°€â€ ë Œë”ë§ -->
        <!-- âœ… BODYì—ëŠ” ìš”ì•½ í…ìŠ¤íŠ¸ë¥¼ ì§ì ‘ ì“°ì§€ ì•ŠëŠ”ë‹¤ -->
        <div id="reportGrid" class="r-grid"></div>

        <!-- âœ… MD ì›ë¬¸ì€ ìƒˆ ì°½ìœ¼ë¡œ ì—´ê±°ë‚˜(ê¶Œì¥) ë˜ëŠ” ì—¬ê¸° viewerì— í‘œì‹œ(ì„ íƒ) -->
        <div id="reportViewer" class="r-viewer" aria-live="polite"></div>
      </div>
    </section>
  </main>

  <!-- ARTIST BIO MODAL (ì›ë¬¸ í…ìŠ¤íŠ¸ ìœ ì§€ + ìš”ì²­ ìˆ˜ì • ë°˜ì˜) -->
  <div id="bio-modal" hidden>
    <div class="bio-backdrop"></div>

    <div class="bio-card" role="dialog" aria-modal="true" aria-labelledby="bio-title">
      <div class="bio-head">
        <h2 id="bio-title" class="ko">ì‘ê°€ ì†Œê°œ</h2>
        <h2 class="en">Artist Bio</h2>

        <div class="bio-lang">
          <button class="lang active" data-bio-lang="kr" aria-pressed="true">KR</button>
          <button class="lang" data-bio-lang="en" aria-pressed="false">EN</button>
        </div>

        <button class="bio-close" aria-label="Close">âœ•</button>
      </div>

      <!-- one-line summary -->
      <button class="expo-kicker" id="expoToggle" aria-expanded="false">
        <span class="ko">ë“±ì‘ ç‡ˆé…Œ DUNGZAK CESTLAVIE Â· êµ­ë‚´ì™¸ ê°œì¸ì „ 29íšŒ â–¾</span>
        <span class="en">DUNGZAK CESTLAVIE Â· 29 solo exhibitions worldwide â–¾</span>
      </button>

      <!-- slide list -->
      <div class="slide-wrap" id="expoSlide" data-open="false">
        <!-- (í•œêµ­ì–´ Bio ë³¸ë¬¸ ê·¸ëŒ€ë¡œ + ìµœìƒë‹¨ 2026 ì¶”ê°€) -->
        <div class="bio-body ko">
          <p><strong>êµ­ë‚´ ì£¼ìš”ì „ì‹œ</strong></p>
          <p>2026 ê¹€ì •ìˆ™ ê°¤ëŸ¬ë¦¬, ì¸ì²œ, ëŒ€í•œë¯¼êµ­</p>
          <p>2025 êµ¬êµ¬ê°¤ëŸ¬ë¦¬ ëª©ë™, ì„œìš¸, ëŒ€í•œë¯¼êµ­</p>
          <p>2023, 2024 êµ¬êµ¬ê°¤ëŸ¬ë¦¬ ëª©ë™, ì„œìš¸, ëŒ€í•œë¯¼êµ­</p>
          <p>2023 ì•„íŠ¸í”ŒëŸ¬ìŠ¤ ê°¤ëŸ¬ë¦¬ ì¸ì‚¬ë™, ì„œìš¸, ëŒ€í•œë¯¼êµ­</p>
          <p>2019, 2022 í•´ì–‘ ì—ë„ˆì§€ ì •ì› í•œë‚¨ë™, ì„œìš¸, ëŒ€í•œë¯¼êµ­</p>
          <p>2015 NC ê°¤ëŸ¬ë¦¬, ë¶€ì‚°, ëŒ€í•œë¯¼êµ­</p>
          <p>2014 ê°¤ëŸ¬ë¦¬ ê³¨ëª©, ì´íƒœì›, ì„œìš¸, ëŒ€í•œë¯¼êµ­</p>
          <p>2013 í”„ë¼ë¯¸ìŠ¤ ëœë“œ, ë¶€ì‚°, ëŒ€í•œë¯¼êµ­</p>
          <p>2009 ì•„íŠ¸ ê°¤ëŸ¬ë¦¬ ìœ , ë¶€ì‚°, ëŒ€í•œë¯¼êµ­</p>
          <p>2005 íš¡ì„± ë¬¸í™”ê´€, ê°•ì›ë„, ëŒ€í•œë¯¼êµ­</p>
          <p>2003 ìŠ¤í˜ì´ìŠ¤ í‚¤ì¹œ, ì„œìš¸, ëŒ€í•œë¯¼êµ­</p>
          <p>2003 í™ëŒ€ ë†€ì´í„° ì‚¬ê³„ ì•¼ì™¸ ì „ì‹œ, ì„œìš¸, ëŒ€í•œë¯¼êµ­</p>
          <p>2000 ê°¤ëŸ¬ë¦¬ ì†Œí˜¸, ë¶€ì‚°, ëŒ€í•œë¯¼êµ­</p>
          <p>2000 ì„¸ì›ë°±í™”ì , ë¶€ì‚°, ëŒ€í•œë¯¼êµ­</p>
          <br><p><strong>êµ­ì™¸ ì£¼ìš”ì „ì‹œ</strong></p>
          <p>2016 Berlin Mitte Live Concert Bar, ë² ë¥¼ë¦°, ë…ì¼</p>
          <p>2015 ëª¨ìŠ¤í¬ë°” êµ­ì œê³µí•­ ã€ì‚¶ê³¼ ì˜ˆìˆ ì˜ ê°„ê²©ã€, ëª¨ìŠ¤í¬ë°”, ëŸ¬ì‹œì•„</p>
          <p>2014 í˜¸ì°Œë¯¼ ì¤‘ì•™ ê²½ì°°ì„œ, ì¦‰í¥ í¼í¬ë¨¼ìŠ¤ & ì „ì‹œ, ë² íŠ¸ë‚¨</p>
          <p>2011 Open Art in Amsterdam, ë„¤ëœë€ë“œ</p>
          <p>2006 Linka Gallery, ì•”ìŠ¤í…Œë¥´ë‹´, ë„¤ëœë€ë“œ</p>
          <p>2005 Lune Cafe, ëª½íŒŒë¥´ë‚˜ìŠ¤, íŒŒë¦¬, í”„ë‘ìŠ¤</p>
          <p>2005 ë£¨ë¸Œë¥´ ë°•ë¬¼ê´€ ì™¸ë²½ ì „ì‹œ, íŒŒë¦¬, í”„ë‘ìŠ¤</p>
          <br><p><strong>ê·¸ ì™¸ ì „ì‹œ</strong></p>
          <p>2025 ê·¸ë¦¼ë”°ë¼ ê±·ëŠ” ë„ì‹œ ìµì‚°, ìµì‚°, ëŒ€í•œë¯¼êµ­</p>
          <p>2025 ê°¤ëŸ¬ë¦¬5 ì „êµ­ ì´ˆëŒ€ì „, ì¸ì²œ, ëŒ€í•œë¯¼êµ­</p>
          <p>2024, 2025 êµ¬êµ¬ê°¤ëŸ¬ë¦¬ ì†¡ë…„ ì„ ë¬¼ì „, ì„œìš¸, ëŒ€í•œë¯¼êµ­</p>
          <p>2022 ê¹€ì˜ìš°Â·ë“±ì‘ 2ì¸ì „, ì•„ë¥´í…œ ê°¤ëŸ¬ë¦¬, ì„œìš¸, ëŒ€í•œë¯¼êµ­</p>
          <p>2004 ê´‘ì£¼ë¹„ì—”ë‚ ë ˆ â€œThe Stageâ€, ê´‘ì£¼, ëŒ€í•œë¯¼êµ­</p>
          <p>2004 í•˜ëŒ€ë¦¬ ìˆ²ì† ë¯¸ìˆ ì œ â€œì˜ˆìˆ ì˜ íœ´ê°€â€, íš¡ì„±êµ°, ëŒ€í•œë¯¼êµ­</p>
          <p>2000 JosÃ© DelgadoÂ·ë“±ì‘ 2ì¸ì „, ì„œë©´ ë©”íŠ¸ë¡œ ë¯¸ìˆ ê´€, ë¶€ì‚°, ëŒ€í•œë¯¼êµ­</p>
          <br><p><strong>ì†Œì¥</strong></p>
          <p>ë² ë¥¼ë¦° ì‹œì²­; í›”ë³¼íŠ¸ ë³‘ì›; ë…¸íŠ¸ë¥´ë‹´ ëŒ€ì„±ë‹¹(íŒŒë¦¬); íŒŒë¦¬ ì •ì¹˜ëŒ€í•™; ë°”ë¥´ìƒ¤ë°” êµ­ë¦½ ì˜ë£Œì›; ì¼ë³¸ ë„ì¿„ êµíšŒ; ë² íŠ¸ë‚¨ í˜¸ì°Œë¯¼ ì¤‘ì•™ ê²½ì°°ì„œ; ë„¤ëœë€ë“œ ì•”ìŠ¤í…Œë¥´ë‹´ ë°˜ ê³ í ë¯¸ìˆ ê´€(í¬íŠ¸í´ë¦¬ì˜¤); ë¯¸êµ­ ë‰´ìš• í˜„ëŒ€ ë¯¸ìˆ ê´€(í¬íŠ¸í´ë¦¬ì˜¤); ë©”ë¦¬ì¸  ì¦ê¶Œ; êµ­ë‚´ì™¸ ê°œì¸ ì†Œì¥ì ë‹¤ìˆ˜</p>
          <br><p><strong>ì €ì„œ</strong></p>
          <p>ã€Š1 ëˆˆë¬¼ì€ ì ˆëŒ€ ë©ˆì¶”ì§€ ì•ŠëŠ”ë‹¤ â€” ì˜ˆìˆ ê°€ì˜ ì±…ë¬´ì™€ ì¸ê°„ ìš•ë§ã€‹(2022)</p>
          <p>ã€Šì˜ˆìˆ , ê·¸ ëì—†ëŠ” ì‚¬ë‘ã€‹(2024)</p>
        </div>

        <!-- (ì˜ë¬¸ Bio ë³¸ë¬¸ ê·¸ëŒ€ë¡œ + ìµœìƒë‹¨ 2026 ì¶”ê°€) -->
        <div class="bio-body en">
          <p><strong>Major Exhibitions in Korea</strong></p>
          <p>2026 Kim Jeongsuk Gallery, Incheon, Republic of Korea</p>
          <p>2025 Gugu Gallery Mokdong, Seoul, Republic of Korea</p>
          <p>2023, 2024 Gugu Gallery Mokdong, Seoul, Republic of Korea</p>
          <p>2023 Art Plus Gallery Insadong, Seoul, Republic of Korea</p>
          <p>2019, 2022 Ocean Energy Garden, Hannam-dong, Seoul, Republic of Korea</p>
          <p>2015 NC Gallery, Busan, Republic of Korea</p>
          <p>2014 Gallery Golmok, Itaewon, Seoul, Republic of Korea</p>
          <p>2013 Promise Land, Busan, Republic of Korea</p>
          <p>2009 Art Gallery You, Busan, Republic of Korea</p>
          <p>2005 Hoengseong Cultural Center, Gangwon-do, Republic of Korea</p>
          <p>2003 Space Kitchen, Seoul, Republic of Korea</p>
          <p>2003 Seasonal Outdoor Project &amp; Exhibition, Hongdae Playground, Seoul, Republic of Korea</p>
          <p>2000 Gallery Soho, Busan, Republic of Korea</p>
          <p>2000 Sewon Department Store, Busan, Republic of Korea</p>
          <br><p><strong>Major International Exhibitions</strong></p>
          <p>2016 Berlin Mitte Live Concert Bar, Berlin, Germany</p>
          <p>2015 Moscow International Airport, â€œThe Distance Between Life and Artâ€, Moscow, Russia</p>
          <p>2014 Improvised performance &amp; exhibition, Ho Chi Minh City Central Police Building, Vietnam</p>
          <p>2011 Open Art in Amsterdam, Netherlands</p>
          <p>2006 Linka Gallery, Amsterdam, Netherlands</p>
          <p>2005 Lune Cafe, Montparnasse, Paris, France</p>
          <p>2005 Exterior Wall Exhibition, Louvre Museum, Paris, France</p>
          <br><p><strong>Selected Other Exhibitions</strong></p>
          <p>2025 Walking with Art in Iksan, Republic of Korea</p>
          <p>2025 Gallery 5 National Invitational Exhibition, Incheon, Republic of Korea</p>
          <p>2024, 2025 Gugu Gallery Year-End Gift Exhibition, Seoul, Republic of Korea</p>
          <p>2022 Two-person Exhibition (Kim Young-woo &amp; DUNGZAK CESTLAVIE), Artem Gallery, Seoul</p>
          <p>2004 Gwangju Biennale â€œThe Stageâ€, Gwangju, Republic of Korea</p>
          <p>2004 Summer Forest Art Festival â€œArt Vacationâ€, Hadaeri, Hoengseong-gun, Republic of Korea</p>
          <p>2000 Two-person Exhibition (JosÃ© Delgado &amp; DUNGZAK CESTLAVIE), Seomyeon Metro Art Museum, Busan, Republic of Korea</p>
          <br><p><strong>Collections</strong></p>
          <p>Berlin City Hall, Germany; Humboldt Hospital, Germany; Notre-Dame Cathedral, Paris, France; Sciences Po, Paris, France; National Medical Institute, Warsaw, Poland;
Church in Tokyo, Japan; Ho Chi Minh City Central Police Department, Vietnam; Van Gogh Museum Amsterdam, Netherlands (Portfolio Collection); Museum of Modern Art, New York, USA (Portfolio Collection); 
Meritz Securities Co., Ltd., Republic of Korea; 
Numerous private collections worldwide.</p>
          <p><strong>Publications</strong></p>
          <p><em>1 Tears Never Stop</em> â€” The Artistâ€™s Duty and Human Desire (2022)</p>
          <p><em>Art, the Endless Love</em> (2024)</p>
        </div>
      </div>

      <!-- Bio main -->
      <div class="bio-body ko">
        <p>ë“±ì‘ ç‡ˆé…Œ DUNGZAK CESTLAVIEëŠ” â€˜ë¹› Â· ê¸°ì–µ Â· ì¡´ì¬â€™ë¼ëŠ” ì„¸ ì¶•ì„ ì¤‘ì‹¬ìœ¼ë¡œ ì˜ˆìˆ ì˜ ê·¼ì›ì„ íƒêµ¬í•˜ëŠ” í•œêµ­ í˜„ëŒ€ ì˜ˆìˆ ê°€ë‹¤.</p>
        <p>ê·¸ì˜ íšŒí™”ëŠ” í•œ ì¸ê°„ì´ ê²ªì–´ë‚¸ ê°ì •ì˜ ì”í–¥, ìƒì²˜ë¥¼ í†µê³¼í•˜ë©° ë‚¨ëŠ” ë¹›ì˜ ê¸°ì›, ê·¸ë¦¬ê³  ì‚¬ë¼ì§ê³¼ ë‹¤ì‹œ íƒœì–´ë‚¨ì´ ë°˜ë³µë˜ëŠ” ì¡´ì¬ì˜ ìˆœí™˜ì„ ê¸°ë¡í•œë‹¤. ë“±ì‘ì˜ í™”ë©´ì—ëŠ” ê¸°ë„Â·í”ì Â·ìˆ¨ê²° ê°™ì€ ì •ì„œì  ì¸µìœ„ê°€ ì¼œì¼œì´ ë‚¨ì•„ ìˆìœ¼ë©°, ì´ëŠ” ë‹¨ìˆœí•œ í˜•ìƒì´ë‚˜ ìƒ‰ì±„ë¥¼ ë„˜ì–´ â€˜ê°ì •ì˜ ìƒë¬¼í•™ì  í”ì â€™ê³¼ â€˜ê¸°ì–µì˜ ì¡´ì—„â€™ì„ ì‘ì‹œí•˜ëŠ” ë¯¸í•™ìœ¼ë¡œ í™•ì¥ëœë‹¤.</p>
        <p>ì„œìš¸ì„ ê¸°ë°˜ìœ¼ë¡œ ë² ë¥¼ë¦°, íŒŒë¦¬, ì•”ìŠ¤í…Œë¥´ë‹´, ë°”ë¥´ìƒ¤ë°”, ëª¨ìŠ¤í¬ë°” ë“±ì§€ì—ì„œ íšŒí™”ì™€ ë‹¤ë§¤ì²´ í”„ë¡œì íŠ¸ë¥¼ ì„ ë³´ì—¬ ì™”ìœ¼ë©°, íšŒí™”Â·í…ìŠ¤íŠ¸Â·ì‚¬ìš´ë“œÂ·ì˜ìƒÂ·ì•„ì¹´ì´ë¸Œë¥¼ í†µí•©í•´ â€˜ë¹›ì˜ ìœ¤ë¦¬â€™ì™€ â€˜ì¡´ì¬ ê°ì‘ì˜ ë¯¸í•™â€™ì„ êµ¬ì¶•í•´ì™”ë‹¤.</p>
        <p>ë“±ì‘ì˜ ì‘í’ˆì€ ê¸°ë„ë¬¸ì´ì ê¸°ë¡ì´ë©°, ìƒì²˜ ì´í›„ì— ë‚¨ëŠ” ë”°ëœ»í•¨ê³¼ ì§€ì›Œì§€ì§€ ì•ŠëŠ” ê¸°ì–µì˜ ì§€ì†, ê·¸ë¦¬ê³  ì¸ê°„ ì¡´ì—„ì— ëŒ€í•œ ì¡°ìš©í•œ ì„ ì–¸ì´ë‹¤. ê·¸ì˜ ì˜ˆìˆ  ì„¸ê³„ëŠ” â€˜ê³ í†µ ì´í›„ì˜ ë¹›â€™, â€˜ê¸°ì–µì´ ìŠ¤ìŠ¤ë¡œë¥¼ ë³µì›í•˜ëŠ” ìˆœê°„â€™, â€˜ì¡´ì¬ê°€ ë‹¤ì‹œ ê¹¨ì–´ë‚˜ëŠ” í˜¸í¡â€™ì„ ì¤‘ì‹¬ìœ¼ë¡œ í™•ì¥ëœë‹¤.</p>
      </div>

      <div class="bio-body en">
        <p>DUNGZAK CESTLAVIE is a Korean contemporary artist whose practice centers on the triad â€œLight Â· Memory Â· Being.â€</p>
        <p>His paintings trace emotional residues, the genesis of light passing through wounds, and cycles of disappearance and rebirth. Beyond image or color, his work expands into an ethics of light and the dignity of memory.</p>
        <p>Based in Seoul, he has developed painting and multi-media projects across Berlin, Paris, Amsterdam, Warsaw, and Moscow, integrating text, sound, video, and archival structures.</p>
        <p>Each work is both prayer and record: a quiet declaration of human dignity, the warmth that follows wounding, and the breath by which being reawakens.</p>
      </div>
    </div>
  </div>

  <!-- LIGHTBOX (â—€ â–¶ í™”ì‚´í‘œ ì œê±° ë²„ì „) -->
  <div id="lightbox" aria-hidden="true">
    <div class="lb-stage">
      <img id="lbImg" alt="">
      <div id="lbCap" class="lb-caption"></div>
    </div>
    <button id="lbClose" class="lb-close">âœ•</button>
  </div>

  <!-- SOUND PLAYER -->
  <div id="fftBar"><span></span></div>
  <div id="ctrl">
    <button id="soundBtn" class="ctrlbtn">âœ¨</button>
    <button id="soundStopBtn" class="ctrlbtn" disabled>ğŸ”‡</button>
  </div>

  <!-- FOOTER -->
  <footer>
    <div class="links">
      <a href="https://flickr.com/photos/dungzak" target="_blank" rel="noopener">Flickr</a>
      <a href="https://instagram.com/dungzakcestlavie" target="_blank" rel="noopener">Instagram</a>
      <a href="https://youtube.com/@dungzakcestlavie" target="_blank" rel="noopener">MUSIC UNIVERSE</a>
      <a href="https://naver.me/x95dk3l1" target="_blank" rel="noopener">Naver Info</a>
      <a href="mailto:dungzakcestlavie@gmail.com">Email</a>
    </div>

    <small class="ko">Â©ë“±ì‘ ç‡ˆé…Œ DUNGZAK CESTLAVIE</small>
    <small class="en">Â©DUNGZAK CESTLAVIE</small>
  </footer>

<script>
/* =========================================================
   Lightflow âˆ®27 â€” SCRIPT (FINAL)
   - NEVER edits BODY original text
   - Language: KR / EN / KR+EN (body class)
   - Nav: Poem / Works / Reports show/hide + active
   - Works: /data/works.json -> render ALL works into 5 panels
   - Lightbox: open/close + keys + swipe (within current section)
   - Reports: /data/reports.json -> KR/EN/KR+EN summary split
             + category filter + open full text in new window
             + small download link at bottom
   - Bio modal: open/close + modal language toggle
   - Waves canvas: refined, light, performant
   - Sound: deep cosmic resonance (WebAudio) + level bar
========================================================= */

(function () {
  "use strict";

  /* -----------------------------
     Helpers
  ----------------------------- */
  const $  = (sel, root=document) => root.querySelector(sel);
  const $$ = (sel, root=document) => Array.from(root.querySelectorAll(sel));
  const clamp = (v, a, b) => Math.max(a, Math.min(b, v));

  function nowBust() { return "v=" + Date.now(); }

  function withLeadingSlash(p) {
    if (!p) return "";
    const s = String(p).trim();
    if (!s) return "";
    if (/^https?:\/\//i.test(s)) return s;
    return s.startsWith("/") ? s : ("/" + s);
  }

  function safeText(s) {
    return String(s ?? "");
  }

  function escapeHTML(s) {
    return String(s ?? "")
      .replace(/&/g, "&amp;")
      .replace(/</g, "&lt;")
      .replace(/>/g, "&gt;")
      .replace(/"/g, "&quot;");
  }

  function prefersReducedMotion() {
    return window.matchMedia && window.matchMedia("(prefers-reduced-motion: reduce)").matches;
  }

  /* =========================================================
     1) Language Controller (body.korean / body.english / body.hybrid)
  ========================================================= */
  const LANG = {
    key: "LF_LANG_V2",
    mode: "korean", // korean | english | hybrid

    set(mode) {
      const m = (mode === "english" || mode === "hybrid") ? mode : "korean";
      this.mode = m;

      document.body.classList.remove("korean", "english", "hybrid");
      document.body.classList.add(m);

      // Buttons active (your HEAD CSS uses .active)
      const koBtn = $("#koBtn");
      const enBtn = $("#enBtn");
      const hyBtn = $("#hyBtn");
      [koBtn, enBtn, hyBtn].forEach(b => b && b.classList.remove("active"));
      if (m === "korean" && koBtn) koBtn.classList.add("active");
      if (m === "english" && enBtn) enBtn.classList.add("active");
      if (m === "hybrid" && hyBtn) hyBtn.classList.add("active");

      // Notify other modules (Works/Reports)
      window.dispatchEvent(new CustomEvent("lf:lang", { detail: { mode: m } }));

      try { localStorage.setItem(this.key, m); } catch (e) {}
    },

    restore() {
      let saved = null;
      try { saved = localStorage.getItem(this.key); } catch (e) {}
      if (saved === "korean" || saved === "english" || saved === "hybrid") this.set(saved);
      else this.set("korean");
    }
  };

  function bindLanguageButtons() {
    const koBtn = $("#koBtn");
    const enBtn = $("#enBtn");
    const hyBtn = $("#hyBtn");

    if (koBtn) koBtn.addEventListener("click", () => LANG.set("korean"));
    if (enBtn) enBtn.addEventListener("click", () => LANG.set("english"));
    if (hyBtn) hyBtn.addEventListener("click", () => LANG.set("hybrid"));

    // touch (iOS tap)
    [koBtn, enBtn, hyBtn].forEach((btn, idx) => {
      if (!btn) return;
      btn.addEventListener("touchend", (e) => {
        e.preventDefault();
        LANG.set(idx === 0 ? "korean" : idx === 1 ? "english" : "hybrid");
      }, { passive: false });
    });
  }

  /* =========================================================
     2) Navigation (Poem / Works / Reports)
     - show/hide sections decisively (your previous display:none issues)
  ========================================================= */
  const NAV = {
    buttons: [],
    sections: {},

    init() {
      this.buttons = $$('nav.primary button[data-target]');
      this.sections = {
        poem: $("#poem"),
        works: $("#works"),
        reports: $("#reports")
      };

      this.buttons.forEach(btn => {
        btn.addEventListener("click", () => {
          const t = btn.getAttribute("data-target");
          this.go(t, { scroll: true });
        });
        btn.addEventListener("touchend", (e) => {
          e.preventDefault();
          const t = btn.getAttribute("data-target");
          this.go(t, { scroll: true });
        }, { passive: false });
      });
    },

    go(target, opt={}) {
      const t = (target === "works" || target === "reports") ? target : "poem";

      // Active highlight
      this.buttons.forEach(b => b.classList.remove("active"));
      const activeBtn = this.buttons.find(b => b.getAttribute("data-target") === t);
      if (activeBtn) activeBtn.classList.add("active");

      // show/hide
      Object.keys(this.sections).forEach(k => {
        const sec = this.sections[k];
        if (!sec) return;
        sec.style.display = (k === t) ? "" : "none";
      });

      // For accessibility
      this.buttons.forEach(b => b.removeAttribute("aria-current"));
      if (activeBtn) activeBtn.setAttribute("aria-current", "page");

      // When section becomes visible, allow modules to refresh layout
      window.dispatchEvent(new CustomEvent("lf:section", { detail: { target: t } }));

      // Scroll
      if (opt.scroll) {
        const sec = this.sections[t];
        if (sec) sec.scrollIntoView({ behavior: prefersReducedMotion() ? "auto" : "smooth", block: "start" });
      }
    }
  };

  /* =========================================================
     3) Works (Render ALL)
     Expect works.json format:
       A) { "works": [ ... ] }
       B) [ ... ]
     Each work recommended fields:
       section_id (1..5), image, zoom, title_kr, title_en,
       material_kr, material_en, size_kr, size_en, year
  ========================================================= */
  const WORKS = {
    data: [],
    bySection: { 1: [], 2: [], 3: [], 4: [], 5: [] },

    panels: {
      pray: $("#panel-pray"),
      human: $("#panel-human"),
      rebirth: $("#panel-rebirth"),
      exist: $("#panel-exist"),
      cosmos: $("#panel-cosmos")
    },

    tabButtons: $$('button.tab[data-panel]'),
    currentPanelKey: "pray",
    currentIndex: 0,

    async load() {
      try {
        const res = await fetch("/data/works.json?" + nowBust(), { cache: "no-store" });
        if (!res.ok) throw new Error("works.json fetch " + res.status);
        const json = await res.json();
        const arr = Array.isArray(json) ? json : (Array.isArray(json?.works) ? json.works : []);
        this.data = arr;

        // regroup
        this.bySection = { 1: [], 2: [], 3: [], 4: [], 5: [] };
        arr.forEach(w => {
          const sid = Number(w?.section_id);
          if (sid >= 1 && sid <= 5) this.bySection[sid].push(w);
        });
      } catch (e) {
        console.warn("[Works] load failed:", e);
        this.data = [];
        this.bySection = { 1: [], 2: [], 3: [], 4: [], 5: [] };
      }
    },

    panelKeyToSectionId(key) {
      return key === "pray" ? 1 :
             key === "human" ? 2 :
             key === "rebirth" ? 3 :
             key === "exist" ? 4 : 5;
    },

    sectionIdToPanelKey(id) {
      return id === 1 ? "pray" :
             id === 2 ? "human" :
             id === 3 ? "rebirth" :
             id === 4 ? "exist" : "cosmos";
    },

    titleFor(w) {
      if (!w) return "";
      const m = LANG.mode;
      if (m === "english") return safeText(w.title_en || w.title_kr || "");
      return safeText(w.title_kr || w.title_en || "");
    },

    metaFor(w) {
      if (!w) return "";
      const m = LANG.mode;
      const mat = (m === "english") ? safeText(w.material_en || "") : safeText(w.material_kr || "");
      const siz = (m === "english") ? safeText(w.size_en || "") : safeText(w.size_kr || "");
      const yr  = safeText(w.year || "");
      return [mat, siz, yr].filter(Boolean).join(" Â· ");
    },

    resolveStandard(w) {
      // Works rule in your memory: image path already includes /images/standard...
      return withLeadingSlash(w?.image);
    },

    resolveZoom(w) {
      const z = safeText(w?.zoom).trim();
      return z ? withLeadingSlash(z) : this.resolveStandard(w);
    },

    cardHTML(w, idx) {
      const standard = this.resolveStandard(w);
      if (!standard) return "";
      const title = this.titleFor(w);
      const meta  = this.metaFor(w);
      const zoom  = this.resolveZoom(w);
      const alt   = [title, meta].filter(Boolean).join(" Â· ");

      return `
        <article class="card" data-idx="${idx}"
                 data-zoom="${escapeHTML(zoom)}"
                 data-title="${escapeHTML(title)}"
                 data-meta="${escapeHTML(meta)}">
          <img loading="lazy" decoding="async"
               src="${escapeHTML(standard)}"
               alt="${escapeHTML(alt)}">
        </article>
      `;
    },

    renderPanel(panelKey) {
      const key = this.panels[panelKey] ? panelKey : "pray";
      this.currentPanelKey = key;
      this.currentIndex = 0;

      // Tab active
      this.tabButtons.forEach(b => b.classList.remove("active"));
      const activeTab = this.tabButtons.find(b => b.getAttribute("data-panel") === key);
      if (activeTab) activeTab.classList.add("active");

      // Panel visible
      const panelId = "panel-" + key;
      $$(".tabpanel").forEach(p => p.classList.remove("active"));
      const panel = $("#" + panelId);
      if (panel) panel.classList.add("active");

      // Items
      const sid = this.panelKeyToSectionId(key);
      const items = this.bySection[sid] || [];

      if (!panel) return;

      if (!items.length) {
        panel.innerHTML = `
          <div style="opacity:.75; padding:14px 2px; line-height:1.7;">
            Works ë°ì´í„°ê°€ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.<br>
            section_id: ${sid}<br>
            /data/works.json êµ¬ì¡°, ì´ë¯¸ì§€ ê²½ë¡œ(/images/standard, /images/zoom)ì™€ íŒŒì¼ëª…ì„ í™•ì¸í•˜ì„¸ìš”.
          </div>
        `;
        return;
      }

      const html = items.map((w, i) => this.cardHTML(w, i)).filter(Boolean).join("");
      panel.innerHTML = `<div class="grid">${html}</div>`;

      // Bind open lightbox
      $$(".card", panel).forEach(card => {
        card.addEventListener("click", () => {
          const idx = Number(card.getAttribute("data-idx") || "0");
          this.currentIndex = isNaN(idx) ? 0 : idx;
          LIGHTBOX.openFromWorks();
        });
      });
    },

    currentWork() {
      const sid = this.panelKeyToSectionId(this.currentPanelKey);
      const arr = this.bySection[sid] || [];
      const idx = clamp(this.currentIndex, 0, Math.max(0, arr.length - 1));
      return arr[idx] || null;
    },

    next(delta) {
      const sid = this.panelKeyToSectionId(this.currentPanelKey);
      const arr = this.bySection[sid] || [];
      if (!arr.length) return null;
      const n = arr.length;
      this.currentIndex = (this.currentIndex + delta + n) % n;
      return this.currentWork();
    },

    bindTabs() {
      this.tabButtons.forEach(btn => {
        btn.addEventListener("click", () => this.renderPanel(btn.getAttribute("data-panel")));
        btn.addEventListener("touchend", (e) => {
          e.preventDefault();
          this.renderPanel(btn.getAttribute("data-panel"));
        }, { passive: false });
      });
    },

    async init() {
      this.bindTabs();
      await this.load();
      // Initial panel: the active tab or pray
      const active = this.tabButtons.find(b => b.classList.contains("active"));
      const key = active ? active.getAttribute("data-panel") : "pray";
      this.renderPanel(key);
    }
  };

  /* =========================================================
     4) Lightbox (uses your existing markup)
     - #lightbox .on
     - img: #lbImg, caption: #lbCap, close: #lbClose
     - ESC / â† â†’ / swipe
  ========================================================= */
  const LIGHTBOX = {
    root: $("#lightbox"),
    img: $("#lbImg"),
    cap: $("#lbCap"),
    closeBtn: $("#lbClose"),
    isOpen: false,
    touchX: null,

    open(src, caption) {
      if (!this.root || !this.img) return;
      if (!src) return;

      this.img.src = src;
      if (this.cap) this.cap.textContent = caption || "";

      this.root.classList.add("on");
      this.isOpen = true;

      document.documentElement.style.overflow = "hidden";
      document.body.style.overflow = "hidden";
    },

    close() {
      if (!this.root) return;
      this.root.classList.remove("on");
      this.isOpen = false;

      document.documentElement.style.overflow = "";
      document.body.style.overflow = "";
    },

    openFromWorks() {
      const w = WORKS.currentWork();
      if (!w) return;
      const src = WORKS.resolveZoom(w);
      const t = WORKS.titleFor(w);
      const m = WORKS.metaFor(w);
      const cap = [t, m].filter(Boolean).join(" Â· ");
      this.open(src, cap);
    },

    showDelta(delta) {
      const w = WORKS.next(delta);
      if (!w) return;
      const src = WORKS.resolveZoom(w);
      const t = WORKS.titleFor(w);
      const m = WORKS.metaFor(w);
      const cap = [t, m].filter(Boolean).join(" Â· ");
      this.open(src, cap);
    },

    bind() {
      if (!this.root) return;

      if (this.closeBtn) this.closeBtn.addEventListener("click", () => this.close());

      // click outside stage closes
      this.root.addEventListener("click", (e) => {
        if (e.target === this.root) this.close();
      });

      // keyboard
      document.addEventListener("keydown", (e) => {
        if (!this.isOpen) return;
        if (e.key === "Escape") this.close();
        if (e.key === "ArrowRight") this.showDelta(+1);
        if (e.key === "ArrowLeft") this.showDelta(-1);
      });

      // swipe
      this.root.addEventListener("touchstart", (e) => {
        if (!this.isOpen) return;
        this.touchX = e.touches?.[0]?.clientX ?? null;
      }, { passive: true });

      this.root.addEventListener("touchend", (e) => {
        if (!this.isOpen || this.touchX == null) return;
        const x1 = e.changedTouches?.[0]?.clientX ?? null;
        if (x1 == null) return;
        const dx = x1 - this.touchX;
        this.touchX = null;
        if (Math.abs(dx) < 42) return;
        this.showDelta(dx < 0 ? +1 : -1);
      }, { passive: true });
    }
  };

  /* =========================================================
     5) Reports (KR/EN/KR+EN summary from JSON)
     - containers: #reportGrid, #reportViewer
     - tabs: .r-tab[data-r]
     - toggle button: #reportsToggle (collapses viewer)
     - open full in new window + small download link
  ========================================================= */
  const REPORTS = {
    data: [],
    currentFilter: "all",
    isOpen: false,

    grid: $("#reportGrid"),
    viewer: $("#reportViewer"),
    toggleBtn: $("#reportsToggle"),
    tabs: $$(".r-tab[data-r]"),

    async load() {
      try {
        const res = await fetch("/data/reports.json?" + nowBust(), { cache: "no-store" });
        if (!res.ok) throw new Error("reports.json fetch " + res.status);
        const json = await res.json();
        const arr = Array.isArray(json) ? json : (Array.isArray(json?.reports) ? json.reports : []);
        this.data = arr;
      } catch (e) {
        console.warn("[Reports] load failed:", e);
        this.data = [];
      }
    },

    // robust getters (unknown schema tolerated)
    getId(r) { return safeText(r.id || r.slug || r.code || "REPORT"); },
    getCategory(r) { return safeText(r.category || r.group || r.type || "all").toLowerCase(); },

    getTitleKR(r) { return safeText(r.title_kr || r.titleKR || r.title || r.name || ""); },
    getTitleEN(r) { return safeText(r.title_en || r.titleEN || r.title_en_us || r.titleENUS || ""); },

    getSummaryKR(r) { return safeText(r.summary_kr || r.summaryKR || r.summary || r.desc_kr || r.description_kr || ""); },
    getSummaryEN(r) { return safeText(r.summary_en || r.summaryEN || r.desc_en || r.description_en || ""); },

    getDate(r) { return safeText(r.date || r.updated || r.year || ""); },

    // possible URLs (md/html/pdf)
    getViewURL(r) {
      return withLeadingSlash(r.view_url || r.url || r.page || r.html || r.link || "");
    },
    getTextURL(r) {
      // md/txt/raw content file
      return withLeadingSlash(r.text_url || r.md_url || r.markdown || r.raw || r.source || "");
    },
    getDownloadURL(r) {
      // explicit download or pdf
      return withLeadingSlash(r.download_url || r.pdf_url || r.pdf || r.file || "");
    },

    titleForMode(r) {
      if (LANG.mode === "english") return this.getTitleEN(r) || this.getTitleKR(r);
      if (LANG.mode === "hybrid") {
        const kr = this.getTitleKR(r);
        const en = this.getTitleEN(r);
        if (kr && en) return kr + " / " + en;
        return kr || en || "";
      }
      return this.getTitleKR(r) || this.getTitleEN(r);
    },

    summaryForMode(r) {
      if (LANG.mode === "english") return this.getSummaryEN(r) || this.getSummaryKR(r);
      if (LANG.mode === "hybrid") {
        const kr = this.getSummaryKR(r);
        const en = this.getSummaryEN(r);
        if (kr && en) return kr + "\n\n" + en;
        return kr || en || "";
      }
      return this.getSummaryKR(r) || this.getSummaryEN(r);
    },

    matchesFilter(r) {
      const f = this.currentFilter;
      if (!f || f === "all") return true;
      const c = this.getCategory(r);
      // allow multi-tag arrays
      if (Array.isArray(r.tags)) {
        return r.tags.map(x => safeText(x).toLowerCase()).includes(f);
      }
      return c === f;
    },

    cardHTML(r) {
      const id = this.getId(r);
      const title = this.titleForMode(r);
      const date = this.getDate(r);
      const cat = this.getCategory(r) || "report";

      const summary = this.summaryForMode(r);
      const viewURL = this.getViewURL(r);      // if exists (html page)
      const textURL = this.getTextURL(r);      // if exists (md/txt)
      const dlURL   = this.getDownloadURL(r);  // if exists (pdf)

      const badgePDF = dlURL && /\.pdf(\?|#|$)/i.test(dlURL);

      return `
        <article class="r-card" data-id="${escapeHTML(id)}">
          <div class="r-in">
            <div class="r-title" title="${escapeHTML(title)}">${escapeHTML(title || id)}</div>
            <div class="r-sub">${escapeHTML(id)}${date ? " Â· " + escapeHTML(date) : ""}</div>

            <div class="r-meta">
              <span class="r-badge">${escapeHTML(cat)}</span>
              ${badgePDF ? `<span class="r-badge pdf">pdf</span>` : ``}
            </div>

            <div class="r-body">${escapeHTML(summary)}</div>

            <div class="r-actions">
              <button type="button" class="r-open"
                data-view="${escapeHTML(viewURL)}"
                data-text="${escapeHTML(textURL)}"
                data-dl="${escapeHTML(dlURL)}"
                data-title="${escapeHTML(title || id)}"
                data-id="${escapeHTML(id)}"
              >Open</button>

              ${dlURL ? `<a class="r-dl" href="${escapeHTML(dlURL)}" target="_blank" rel="noopener">Download</a>` : ``}
            </div>
          </div>
        </article>
      `;
    },

    render() {
      if (!this.grid) return;

      const list = this.data.filter(r => this.matchesFilter(r));
      if (!list.length) {
        this.grid.innerHTML = `
          <div style="opacity:.75; padding:10px 2px; line-height:1.7;">
            Reports ë°ì´í„°ê°€ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.<br>
            /data/reports.json êµ¬ì¡°ë¥¼ í™•ì¸í•˜ì„¸ìš”.
          </div>
        `;
        return;
      }

      this.grid.innerHTML = list.map(r => this.cardHTML(r)).join("");

      // bind open
      $$(".r-open", this.grid).forEach(btn => {
        btn.addEventListener("click", () => {
          const payload = {
            id: btn.getAttribute("data-id") || "REPORT",
            title: btn.getAttribute("data-title") || "Report",
            viewURL: btn.getAttribute("data-view") || "",
            textURL: btn.getAttribute("data-text") || "",
            dlURL: btn.getAttribute("data-dl") || ""
          };
          this.openInNewWindow(payload);
        });
      });
    },

    setFilter(f) {
      const filter = safeText(f || "all").toLowerCase();
      this.currentFilter = filter;

      this.tabs.forEach(t => t.classList.remove("is-active"));
      const active = this.tabs.find(t => safeText(t.getAttribute("data-r")).toLowerCase() === filter);
      if (active) active.classList.add("is-active");

      this.render();
    },

    setOpen(open) {
      this.isOpen = !!open;

      if (this.toggleBtn) {
        this.toggleBtn.setAttribute("aria-expanded", this.isOpen ? "true" : "false");
        this.toggleBtn.textContent = this.isOpen ? "Close Reports" : "Open Reports";
      }

      // If closed: hide grid+viewer, if open: show grid and keep viewer empty unless used
      if (this.grid) this.grid.style.display = this.isOpen ? "" : "none";
      if (this.viewer) {
        this.viewer.style.display = this.isOpen ? "" : "none";
        if (!this.isOpen) this.viewer.textContent = "";
      }
    },

    async openInNewWindow({ id, title, viewURL, textURL, dlURL }) {
      // If viewURL is a real page and you prefer that, open directly:
      // But requirement: "ìƒˆ ì°½ì—ì„œ ì „ì²´ ì›ë¬¸ + í•˜ë‹¨ download ë§í¬"
      // -> we'll generate a clean viewer window and fetch text when possible.
      const w = window.open("", "_blank", "noopener,noreferrer");
      if (!w) {
        // popup blocked -> fallback
        const fallback = viewURL || textURL || dlURL;
        if (fallback) window.open(fallback, "_blank", "noopener,noreferrer");
        return;
      }

      const docTitle = title || id || "Report";
      const head = `
        <!doctype html>
        <html lang="ko">
        <head>
          <meta charset="utf-8">
          <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
          <title>${escapeHTML(docTitle)}</title>
          <style>
            :root{
              --bg:#070c1a; --fg:#eaf0ff; --gold:#e6c777; --line:#243169;
              --panel:#0b122c; --muted:#9fb0d8;
            }
            *{box-sizing:border-box;margin:0;padding:0}
            body{
              background:linear-gradient(180deg,#070c1a,#02030a);
              color:var(--fg);
              font:15px/1.75 system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans KR",sans-serif;
            }
            header{
              position:sticky;top:0;z-index:10;
              padding:14px 16px;
              background:linear-gradient(180deg,rgba(9,14,30,.96),rgba(9,14,30,.82));
              border-bottom:1px solid rgba(255,255,255,.08);
              backdrop-filter: blur(10px);
            }
            h1{font-size:18px;color:var(--gold);letter-spacing:.04em}
            .meta{margin-top:6px;color:var(--muted);font-size:12px;font-family:ui-monospace,Menlo,Consolas,monospace}
            main{max-width:980px;margin:0 auto;padding:18px 16px 40px}
            .panel{
              background:linear-gradient(180deg,var(--panel),#050814);
              border:1px solid var(--line);
              border-radius:14px;
              padding:16px 14px 18px;
              white-space:pre-wrap;
              overflow-wrap:anywhere;
            }
            .bar{
              margin-top:14px;
              display:flex;gap:10px;flex-wrap:wrap;align-items:center;
            }
            a{
              color:var(--gold);
              text-decoration:none;
              border:1px solid rgba(230,199,119,.35);
              padding:6px 10px;border-radius:999px;
              font-size:12px;
            }
            a:hover{background:rgba(230,199,119,.12)}
            .tiny{
              margin-top:12px;
              font-size:12px;color:rgba(255,255,255,.65);
              font-family:ui-monospace,Menlo,Consolas,monospace;
            }
          </style>
        </head>
        <body>
          <header>
            <h1>${escapeHTML(docTitle)}</h1>
            <div class="meta">${escapeHTML(id || "")}</div>
          </header>
          <main>
            <div id="content" class="panel">Loadingâ€¦</div>
            <div class="bar" id="bar"></div>
            <div class="tiny">Lightflow Â· Reports Viewer</div>
          </main>
        </body>
        </html>
      `;
      w.document.open();
      w.document.write(head);
      w.document.close();

      const contentEl = w.document.getElementById("content");
      const barEl = w.document.getElementById("bar");

      // Always provide at least one outward link if exists
      const links = [];
      if (viewURL) links.push({ label: "Open Source Page", href: viewURL });
      if (textURL) links.push({ label: "Open Text", href: textURL });
      if (dlURL)   links.push({ label: "download", href: dlURL });

      // render bar links (small)
      if (barEl && links.length) {
        barEl.innerHTML = links.map(x => `<a href="${escapeHTML(x.href)}" target="_blank" rel="noopener">${escapeHTML(x.label)}</a>`).join("");
      }

      // Try to fetch report full text (priority: textURL)
      const fetchURL = textURL || viewURL;

      if (!fetchURL) {
        if (contentEl) contentEl.textContent = "No content URL found in reports.json.";
        return;
      }

      try {
        const res = await fetch(fetchURL + (fetchURL.includes("?") ? "&" : "?") + nowBust(), { cache: "no-store" });
        if (!res.ok) throw new Error("fetch " + res.status);
        const text = await res.text();

        // If it's HTML, extract readable text by stripping tags (safe, simple)
        const isHTML = /<html|<body|<div|<\/p>|<\/h\d>/i.test(text);
        if (isHTML) {
          const tmp = document.createElement("div");
          tmp.innerHTML = text;
          const cleaned = tmp.textContent || tmp.innerText || text;
          if (contentEl) contentEl.textContent = cleaned.trim();
        } else {
          if (contentEl) contentEl.textContent = text.trim();
        }
      } catch (e) {
        if (contentEl) {
          contentEl.textContent =
            "Failed to load report content.\n\n" +
            "Try opening the source link instead.\n\n" +
            String(e);
        }
      }
    },

    bind() {
      // Tabs
      this.tabs.forEach(t => {
        const f = t.getAttribute("data-r");
        t.addEventListener("click", () => this.setFilter(f));
        t.addEventListener("touchend", (e) => { e.preventDefault(); this.setFilter(f); }, { passive: false });
      });

      // Toggle open/close
      if (this.toggleBtn) {
        this.toggleBtn.addEventListener("click", () => this.setOpen(!this.isOpen));
        this.toggleBtn.addEventListener("touchend", (e) => {
          e.preventDefault();
          this.setOpen(!this.isOpen);
        }, { passive: false });
      }
    },

    async init() {
      this.bind();
      await this.load();
      this.setOpen(false);      // default closed (clean)
      this.setFilter("all");    // default filter
    }
  };

  /* =========================================================
     6) Bio Modal
  ========================================================= */
  const BIO = {
    modal: $("#bio-modal"),
    openBtn: $("#tab-bio"),
    closeBtn: $(".bio-close"),
    backdrop: $(".bio-backdrop"),
    expoToggle: $("#expoToggle"),
    expoSlide: $("#expoSlide"),
    bioLangBtns: $$(".bio-lang .lang"),
    activeBioLang: "kr",

    open() {
      if (!this.modal) return;
      this.modal.hidden = false;

      // default: follow site language where possible
      if (LANG.mode === "english") this.setLang("en");
      else this.setLang("kr");
    },

    close() {
      if (!this.modal) return;
      this.modal.hidden = true;
    },

    toggleExpo() {
      if (!this.expoSlide || !this.expoToggle) return;
      const isOpen = this.expoSlide.getAttribute("data-open") === "true";
      this.expoSlide.setAttribute("data-open", isOpen ? "false" : "true");
      this.expoToggle.setAttribute("aria-expanded", isOpen ? "false" : "true");
    },

    setLang(lang) {
      const l = (lang === "en") ? "en" : "kr";
      this.activeBioLang = l;

      // show/hide within modal only
      $$(".bio-card .bio-body.ko").forEach(el => el.style.display = (l === "kr") ? "" : "none");
      $$(".bio-card .bio-body.en").forEach(el => el.style.display = (l === "en") ? "" : "none");

      // Also keep the expo kicker line correct:
      // - Kicker has both spans; it will be hidden by site lang in CSS,
      //   but in modal we force the corresponding body only; keep spans unchanged.

      // active button
      this.bioLangBtns.forEach(b => b.classList.remove("active"));
      const active = this.bioLangBtns.find(b => b.getAttribute("data-bio-lang") === l);
      if (active) active.classList.add("active");
    },

    bind() {
      if (this.openBtn) {
        this.openBtn.addEventListener("click", () => this.open());
        this.openBtn.addEventListener("touchend", (e) => { e.preventDefault(); this.open(); }, { passive: false });
      }
      if (this.closeBtn) this.closeBtn.addEventListener("click", () => this.close());
      if (this.backdrop) this.backdrop.addEventListener("click", () => this.close());

      // ESC close
      document.addEventListener("keydown", (e) => {
        if (!this.modal || this.modal.hidden) return;
        if (e.key === "Escape") this.close();
      });

      // Expo slide
      if (this.expoToggle) {
        this.expoToggle.addEventListener("click", () => this.toggleExpo());
        this.expoToggle.addEventListener("touchend", (e) => { e.preventDefault(); this.toggleExpo(); }, { passive: false });
      }

      // Modal language buttons
      this.bioLangBtns.forEach(btn => {
        const l = btn.getAttribute("data-bio-lang");
        btn.addEventListener("click", () => this.setLang(l));
        btn.addEventListener("touchend", (e) => { e.preventDefault(); this.setLang(l); }, { passive: false });
      });
    }
  };

  /* =========================================================
     7) Waves Canvas (Refined + light)
     - stops on reduced motion
  ========================================================= */
  const WAVES = {
    canvas: $("#waves"),
    ctx: null,
    w: 0,
    h: 0,
    t: 0,
    raf: 0,

    resize() {
      if (!this.canvas) return;
      const dpr = Math.min(window.devicePixelRatio || 1, 2);
      this.w = Math.floor(window.innerWidth * dpr);
      this.h = Math.floor(window.innerHeight * dpr);
      this.canvas.width = this.w;
      this.canvas.height = this.h;
      this.canvas.style.width = "100%";
      this.canvas.style.height = "100%";
      this.ctx = this.canvas.getContext("2d", { alpha: true });
      if (this.ctx) this.ctx.setTransform(1,0,0,1,0,0);
    },

    draw() {
      if (!this.ctx) return;
      const ctx = this.ctx;
      const w = this.w, h = this.h;
      this.t += 0.006;

      ctx.clearRect(0, 0, w, h);

      // Subtle strokes (no heavy glow; CSS handles blend)
      // We intentionally keep it lightweight and non-bloomy.
      const layers = 3;
      for (let L = 0; L < layers; L++) {
        const amp = (0.018 + L * 0.012) * h;
        const baseY = (0.18 + L * 0.22) * h;
        const freq = 1.2 + L * 0.7;

        ctx.beginPath();
        for (let x = 0; x <= w; x += 18) {
          const nx = x / w;
          const y =
            baseY +
            Math.sin((nx * Math.PI * 2) * freq + this.t * (1.4 + L * 0.25)) * amp +
            Math.sin((nx * Math.PI * 2) * (freq * 0.55) - this.t * (1.1 + L * 0.18)) * (amp * 0.45);

          if (x === 0) ctx.moveTo(x, y);
          else ctx.lineTo(x, y);
        }

        ctx.lineWidth = 1.1 + L * 0.45;
        ctx.strokeStyle = `rgba(170,205,255,${0.10 - L*0.02})`;
        ctx.stroke();
      }

      // Soft dawn tint points (very sparse)
      ctx.fillStyle = "rgba(230,199,119,0.06)";
      for (let i=0;i<10;i++){
        const x = (Math.sin(this.t*0.7 + i)*0.5 + 0.5) * w;
        const y = (Math.cos(this.t*0.55 + i*1.7)*0.5 + 0.5) * h;
        ctx.beginPath();
        ctx.arc(x, y, 2.2, 0, Math.PI*2);
        ctx.fill();
      }

      this.raf = requestAnimationFrame(() => this.draw());
    },

    start() {
      if (!this.canvas) return;
      if (prefersReducedMotion()) return;
      this.resize();
      cancelAnimationFrame(this.raf);
      this.draw();
    },

    stop() {
      cancelAnimationFrame(this.raf);
      this.raf = 0;
      if (this.ctx) this.ctx.clearRect(0,0,this.w,this.h);
    }
  };

  /* =========================================================
     8) Sound (Cosmic Resonance Â· meditation)
     - Buttons: #soundBtn (toggle on), #soundStopBtn (stop)
     - FFT bar: #fftBar span (level)
  ========================================================= */
  const SOUND = {
    ctx: null,
    master: null,
    analyser: null,
    data: null,
    isOn: false,
    key: "LF_SOUND_V2",
    raf: 0,

    btnOn: $("#soundBtn"),
    btnOff: $("#soundStopBtn"),
    bar: $("#fftBar span"),

    init() {
      if (this.ctx) return;
      const Ctx = window.AudioContext || window.webkitAudioContext;
      if (!Ctx) return;

      this.ctx = new Ctx();
      this.master = this.ctx.createGain();
      this.master.gain.value = 0.0;

      // analyser for bar
      this.analyser = this.ctx.createAnalyser();
      this.analyser.fftSize = 256;
      this.data = new Uint8Array(this.analyser.frequencyBinCount);

      // soft filter to avoid harshness
      const lp = this.ctx.createBiquadFilter();
      lp.type = "lowpass";
      lp.frequency.value = 3800;
      lp.Q.value = 0.55;

      this.master.connect(lp);
      lp.connect(this.analyser);
      this.analyser.connect(this.ctx.destination);

      // build pad + air + pulse
      this.buildLayers();

      // iOS resume guard
      const resumeOnce = async () => {
        if (!this.ctx) return;
        try { await this.ctx.resume(); } catch(e) {}
        window.removeEventListener("touchstart", resumeOnce);
        window.removeEventListener("click", resumeOnce);
      };
      window.addEventListener("touchstart", resumeOnce, { passive: true });
      window.addEventListener("click", resumeOnce, { passive: true });
    },

    buildLayers() {
      const t0 = this.ctx.currentTime;

      // Stable harmonic pad (low fatigue)
      const freqs = [55, 82.5, 110, 165]; // 1, 3/2, 2, 3
      freqs.forEach((f, i) => {
        const o1 = this.ctx.createOscillator();
        const o2 = this.ctx.createOscillator();
        const g  = this.ctx.createGain();

        o1.type = "sine";
        o2.type = "triangle";

        o1.frequency.value = f;
        o2.frequency.value = f;
        o1.detune.value = (i % 2 === 0) ? -7 : 6;
        o2.detune.value = (i % 2 === 0) ? 9 : -8;

        g.gain.value = 0.0;

        o1.connect(g);
        o2.connect(g);
        g.connect(this.master);

        o1.start(t0);
        o2.start(t0);

        const base = 0.020 / (1 + i*0.75);
        g.gain.setValueAtTime(0.0, t0);
        g.gain.linearRampToValueAtTime(base, t0 + 6.0 + i*1.1);
      });

      // Air noise (bandpass + slow breathe)
      const bufferSize = 2 * this.ctx.sampleRate;
      const buffer = this.ctx.createBuffer(1, bufferSize, this.ctx.sampleRate);
      const data = buffer.getChannelData(0);
      for (let i = 0; i < bufferSize; i++) data[i] = (Math.random()*2-1) * 0.25;

      const src = this.ctx.createBufferSource();
      src.buffer = buffer;
      src.loop = true;

      const bp = this.ctx.createBiquadFilter();
      bp.type = "bandpass";
      bp.frequency.value = 420;
      bp.Q.value = 0.9;

      const ng = this.ctx.createGain();
      ng.gain.value = 0.0;

      src.connect(bp);
      bp.connect(ng);
      ng.connect(this.master);
      src.start(t0);

      // breathe loop
      const breathe = () => {
        if (!this.ctx) return;
        const t = this.ctx.currentTime;
        ng.gain.cancelScheduledValues(t);
        ng.gain.setValueAtTime(ng.gain.value, t);
        ng.gain.linearRampToValueAtTime(0.012, t + 5.4);
        ng.gain.linearRampToValueAtTime(0.004, t + 10.8);

        bp.frequency.cancelScheduledValues(t);
        bp.frequency.setValueAtTime(bp.frequency.value, t);
        bp.frequency.linearRampToValueAtTime(360 + Math.random()*220, t + 10.8);

        setTimeout(breathe, 10800);
      };
      setTimeout(breathe, 900);

      // Deep pulse (distant beacon)
      const po = this.ctx.createOscillator();
      po.type = "sine";
      po.frequency.value = 36;

      const pg = this.ctx.createGain();
      pg.gain.value = 0.0;

      const plp = this.ctx.createBiquadFilter();
      plp.type = "lowpass";
      plp.frequency.value = 220;
      plp.Q.value = 0.7;

      po.connect(plp);
      plp.connect(pg);
      pg.connect(this.master);
      po.start(t0);

      const pulse = () => {
        if (!this.ctx) return;
        const t = this.ctx.currentTime;
        pg.gain.cancelScheduledValues(t);
        pg.gain.setValueAtTime(0.0, t);
        pg.gain.linearRampToValueAtTime(0.020, t + 0.14);
        pg.gain.exponentialRampToValueAtTime(0.0001, t + 1.8);
        setTimeout(pulse, (5.8 + Math.random()*2.6) * 1000);
      };
      setTimeout(pulse, 1200);
    },

    reflectUI() {
      if (this.btnOn)  this.btnOn.classList.toggle("active", this.isOn);
      if (this.btnOff) this.btnOff.disabled = !this.isOn;
    },

    async on() {
      this.init();
      if (!this.ctx) return;

      try { await this.ctx.resume(); } catch(e) {}

      const t = this.ctx.currentTime;
      this.master.gain.cancelScheduledValues(t);
      this.master.gain.setValueAtTime(this.master.gain.value, t);
      this.master.gain.linearRampToValueAtTime(0.78, t + 4.2);

      this.isOn = true;
      this.reflectUI();
      this.startBar();

      try { localStorage.setItem(this.key, "ON"); } catch(e) {}
    },

    off() {
      if (!this.ctx) {
        this.isOn = false;
        this.reflectUI();
        try { localStorage.setItem(this.key, "OFF"); } catch(e) {}
        return;
      }

      const t = this.ctx.currentTime;
      this.master.gain.cancelScheduledValues(t);
      this.master.gain.setValueAtTime(this.master.gain.value, t);
      this.master.gain.linearRampToValueAtTime(0.0, t + 1.6);

      this.isOn = false;
      this.reflectUI();
      this.stopBar();

      try { localStorage.setItem(this.key, "OFF"); } catch(e) {}
    },

    async toggle() {
      if (this.isOn) this.off();
      else await this.on();
    },

    restore() {
      let saved = null;
      try { saved = localStorage.getItem(this.key); } catch(e) {}
      if (saved === "ON") this.on();
      else this.off();
    },

    startBar() {
      if (!this.analyser || !this.bar) return;
      cancelAnimationFrame(this.raf);

      const tick = () => {
        if (!this.analyser || !this.data || !this.bar) return;
        this.analyser.getByteFrequencyData(this.data);
        // average low bins (soft)
        let sum = 0;
        const n = Math.min(24, this.data.length);
        for (let i=0;i<n;i++) sum += this.data[i];
        const avg = sum / n / 255; // 0..1
        const w = Math.round(clamp(avg * 180, 0, 180));
        this.bar.style.width = w + "px";
        this.raf = requestAnimationFrame(tick);
      };
      tick();
    },

    stopBar() {
      cancelAnimationFrame(this.raf);
      this.raf = 0;
      if (this.bar) this.bar.style.width = "0px";
    },

    bind() {
      if (this.btnOn) {
        this.btnOn.addEventListener("click", () => this.toggle());
        this.btnOn.addEventListener("touchend", (e) => { e.preventDefault(); this.toggle(); }, { passive: false });
      }
      if (this.btnOff) {
        this.btnOff.addEventListener("click", () => this.off());
        this.btnOff.addEventListener("touchend", (e) => { e.preventDefault(); this.off(); }, { passive: false });
      }
    }
  };

  /* =========================================================
     9) Init order (stable)
  ========================================================= */
  async function init() {
    // 1) language
    LANG.restore();
    bindLanguageButtons();

    // 2) nav
    NAV.init();
    NAV.go("poem", { scroll: false });

    // 3) waves
    if ($("#waves") && !prefersReducedMotion()) WAVES.start();
    window.addEventListener("resize", () => {
      if (prefersReducedMotion()) return;
      WAVES.resize();
    });

    // 4) works + lightbox
    LIGHTBOX.bind();
    await WORKS.init();

    // 5) reports
    await REPORTS.init();

    // 6) bio
    BIO.bind();

    // 7) sound
    SOUND.bind();
    SOUND.restore();

    // Re-render text-dependent areas on language change
    window.addEventListener("lf:lang", () => {
      // Works: refresh current panel titles/meta language
      WORKS.renderPanel(WORKS.currentPanelKey);
      // Reports: re-render titles/summaries split
      REPORTS.render();
      // Bio default content shown remains controlled by modal buttons; do not overwrite user choice
    });

    // When switching sections via NAV, ensure layout refresh
    window.addEventListener("lf:section", (e) => {
      const t = e.detail?.target;
      if (t === "works") {
        // ensure current panel exists
        WORKS.renderPanel(WORKS.currentPanelKey);
      }
      if (t === "reports") {
        // keep closed by default; user opens toggle
        // but if already open, ensure grid visible
        if (REPORTS.isOpen) REPORTS.setOpen(true);
      }
    });

    // Reduced motion: stop waves
    if (prefersReducedMotion()) WAVES.stop();
  }

  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", init);
  } else {
    init();
  }
})();
</script>