<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>ë“±ì‘ ç‡ˆé…Œ DUNGZAK CESTLAVIE â€” Lightflow Î©.7.1</title>
<meta name="description" content="ë¹› Â· ê¸°ì–µ Â· ì¡´ì¬ â€” DUNGZAK CESTLAVIE Â· Lightflow Î©.7.1 Â· Gallery Â· Aesthetic Reports (DCAR)" />
<meta property="og:title" content="DUNGZAK CESTLAVIE â€” Lightflow Î©.7.1" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://dungzak.art" />
<meta name="theme-color" content="#070c1a" />
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='86'>âœ¨</text></svg>">

<style>
:root{
  --bg:#070c1a; --fg:#eaf0ff; --gold:#e6c777; --muted:#a8b7e8;
  --panel:#0f1630; --line:#1b2652; --max:1180px;
}
*{box-sizing:border-box;margin:0;padding:0}
html{scroll-behavior:smooth}
body{
  background:#070c1a;color:var(--fg);
  font:16px/1.65 system-ui,-apple-system,Segoe UI,Roboto,'Noto Sans KR',sans-serif;
  overscroll-behavior-y:none; overflow-x:hidden;
}

/* canvases */
#waves,#trail{position:fixed;inset:0;pointer-events:none}
#waves{z-index:0;opacity:.48}
#trail{z-index:1;opacity:.70;mix-blend-mode:screen}

/* header (sticky) */
header{
  position:sticky;top:0;z-index:5;
  padding:10px 12px; background:rgba(9,14,30,.85);
  border-bottom:1px solid rgba(255,255,255,.08); backdrop-filter:blur(12px)
}
.brand{font-weight:900;color:var(--gold);text-align:center;font-size:clamp(16px,5vw,22px)}
nav.primary{display:flex;gap:10px;justify-content:center;margin-top:8px;flex-wrap:wrap}
nav.primary button{all:unset;cursor:pointer;color:var(--fg);font-weight:700;padding:6px 12px;border-radius:10px}
nav.primary button:hover,nav.primary button.active{background:linear-gradient(180deg,#f7e4a5,#e6c777);color:#0a1230}
.lang{display:flex;gap:8px;justify-content:center;margin-top:8px}
.lang button{all:unset;cursor:pointer;border:1px solid #2a335f;border-radius:8px;padding:5px 10px;color:#cfe0ff}
.lang button.active,.lang button:hover{background:#1a2144;color:var(--gold);border-color:#3a447a}

/* sections */
main{position:relative;z-index:2}
section{max-width:var(--max);margin:auto;padding:72px 16px}
h1,h2{color:var(--gold)}
h2{margin-bottom:12px}
.sub{color:var(--muted)}

/* hero / poem */
.hero{text-align:center;min-height:68vh}
.hero h1{font-size:clamp(34px,6vw,64px);margin-bottom:8px}
.hero p{opacity:.9;margin-bottom:18px}
.poemwrap{max-width:860px;margin:0 auto;text-align:left;background:rgba(16,22,48,.35);border:1px solid #223;border-radius:12px;padding:14px}
.poem p{margin:8px 0}

/* works */
.tabs{display:flex;gap:8px;flex-wrap:wrap;justify-content:center;margin:10px 0 16px}
.tab{padding:8px 12px;border-radius:18px;border:1px solid var(--line);background:#0f1838;color:#bbcaf8;cursor:pointer;font-size:.92rem;white-space:nowrap}
.tab.active{background:linear-gradient(180deg,var(--gold),#f0df9e);color:#0a1230;border-color:#d9c16a}
.tabpanel{display:none;animation:fade .28s ease}
.tabpanel.active{display:block}
@keyframes fade{from{opacity:0}to{opacity:1}}

.grid{display:grid;gap:10px;grid-template-columns:repeat(2,1fr)}
@media(min-width:1024px){.grid{grid-template-columns:repeat(4,1fr)}}
.card{background:var(--panel);border:1px solid var(--line);border-radius:10px;overflow:hidden;opacity:0;transform:translateY(8px);transition:opacity .55s,transform .55s,box-shadow .6s}
.card.visible{opacity:1;transform:translateY(0)}
.card:hover{box-shadow:0 0 16px rgba(230,199,119,.28);border-color:var(--gold)}
.card img{width:100%;aspect-ratio:1/1;object-fit:cover;display:block;filter:brightness(1.02)}
.card .caption{display:none} /* WorksëŠ” ì´ë¯¸ì§€ ì „ìš© */

.note{margin-top:6px;text-align:center;color:#aecdff;opacity:.85}

/* reports (accordion) */
.accordion{border:1px solid #2a3a78;border-radius:12px;overflow:hidden}
.accordion-item{border-bottom:1px solid #2a3a78}
.accordion-header{background:#0f1838;color:var(--gold);padding:14px 16px;cursor:pointer;font-weight:700}
.accordion-content{display:none;background:#0b1020;padding:12px 16px;color:#cfe0ff}
.accordion-item.active .accordion-content{display:block}

/* footer central links */
footer{border-top:1px solid rgba(255,255,255,.08);background:#0a1024;text-align:center;padding:44px 12px 96px}
.links{display:flex;gap:18px;flex-wrap:wrap;justify-content:center;margin-bottom:10px}
.links a{color:#cfe0ff;text-decoration:none}
.links a:hover{color:#cbe0ff}
small{display:block;margin-top:6px;color:#9fb0d8}

/* center bottom resonance + tiny fft bar */
#ctrl{position:fixed;left:50%;transform:translateX(-50%);bottom:calc(60px + env(safe-area-inset-bottom));display:flex;gap:8px;z-index:8}
.ctrlbtn{width:36px;height:36px;border-radius:50%;border:1px solid rgba(230,199,119,.35);background:rgba(12,19,48,.45);color:#fff;cursor:pointer;box-shadow:0 0 8px rgba(120,170,255,.18)}
.ctrlbtn[disabled]{opacity:.45;cursor:not-allowed}
#fftBar{position:fixed;left:50%;transform:translateX(-50%);bottom:calc(102px + env(safe-area-inset-bottom));width:180px;height:6px;border-radius:6px;background:linear-gradient(90deg,#9fc6ff22,#f3c96955);overflow:hidden}
#fftBar span{display:block;height:100%;width:0;background:linear-gradient(90deg,#b7d4ff,#f6d98c);opacity:.9}

/* language visibility */
.en,.ko{display:none}
body.korean .ko{display:initial}
body.english .en{display:initial}
body.hybrid .ko,body.hybrid .en{display:initial}

/* motion reduce */
@media(prefers-reduced-motion:reduce){#waves,#trail{display:none}}
</style>
</head>

<body class="korean">
<!-- cosmic canvases -->
<canvas id="waves" aria-hidden="true"></canvas>
<canvas id="trail" aria-hidden="true"></canvas>

<header>
  <div class="brand">ë“±ì‘ ç‡ˆé…Œ DUNGZAK CESTLAVIE Â· Lightflow Î©.7.1</div>
  <nav class="primary" aria-label="Primary">
    <button data-target="poem" class="active">Poem</button>
    <button data-target="works">Works</button>
    <button data-target="reports">Reports</button>
  </nav>
  <div class="lang" aria-label="Language">
    <button id="koBtn" class="active">KR</button>
    <button id="enBtn">EN</button>
    <button id="hyBtn">KR+EN</button>
  </div>
</header>

<main>
  <!-- Poem -->
  <section id="poem" class="hero">
    <div>
      <h1 class="ko">ë¹› Â· ê¸°ì–µ Â· ì¡´ì¬</h1>
      <h1 class="en">Light Â· Memory Â· Being</h1>
      <p class="ko">ë“±ì‘ê³¼ ë£¨ë©”ë¼ì˜ ì§€íœ˜ë¡œ â€” ë“±ì‘ DUNGZAK CESTLAVIE</p>
      <p class="en">Conducted by DUNGZAK and Lumera â€” DUNGZAK CESTLAVIE</p>

      <div class="poemwrap">
        <!-- ì œëª©/ì‘ê°€ -->
        <p class="ko" style="font-weight:700">ã€ˆíŒŒë¦¬ì˜ ì„¼ëŠê°•ã€‰</p>
        <p class="en" style="font-weight:700">ã€ˆThe Seine of Parisã€‰</p>
        <p class="ko" style="opacity:.85;margin-top:4px">ë“±ì‘ ç‡ˆé…Œ DUNGZAK CESTLAVIE</p>
        <p class="en" style="opacity:.85;margin-top:4px">DUNGZAK CESTLAVIE</p>

        <!-- ë³¸ë¬¸ â€” í•œì˜ 1:1 -->
        <div class="poem">
          <p class="ko">ì„¼ëŠê°• ë‹¤ë¦¬ ì•„ë˜, ë…¸íŠ¸ë¥´ë‹´ ì„±ë‹¹ì˜ ì´›ë¶ˆì´ ì¼œì§ˆ ë¬´ë µâ€”</p>
          <p class="en">Beneath the bridge of the Seine, as the candles of Notre-Dame begin to glowâ€”</p>

          <p class="ko">ì†Œë°•í•œ ê¿ˆë“¤ì„ ì•ˆê³  ì‚¬ëŠ” ì‚¬ëŒë“¤ì´ ëª¨ì—¬ ì¶¤ì¶˜ë‹¤.</p>
          <p class="en">People who live with humble dreams gather to dance.</p>

          <p class="ko">ë¹™ê¸€ë¹™ê¸€ ëŒì•„ê°€ë©° ë‚´ë”›ëŠ” ë°œê±¸ìŒì˜ í™”ìŒ ìœ„ë¡œ,</p>
          <p class="en">Their circling steps form harmonies upon the rhythm of their feet,</p>

          <p class="ko">ë°”ì´ì˜¬ë¦°ì´ ìƒˆíŒŒë—ê³  ìƒ›ë…¸ë‘ì˜ ë¹›ì„ í©ë¿Œë¦¬ë©° ì›ƒëŠ”ë‹¤.</p>
          <p class="en">As violins scatter blue and golden light, laughing in brilliance.</p>

          <p class="ko">ê¿ˆê¾¸ëŠ” ì—¬ì¸ë“¤ê³¼ ê¿ˆê¾¸ëŠ” ë‚¨ì„±ë“¤ì´ ì†ì„ ì¡ê³ ,</p>
          <p class="en">Dreaming women and dreaming men clasp hands,</p>

          <p class="ko">ì‚¬ëŒì˜ í–¥ê¸°ë¥¼ ë§¡ìœ¼ë©° ì¬ë¹ ë¥¸ ìŒë¥ ì— ëª¸ì„ ë§¡ê¸´ë‹¤.</p>
          <p class="en">Breathing the scent of humanity, surrendering to the swift rhythm.</p>

          <p class="ko">ì•„ë‹´ê³¼ ì´ë¸Œì˜ ë³„ìêµ­ì´ ëˆˆë¬¼ë°©ìš¸ì²˜ëŸ¼ í˜ëŸ¬ë‚´ë¦¬ëŠ” ë‚˜ë¬´,</p>
          <p class="en">A tree where Adam and Eveâ€™s star-traces drip like tears,</p>

          <p class="ko">ê·¸ í’ê²½ ì†ì—ì„œ ì´ˆìŠ¹ë‹¬ì€ ì–´ì—¬ìœ í•˜ì–€ ë¯¸ì†Œë¥¼ í˜ë¦°ë‹¤.</p>
          <p class="en">In that scene, the crescent moon releases a tender white smile.</p>

          <p class="ko">ìƒ¤ë½, ìƒ¤ë½â€” ì¶¤ì‚¬ìœ„ì˜ ë¦¬ë“¬ì´ í™•ì¥ë ìˆ˜ë¡,</p>
          <p class="en">Sharak, sharakâ€” as the rhythm of dance expands,</p>

          <p class="ko">êµ¬ê²½í•˜ë˜ ì´ë“¤ë§ˆì € ì–´ê¹¨ì™€ í—ˆë¦¬ë¥¼ ë“¤ì©ì´ë©°,</p>
          <p class="en">Even the onlookers begin to sway their shoulders and waists,</p>

          <p class="ko">ì‚¬ë‘ì˜ ì…ë§ì¶¤ì„ ì˜ì‹í•œë‹¤.</p>
          <p class="en">Becoming aware of loveâ€™s gentle kiss.</p>

          <p class="ko">í˜ëŸ¬ê° ì†ì— í¬ê°œì§„ ìˆœê°„,</p>
          <p class="en">Within the flowing overlap of time,</p>

          <p class="ko">ê·¸ë“¤ì€ ì˜í˜¼ì˜ ë°•ì œê°€ ë˜ì–´,</p>
          <p class="en">They become taxidermies of the soul,</p>

          <p class="ko">ë©ˆì¶¤ ì†ì— ì˜ì›ì„ ìƒˆê¸´ë‹¤.</p>
          <p class="en">Inscribing eternity into stillness.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Works (ì´ë¯¸ì§€ ì „ìš© ê·¸ë¦¬ë“œ) -->
  <section id="works" style="display:none">
    <h2>Artworks â€” ì‘í’ˆ ì•„ì¹´ì´ë¸Œ</h2>
    <div class="tabs" role="tablist" aria-label="Art Sections">
      <button class="tab active" data-panel="pray">â…  ìš°ë¦¬ë¥¼ ìœ„í•´ ê¸°ë„í•´ ì£¼ì„¸ìš” Â· Pray for Us</button>
      <button class="tab" data-panel="human">â…¡ ì¸ê°„ Â· Human Being</button>
      <button class="tab" data-panel="rebirth">â…¢ ì •ì‹ ì˜ ì¬íƒ„ìƒ Â· Rebirth of Mind</button>
      <button class="tab" data-panel="exist">â…£ ì¡´ì¬ì˜ íšŒë³µ Â· Restoration of Being</button>
      <button class="tab" data-panel="cosmos">â…¤ ë¹›ì˜ ì´ˆì˜ì‹ Â· Metaconsciousness of Light</button>
    </div>
    <div id="panel-pray" class="tabpanel active"></div>
    <div id="panel-human" class="tabpanel"></div>
    <div id="panel-rebirth" class="tabpanel"></div>
    <div id="panel-exist" class="tabpanel"></div>
    <div id="panel-cosmos" class="tabpanel"></div>
    <p class="note">â€» ì´ë¯¸ì§€ë¥¼ <code>works/{ì„¹ì…˜í‚¤}/{ë²ˆí˜¸}.jpg</code>ë¡œ ì˜¬ë¦¬ë©´ ìë™ í‘œì‹œë©ë‹ˆë‹¤. (ì˜ˆ: <code>works/pray/1.jpg</code>)</p>
  </section>

  <!-- Reports (DCAR 01â€“08 ì „ë¶€) -->
  <section id="reports" style="display:none">
    <h2>ë¯¸í•™ ë³´ê³ ì„œ Â· Aesthetic Reports (DCAR Series)</h2>
    <div id="dcarAcc" class="accordion">
      <div class="accordion-item">
        <div class="accordion-header">DCAR-01-2025 Â· ì¡´ì¬ì˜ íšŒë³µ Â· The Restoration of Being</div>
        <div class="accordion-content">
          <p class="ko">ì¡´ì¬ì˜ íšŒë³µê³¼ ê°ê°ì˜ ìœ¤ë¦¬.</p>
          <p class="en">Restoration of being and the ethics of sensation.</p>
        </div>
      </div>
      <div class="accordion-item">
        <div class="accordion-header">DCAR-02-2025 Â· ê¸°ì–µì˜ ìœ¤ë¦¬ Â· The Ethics of Memory</div>
        <div class="accordion-content">
          <p class="ko">ê¸°ì–µì˜ êµ¬ì„±ê³¼ ê³µì¡´ì˜ ì±…ì„.</p>
          <p class="en">Construction of memory and responsibility for coexistence.</p>
        </div>
      </div>
      <div class="accordion-item">
        <div class="accordion-header">DCAR-03-2025 Â· ì •ì‹ ì˜ ì¬íƒ„ìƒ Â· The Rebirth of Mind</div>
        <div class="accordion-content">
          <p class="ko">ì§€ê°ì˜ ì§„í™”ì™€ ì˜ì‹ì˜ í™•ì¥.</p>
          <p class="en">Evolution of perception and broadening consciousness.</p>
        </div>
      </div>
      <div class="accordion-item">
        <div class="accordion-header">DCAR-04-2025 Â· ë¹›ì˜ ìƒí” Â· The Scars of Light</div>
        <div class="accordion-content">
          <p class="ko">ìƒí”ì˜ ë¯¸í•™ê³¼ ì¡´ì—„.</p>
          <p class="en">Aesthetics and dignity of scars.</p>
        </div>
      </div>
      <div class="accordion-item">
        <div class="accordion-header">DCAR-05-2025 Â· ê³µì¡´ì˜ ê¸°ì–µ Â· Memory for Coexistence</div>
        <div class="accordion-content">
          <p class="ko">ê³µëª…ê³¼ ì—°ëŒ€ì˜ ê¸°ì–µ ì¥ì¹˜.</p>
          <p class="en">Mnemonics of resonance and solidarity.</p>
        </div>
      </div>
      <div class="accordion-item">
        <div class="accordion-header">DCAR-06-2025 Â· ê°ê°ì˜ ìœ¤ë¬´ Â· The Round of Senses</div>
        <div class="accordion-content">
          <p class="ko">ê°ê°ì˜ íšŒë¡œì™€ ì‹ ì„±í•œ ë°˜ë³µ.</p>
          <p class="en">Circuits of senses and sacred repetition.</p>
        </div>
      </div>
      <div class="accordion-item">
        <div class="accordion-header">DCAR-07-2025 Â· ë¹›ì˜ ê¸°ë„ Â· The Prayer of Light</div>
        <div class="accordion-content">
          <p class="ko">ì €ì£¼íŒŒ ê³µëª…ê³¼ ë‚´ì  í‰ì˜¨.</p>
          <p class="en">Low-frequency resonance and inner calm.</p>
        </div>
      </div>
      <div class="accordion-item">
        <div class="accordion-header">DCAR-08-2025 Â· ì´ˆì˜ì‹ì˜ ì¥ Â· The Field of Metaconsciousness</div>
        <div class="accordion-content">
          <p class="ko">ì´ˆì˜ì‹ì  ê³µì¡´ì„ í–¥í•œ ì„œì‚¬.</p>
          <p class="en">Narratives toward metaconscious coexistence.</p>
        </div>
      </div>
    </div>
  </section>
</main>

<!-- center bottom resonance + tiny fft -->
<div id="fftBar" aria-hidden="true"><span></span></div>
<div id="ctrl" aria-label="Prayer Resonance controls">
  <button class="ctrlbtn" id="soundBtn" title="Play Prayer Resonance">âœ¨</button>
  <button class="ctrlbtn" id="soundStopBtn" title="Stop" disabled>ğŸ”‡</button>
</div>

<footer>
  <div class="links">
    <a href="https://flickr.com/photos/dungzak" target="_blank" rel="noopener">ğŸ“¸ Flickr</a>
    <a href="https://instagram.com/dungzakcestlavie" target="_blank" rel="noopener">ğŸ“· Instagram</a>
    <a href="https://youtube.com/@dungzakcestlavie" target="_blank" rel="noopener">â–¶ï¸ YouTube</a>
    <a href="https://naver.me/x95dk3l1" target="_blank" rel="noopener">ğŸ§­ Naver Info</a>
    <a href="mailto:dungzakcestlavie@gmail.com">âœ‰ï¸ Email</a>
  </div>
  <small class="ko">Â© 2025 ë“±ì‘ ç‡ˆé…Œ DUNGZAK CESTLAVIE Â· ë“±ì‘ê³¼ ë£¨ë©”ë¼ì˜ ì§€íœ˜ë¡œ</small>
  <small class="en">Â© 2025 DUNGZAK CESTLAVIE Â· Conducted by DUNGZAK & Lumera</small>
</footer>

<script>
/* =======================
   Lightflow Î©.7.1 â€” Core
   ======================= */
(function(){
  const $ = (s,sc)=> (sc||document).querySelector(s);
  const $$ = (s,sc)=> Array.from((sc||document).querySelectorAll(s));
  const store={get(k,def){try{const v=localStorage.getItem(k);return v?JSON.parse(v):def}catch{return def}},set(k,v){try{localStorage.setItem(k,JSON.stringify(v))}catch{}}};

  /* Section switching */
  function showSection(id){
    ['poem','works','reports'].forEach(x=>{ const el = document.getElementById(x); el.style.display = (x===id)?'block':'none'; });
    $$('nav.primary button').forEach(b=>b.classList.toggle('active', b.dataset.target===id));
  }
  $$('nav.primary button').forEach(b=> b.addEventListener('click', ()=> showSection(b.dataset.target)));
  showSection('poem');

  /* Language */
  const koBtn=$('#koBtn'), enBtn=$('#enBtn'), hyBtn=$('#hyBtn');
  function setLang(lang){
    document.body.classList.remove('korean','english','hybrid');
    if(lang==='ko') document.body.classList.add('korean');
    else if(lang==='en') document.body.classList.add('english');
    else document.body.classList.add('hybrid');
    [koBtn,enBtn,hyBtn].forEach(b=>b.classList.remove('active'));
    ({ko:koBtn,en:enBtn,hy:hyBtn}[lang]).classList.add('active');
    store.set('dz_lang',lang);
  }
  koBtn.onclick=()=>setLang('ko'); enBtn.onclick=()=>setLang('en'); hyBtn.onclick=()=>setLang('hy');
  setLang(store.get('dz_lang','ko'));

  /* Background: 30s hue cycle + finger-follow glow */
  try{
    const waves = $('#waves').getContext('2d',{alpha:true});
    const trail = $('#trail').getContext('2d',{alpha:true});
    let DPR=1,W=0,H=0,visible=true;
    let t0=performance.now(), px=innerWidth/2, py=innerHeight/2, tx=px, ty=py;

    function resize(){
      DPR=Math.max(1,Math.min(2,devicePixelRatio||1));
      W=waves.canvas.width = Math.floor(innerWidth*DPR);
      H=waves.canvas.height= Math.floor(innerHeight*DPR);
      trail.canvas.width=W; trail.canvas.height=H;
      waves.setTransform(1,0,0,1,0,0); trail.setTransform(1,0,0,1,0,0);
      waves.scale(1/DPR,1/DPR); trail.scale(1/DPR,1/DPR);
    }
    resize(); addEventListener('resize',resize,{passive:true});
    document.addEventListener('visibilitychange',()=>visible=!document.hidden);

    addEventListener('mousemove',e=>{tx=e.clientX;ty=e.clientY},{passive:true});
    addEventListener('touchmove',e=>{const p=e.touches[0];tx=p.clientX;ty=p.clientY},{passive:true});

    const ease = x=>x*x*(3-2*x);
    const waveY=(x,k,t)=>{
      const f1=0.0030+k*0.0007, f2=0.0060+k*0.0006;
      const a1=26+k*12, a2=14+k*8;
      const drift=t*(0.75+k*0.15);
      const base=innerHeight*0.30 + k*108 + Math.sin(t*0.5+k)*12;
      const curve = 0.9 + ease(x/innerWidth)*0.2;
      return base + Math.sin(x*f1+drift*1.1+Math.sin(drift*0.7+k)*.25)*a1*curve
                  + Math.sin(x*f2+drift*.85)*a2;
    }

    function frame(now){
      if(!visible){ requestAnimationFrame(frame); return; }
      const T = (now/1000)%30;
      const seg = T/30;
      const hue = (seg<.5)? 200 + (260-200)*(seg/.5)
                 : (seg<.75)? 260 + (45-260)*((seg-.5)/.25)
                 : 45  + (200-45) * ((seg-.75)/.25);

      waves.clearRect(0,0,innerWidth,innerHeight);
      for(let k=0;k<4;k++){
        waves.beginPath();
        for(let x=0;x<=innerWidth;x+=6){
          const y = waveY(x,k,now*0.001);
          x?waves.lineTo(x,y):waves.moveTo(x,y);
        }
        const y0 = waveY(0,k,now*0.001);
        const g = waves.createLinearGradient(0,y0-140,0,y0+140);
        g.addColorStop(0,`hsla(${(hue+k*12)%360},60%,70%,.10)`);
        g.addColorStop(.5,`hsla(45,70%,68%,.30)`);
        g.addColorStop(1,`hsla(${(hue+60+k*12)%360},60%,60%,.10)`);
        waves.strokeStyle=g; waves.lineWidth=1.1+k*0.45; waves.globalAlpha=0.9-k*0.12;
        waves.shadowBlur=16; waves.shadowColor='rgba(160,200,255,.18)'; waves.stroke();
      }
      waves.globalAlpha=1; waves.shadowBlur=0;

      // finger-follow glow
      px+=(tx-px)*0.16; py+=(ty-py)*0.16;
      const speed=Math.hypot(tx-px,ty-py);
      const r=96 + Math.min(speed*160,240);
      trail.fillStyle='rgba(0,0,0,.12)'; trail.fillRect(0,0,innerWidth,innerHeight);
      const grad=trail.createRadialGradient(px,py,0,px,py,r);
      grad.addColorStop(0,`hsla(${hue},70%,68%,.22)`);
      grad.addColorStop(.55,'rgba(140,185,255,.14)');
      grad.addColorStop(1,'rgba(140,185,255,0)');
      trail.fillStyle=grad; trail.beginPath(); trail.arc(px,py,r,0,Math.PI*2); trail.fill();

      requestAnimationFrame(frame);
    }
    requestAnimationFrame(frame);
  }catch(e){console.warn('canvas init error',e)}

  /* Works: ì´ë¯¸ì§€ ì „ìš© ë Œë” + lazy */
  const SECTIONS=[
    {key:'pray',title:'Pray for Us'},
    {key:'human',title:'Human Being'},
    {key:'rebirth',title:'Rebirth of Mind'},
    {key:'exist',title:'Restoration of Being'},
    {key:'cosmos',title:'Metaconsciousness of Light'}
  ];
  function cardHTML(sec,i){
    return `<article class="card"><img loading="lazy" data-src="works/${sec}/${i}.jpg" alt="${sec} ${i}"><div class="caption"></div></article>`;
  }
  function renderPanel(key){
    const host = document.getElementById('panel-'+key);
    const N=20;
    host.innerHTML = `<div class="grid">${Array.from({length:N},(_,k)=>cardHTML(key,k+1)).join('')}</div>`;
    try{
      const io=new IntersectionObserver(es=>{
        es.forEach(e=>{
          if(e.isIntersecting){
            const img=e.target; if(img.dataset.src){img.src=img.dataset.src; img.removeAttribute('data-src');}
            img.closest('.card')?.classList.add('visible'); io.unobserve(img);
          }
        });
      },{rootMargin:'200px'});
      $$(`#panel-${key} img[loading][data-src]`).forEach(i=>io.observe(i));
    }catch{}
  }
  SECTIONS.forEach(s=>renderPanel(s.key));
  $$('.tabs .tab').forEach(b=>{
    b.addEventListener('click',()=>{
      $$('.tabs .tab').forEach(x=>x.classList.remove('active'));
      b.classList.add('active');
      $$('.tabpanel').forEach(p=>p.classList.remove('active'));
      const key=b.dataset.panel; $('#panel-'+key)?.classList.add('active');
      renderPanel(key);
      window.scrollTo({top:document.getElementById('works').offsetTop-70,behavior:'smooth'});
    });
  });

  /* Reports accordion */
  $$('#dcarAcc .accordion-header').forEach(h=>h.addEventListener('click',()=>h.parentElement.classList.toggle('active')));

  /* Prayer Resonance v3 */
  (function(){
    const btn=$('#soundBtn'), stop=$('#soundStopBtn'), bar=$('#fftBar span');
    if(!btn||!stop||!bar) return;
    let ac=null, nodes=null, on=false, analyser=null, rafId=null;

    async function ensureAC(){ if(!ac){ const C=window.AudioContext||window.webkitAudioContext; ac=new C({latencyHint:'interactive'});} if(ac.state==='suspended') await ac.resume(); return ac; }
    function G(v){const g=ac.createGain();g.gain.value=v;return g;}
    function O(type,f){const o=ac.createOscillator();o.type=type;o.frequency.value=f;return o;}

    function createIR(len=1.8,decay=2.8){
      const sr=ac.sampleRate, n=sr*len, buf=ac.createBuffer(2,n,sr);
      for(let ch=0; ch<2; ch++){
        const data=buf.getChannelData(ch);
        for(let i=0;i<n;i++){ data[i]=(Math.random()*2-1)*Math.pow(1-i/n,decay); }
      }
      return buf;
    }

    function drawFFT(){
      if(!analyser){rafId=requestAnimationFrame(drawFFT);return;}
      const arr=new Uint8Array(analyser.frequencyBinCount);
      analyser.getByteTimeDomainData(arr);
      let avg=0; for(let i=0;i<arr.length;i++){ avg+=Math.abs(arr[i]-128); } avg/=arr.length;
      const w=Math.min(180,Math.max(10,avg*2.2));
      bar.style.width=w+'px';
      rafId=requestAnimationFrame(drawFFT);
    }

    async function start(){
      if(on) return;
      await ensureAC();
      const base=G(0.12), sub=G(0.05), mid=G(0.06), shim=G(0.010);
      const pan=ac.createStereoPanner(); let panPhase=0;

      const low = O('sine',62), low2=O('sine',124), floor=O('sine',31);
      const ch1 = O('sine',432), ch2 = O('sine',528);

      const lfo1=O('sine',7.83), lfo2=O('sine',5.0);
      const lpg=G(0.08), lpg2=G(0.06);
      lfo1.connect(lpg).connect(base.gain);
      lfo2.connect(lpg2).connect(base.gain);

      const lp=ac.createBiquadFilter(); lp.type='lowpass'; lp.frequency.value=900; lp.Q.value=0.8;
      const bp=ac.createBiquadFilter(); bp.type='bandpass'; bp.frequency.value=120; bp.Q.value=0.7;

      const conv=ac.createConvolver(); conv.buffer=createIR();
      const wet=G(0.25), dry=G(0.85);

      low.connect(base).connect(bp).connect(lp);
      low2.connect(mid).connect(bp);
      floor.connect(sub).connect(bp);
      ch1.connect(shim).connect(lp);
      ch2.connect(shim).connect(lp);

      lp.connect(dry).connect(pan).connect(ac.destination);
      lp.connect(wet).connect(conv).connect(pan).connect(ac.destination);
      bp.connect(dry).connect(pan);
      bp.connect(wet).connect(conv);

      analyser=ac.createAnalyser(); analyser.fftSize=512;
      pan.connect(analyser);

      [low,low2,floor,ch1,ch2,lfo1,lfo2].forEach(o=>o.start());

      [base.gain,sub.gain,mid.gain,shim.gain].forEach(g=>{
        const t=g.value; try{g.setValueAtTime(Math.max(0.0001,t*0.001),ac.currentTime); g.exponentialRampToValueAtTime(t,ac.currentTime+1.2);}catch{}
      });

      (function panLoop(){ if(!ac||!pan) return; panPhase += 0.012; try{ pan.pan.value = Math.sin(panPhase)*0.35; }catch{} if(on) requestAnimationFrame(panLoop); })();
      (function filterBreath(){ if(!ac) return; try{ lp.frequency.setTargetAtTime(700 + Math.sin(ac.currentTime*0.3)*250, ac.currentTime, 0.3); }catch{} if(on) setTimeout(filterBreath,160); })();

      nodes={low,low2,floor,ch1,ch2,lfo1,lfo2,base,sub,mid,shim,lp,bp,conv,wet,dry,pan};
      on=true; btn.disabled=true; stop.disabled=false;
      drawFFT();
    }

    function stopAll(){
      if(!on||!nodes||!ac) return;
      const {low,low2,floor,ch1,ch2,lfo1,lfo2,base,sub,mid,shim}=nodes;
      const t=ac.currentTime;
      [base.gain,sub.gain,mid.gain,shim.gain].forEach(g=>{try{g.cancelScheduledValues(0);g.exponentialRampToValueAtTime(0.0001,t+1.8);}catch{}});
      setTimeout(()=>{[low,low2,floor,ch1,ch2,lfo1,lfo2].forEach(o=>{try{o.stop()}catch{}});},1900);
      on=false; btn.disabled=false; stop.disabled=true;
      cancelAnimationFrame(rafId); $('#fftBar span').style.width='0px';
    }

    const unlock=async()=>{try{await ensureAC()}catch{} window.removeEventListener('touchend',unlock); window.removeEventListener('click',unlock);}
    window.addEventListener('touchend',unlock,{once:true}); window.addEventListener('click',unlock,{once:true});

    btn.addEventListener('click',start);
    stop.addEventListener('click',stopAll);
    document.addEventListener('visibilitychange',async()=>{ if(!ac) return; if(document.hidden) {try{await ac.suspend()}catch{}} else if(on){try{await ac.resume()}catch{}} });
  })();

})();
</script>
</body>
</html>