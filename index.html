<!-- ===== HEAD / STYLE ===== -->
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>ë“±ì‘ ç‡ˆé…Œ DUNGZAK CESTLAVIE â€” Lightflow Î©.8.2</title>
<meta name="description" content="ë¹› Â· ê¸°ì–µ Â· ì¡´ì¬ â€” ë“±ì‘ ç‡ˆé…Œ DUNGZAK CESTLAVIE Â· Gallery Â· Aesthetic Reports (DCAR)" />
<meta property="og:title" content="DUNGZAK CESTLAVIE â€” Lightflow Î©.8.2" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://dungzak.art" />
<meta name="theme-color" content="#070c1a" />
<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='86'>âœ¨</text></svg>'>

<!-- Early Lang Boot: ì²« í˜ì¸íŠ¸ ì „ ì–¸ì–´ í´ë˜ìŠ¤/attr ì„¸íŒ… (FOUC ë°©ì§€) -->
<script>
(function(){
  try{
    var q=new URLSearchParams(location.search).get('lang');
    var saved=localStorage.getItem('dz_site_lang');
    var lang=(q==='ko'||q==='en'||q==='hy')?q:(saved||((/^(ko)/i).test(navigator.language||'')?'ko':'en'));
    document.documentElement.setAttribute('lang', lang==='en'?'en':'ko');
    var cls=lang==='ko'?'korean':lang==='en'?'english':'hybrid';
    document.addEventListener('DOMContentLoaded',function(){ document.body.classList.add(cls); });
  }catch(e){}
})();
</script>

<style>
:root{
  --bg:#070c1a; --fg:#eaf2ff; --gold:#e6c777; --muted:#b6c4ee;
  --panel:#0e152f; --line:#1c2955; --max:1180px
}
*{box-sizing:border-box;margin:0;padding:0}
html{scroll-behavior:smooth}
body{background:var(--bg);color:var(--fg);font:16px/1.68 system-ui,-apple-system,Segoe UI,Roboto,'Noto Sans KR',sans-serif;overscroll-behavior-y:none;overflow-x:hidden}
.en,.ko{display:inherit}
body.korean .en{display:none}
body.english .ko{display:none}
body.hybrid .ko,body.hybrid .en{display:inherit}

/* canvases */
#waves,#trail{position:fixed;inset:0;pointer-events:none}
#waves{z-index:0;opacity:.48}
#trail{z-index:1;opacity:.70;mix-blend-mode:screen}

/* header */
header{position:sticky;top:0;z-index:5;padding:10px 12px;background:linear-gradient(180deg,rgba(9,14,30,.9),rgba(9,14,30,.7));border-bottom:1px solid rgba(255,255,255,.08);backdrop-filter:blur(12px)}
.brand{font-weight:900;color:var(--gold);text-align:center;font-size:clamp(18px,5vw,24px)}
nav.primary{display:flex;gap:16px;justify-content:center;margin-top:10px;flex-wrap:wrap}
nav.primary button{all:unset;cursor:pointer;color:var(--fg);font-weight:700;padding:8px 14px;border-radius:12px;transition:background .18s,color .18s,box-shadow .18s}
nav.primary button:hover{color:#fff}
nav.primary button.active{background:linear-gradient(180deg,#f7e4a5,#e6c777);color:#0a1230;box-shadow:0 8px 16px rgba(230,199,119,.20);position:relative}
nav.primary button.active::after{content:"";position:absolute;left:12px;right:12px;bottom:-4px;height:2px;border-radius:2px;background:linear-gradient(90deg,#9fc6ff66,#f3c96999);filter:drop-shadow(0 0 6px rgba(240,210,120,.45))}

/* Language segmented control */
.langseg{--h:40px;display:flex;justify-content:center;margin:10px auto 0;width:min(360px,92vw);position:relative}
.langseg .rail{height:var(--h);width:100%;background:linear-gradient(180deg,#0f1838,#0b1432);border:1px solid #2a3765;border-radius:999px;display:flex;position:relative;overflow:hidden}
.langseg button{all:unset;cursor:pointer;flex:1;display:grid;place-items:center;color:#cfe1ff;font-weight:800;letter-spacing:.2px}
.langseg .thumb{position:absolute;top:2px;bottom:2px;width:33.33%;left:2px;border-radius:999px;background:linear-gradient(180deg,#f7e4a5,#e6c777);box-shadow:0 0 0 1px rgba(230,199,119,.45),0 6px 16px rgba(230,199,119,.22);transition:left .18s ease}
.langseg[data-active="ko"] .thumb{left:2px}
.langseg[data-active="en"] .thumb{left:calc(33.33% + 2px)}
.langseg[data-active="hy"] .thumb{left:calc(66.66% + 2px)}
.langseg .label{position:relative;z-index:1}
.langseg [aria-pressed="true"]{color:#0a1230}

/* layout */
main{position:relative;z-index:2}
section{max-width:var(--max);margin:auto;padding:72px 16px}
h1,h2{color:var(--gold)}
h2{margin-bottom:12px}
.sub{color:var(--muted)}
.hero{text-align:center;min-height:68vh}
.hero h1{font-size:clamp(34px,6vw,64px);margin-bottom:8px}

/* poem */
.poemwrap{max-width:860px;margin:18px auto 0;text-align:left;background:linear-gradient(180deg,rgba(16,22,48,.42),rgba(10,16,36,.36));backdrop-filter:blur(5px);border:1px solid #223a66;border-radius:14px;padding:26px}
.poem p{margin:14px 0;line-height:1.78}

/* works */
.tabs{display:flex;gap:8px;flex-wrap:wrap;justify-content:center;margin:10px 0 16px}
.tab{padding:9px 14px;border-radius:999px;border:1px solid var(--line);background:#0f1838;color:#bbcaf8;cursor:pointer;font-size:.92rem;white-space:nowrap}
.tab.active{background:linear-gradient(180deg,var(--gold),#f0df9e);color:#0a1230;border-color:#d9c16a}
.tabpanel{display:none;animation:fade .20s ease}
.tabpanel.active{display:block}
@keyframes fade{from{opacity:0}to{opacity:1}}
.grid{display:grid;gap:10px;grid-template-columns:repeat(2,1fr)}
@media(min-width:1024px){.grid{grid-template-columns:repeat(4,1fr)}}
.card{background:var(--panel);border:1px solid var(--line);border-radius:10px;overflow:hidden;opacity:0;transform:translateY(8px);transition:opacity .45s,transform .45s,box-shadow .6s}
.card.visible{opacity:1;transform:translateY(0)}
.card:active{box-shadow:0 0 16px rgba(230,199,119,.28);border-color:var(--gold)}
.card img{width:100%;aspect-ratio:1/1;object-fit:cover;display:block}

/* reports */
.reports-omega{padding:24px 0}
.reports-omega .r-head{display:flex;gap:12px;align-items:center;justify-content:space-between;margin-bottom:12px}
.r-tabs{display:flex;gap:8px}
.r-tab{cursor:pointer;border:1px solid #2a366b;background:#0e1840;color:#dfe7ff;border-radius:10px;padding:8px 12px;font-weight:700}
.r-tab.is-active{outline:2px solid #6aa3ff;background:#132252}
.r-grid{display:grid;gap:12px}
@media(min-width:680px){.r-grid{grid-template-columns:repeat(2,1fr)}}
@media(min-width:1024px){.r-grid{grid-template-columns:repeat(3,1fr)}}
.r-card{position:relative;border:1px solid #243169;background:linear-gradient(180deg,#0d1534,#0b1128);border-radius:14px;overflow:hidden}
.r-card .r-in{padding:14px 14px 12px}
.r-title{margin:2px 0 6px;font-size:16px;color:#eaf0ff;font-weight:800;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.r-sub{margin:0 0 10px;font-size:13px;color:#a9b7e8}
.r-meta{display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin:10px 0 8px}
.r-badge{font-size:11px;border:1px solid #345;padding:2px 7px;border-radius:999px;background:#0c183b;color:#cfe0ff}
.r-badge.pdf{border-color:#7b6322;background:#1c1830;color:#f2db9a}
.r-body{font-size:14px;color:#d6e1ff;opacity:.95;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
.r-actions{display:flex;gap:8px;margin-top:12px}
.r-actions a,.r-actions button{all:unset;cursor:pointer;border:1px solid #2a366b;background:#0e1840;color:#dfe7ff;border-radius:10px;padding:8px 12px;font-weight:700}
.r-actions a:hover,.r-actions button:hover{background:#15265a}

/* collapsed bar */
.reports-omega.is-collapsed .r-grid{display:none}
.reports-omega.is-collapsed .r-head{border:1px solid #243169;border-radius:12px;padding:8px 10px;background:linear-gradient(180deg,#0d1534,#0b1128)}
.r-toggle{all:unset;cursor:pointer;font-weight:800;padding:6px 10px;border:1px solid #2a366b;border-radius:10px;background:#0e1840;color:#dfe7ff}
.r-toggle:hover{background:#15265a}

/* lightbox */
#lightbox{position:fixed;inset:0;z-index:30;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.88);opacity:0;pointer-events:none;transition:opacity .25s}
#lightbox.on{opacity:1;pointer-events:auto}
.lb-stage{position:relative;max-width:96vw;max-height:90vh;overflow:hidden;border:2px solid var(--gold);border-radius:12px;background:#000}
#lbImg{display:block;max-width:100%;max-height:90vh;cursor:zoom-in;transform:translate(0,0) scale(1);transition:transform .2s ease}
.lb-caption{position:absolute;left:0;right:0;bottom:0;background:linear-gradient(180deg,transparent,#000b);color:#cfe0ff;padding:8px 12px;font-size:.9rem}
.lb-arrow{position:absolute;top:50%;transform:translateY(-50%);width:46px;height:46px;border-radius:50%;border:1px solid rgba(230,199,119,.35);background:rgba(12,19,48,.55);color:#fff;display:grid;place-items:center;cursor:pointer}
.lb-arrow:hover{background:linear-gradient(180deg,#f7e4a5,#e6c777);color:#0a1230}
.lb-prev{left:-60px}.lb-next{right:-60px}
@media(max-width:520px){.lb-prev{left:8px}.lb-next{right:8px}}
.lb-close{position:absolute;top:-56px;right:0;width:40px;height:40px;border-radius:50%;border:1px solid rgba(230,199,119,.35);background:rgba(12,19,48,.55);color:#fff;cursor:pointer}
.lb-meta{position:absolute;top:-56px;left:0;color:#cfe0ff;font-size:.85rem;opacity:.85}

/* footer & sound controls */
footer{border-top:1px solid rgba(255,255,255,.08);background:#0a1024;text-align:center;padding:44px 12px 104px}
.links{display:flex;gap:26px;flex-wrap:wrap;justify-content:center;margin-bottom:10px}
.links a{color:#cfe0ff;text-decoration:none;letter-spacing:.3px;display:inline-flex;gap:8px;align-items:center}
.links a:hover{color:#ffe9b8;text-shadow:0 0 8px rgba(240,210,120,.25)}
small{display:block;margin-top:6px;color:#9fb0d8}
#ctrl{position:fixed;left:50%;transform:translateX(-50%);bottom:calc(60px + env(safe-area-inset-bottom));display:flex;gap:8px;z-index:8}
.ctrlbtn{width:36px;height:36px;border-radius:50%;border:1px solid rgba(230,199,119,.35);background:rgba(12,19,48,.45);color:#fff;cursor:pointer;box-shadow:0 0 8px rgba(120,170,255,.18)}
.ctrlbtn[disabled]{opacity:.45;cursor:not-allowed}
#fftBar{position:fixed;left:50%;transform:translateX(-50%);bottom:calc(102px + env(safe-area-inset-bottom));width:180px;height:6px;border-radius:6px;background:linear-gradient(90deg,#9fc6ff22,#f3c96955);overflow:hidden}
#fftBar span{display:block;height:100%;width:0;background:linear-gradient(90deg,#b7d4ff,#f6d98c);opacity:.9}

/* Bio modal */
#bio-modal[hidden]{display:none}
#bio-modal{position:fixed;inset:0;z-index:9999}
.bio-backdrop{position:absolute;inset:0;background:rgba(6,10,24,.62);backdrop-filter:saturate(1.1) blur(6px)}
.bio-card{position:relative;margin:4vh auto;width:min(960px,94vw);max-height:90vh;overflow:auto;background:linear-gradient(180deg,#0a1022,#0b132a);color:#eaeef7;border:1px solid rgba(255,215,120,.28);border-radius:20px;padding:14px 16px 20px;box-shadow:0 14px 48px rgba(0,0,0,.55)}
.bio-head{display:flex;align-items:center;gap:10px;position:sticky;top:0;padding:8px 2px 10px;background:linear-gradient(180deg,rgba(10,16,34,.98),rgba(10,16,34,.92));border-bottom:1px solid rgba(255,255,255,.04)}
.bio-head h2{margin:0;font-size:1.2rem}
.bio-close{border:0;background:transparent;color:#fff;font-size:1.1rem;padding:6px 8px;cursor:pointer}
.bio-body p{line-height:1.78}
details{border:1px solid rgba(255,215,120,.16);border-radius:12px;padding:.6rem .8rem;margin:.75rem 0}
details>summary{cursor:pointer;color:#ffe6ad;font-weight:600}
.expo-kicker{display:block;width:100%;text-align:left;margin:.25rem 0 1rem;border:1px dashed rgba(255,215,120,.28);border-radius:10px;background:transparent;color:#f9e6b7;padding:.6rem .75rem;cursor:pointer;position:relative}
.expo-kicker:hover{background:rgba(255,215,120,.06);border-color:rgba(255,215,120,.46)}
.slide-wrap{overflow:hidden;transition:max-height .35s ease;max-height:0}
.slide-wrap[data-open="true"]{max-height:4000px}

/* Focus ring */
:focus-visible{outline:2px solid #f0da9a;outline-offset:2px;border-radius:12px;box-shadow:0 0 0 2px rgba(20,30,60,.6)}

/* Bottom progress hint */
body::after{content:"";position:fixed;left:8%;right:8%;bottom:86px;height:4px;border-radius:4px;background:linear-gradient(90deg,#9fc6ff22,#f3c96955);pointer-events:none;z-index:8;transform-origin:left center;transform:scaleX(var(--scrollX,.06))}

/* Reduce motion */
@media (prefers-reduced-motion: reduce){
  #waves,#trail{display:none !important}
  html{scroll-behavior:auto}
  *{transition:none !important}
}
</style>
</head>

<!-- ===== BODY / HTML ===== -->
<body class="korean">
<canvas id="waves" aria-hidden="true"></canvas>
<canvas id="trail" aria-hidden="true"></canvas>

<header>
  <div class="brand">ë“±ì‘ ç‡ˆé…Œ DUNGZAK CESTLAVIE Â· Lightflow Î©.8.2</div>
  <nav class="primary" aria-label="Primary">
    <button type="button" data-target="poem" class="active">Poem</button>
    <button type="button" data-target="works">Works</button>
    <button type="button" data-target="reports">Reports</button>
    <button type="button" id="tab-bio">Artist Bio</button>
  </nav>

  <!-- Language segmented control -->
  <div class="langseg" id="langseg" data-active="ko" aria-label="Language">
    <div class="rail">
      <button id="koBtn" aria-pressed="true"><span class="label">KR</span></button>
      <button id="enBtn" aria-pressed="false"><span class="label">EN</span></button>
      <button id="hyBtn" aria-pressed="false"><span class="label">KR+EN</span></button>
      <div class="thumb" aria-hidden="true"></div>
    </div>
  </div>
</header>

<main>
  <!-- POEM -->
  <section id="poem" class="hero">
    <h1 class="ko">ë¹› Â· ê¸°ì–µ Â· ì¡´ì¬</h1>
    <h1 class="en">Light Â· Memory Â· Being</h1>
    <div class="poemwrap">
      <p class="ko" style="font-weight:700">ã€ˆíŒŒë¦¬ì˜ ì„¼ëŠê°•ã€‰</p>
      <p class="en" style="font-weight:700">ã€ˆThe Seine of Parisã€‰</p>
      <p class="ko" style="opacity:.85;margin-top:4px">ë“±ì‘ ç‡ˆé…Œ DUNGZAK CESTLAVIE</p>
      <p class="en" style="opacity:.85;margin-top:4px">DUNGZAK CESTLAVIE</p>
      <div class="poem">
        <p class="ko">ì„¼ëŠê°• ë‹¤ë¦¬ ì•„ë˜, ë…¸íŠ¸ë¥´ë‹´ ì„±ë‹¹ì˜ ì´›ë¶ˆì´ ì¼œì§ˆ ë¬´ë µâ€”</p><p class="en">Beneath the bridge of the Seine, as the candles of Notre-Dame begin to glowâ€”</p>
        <p class="ko">ì†Œë°•í•œ ê¿ˆë“¤ì„ ì•ˆê³  ì‚¬ëŠ” ì‚¬ëŒë“¤ì´ ëª¨ì—¬ ì¶¤ì¶˜ë‹¤.</p><p class="en">People who live with humble dreams gather to dance.</p>
        <p class="ko">ë¹™ê¸€ë¹™ê¸€ ëŒì•„ê°€ë©° ë‚´ë”›ëŠ” ë°œê±¸ìŒì˜ í™”ìŒ ìœ„ë¡œ,</p><p class="en">Their circling steps form harmonies upon the rhythm of their feet,</p>
        <p class="ko">ë°”ì´ì˜¬ë¦°ì´ ìƒˆíŒŒë—ê³  ìƒ›ë…¸ë‘ì˜ ë¹›ì„ í©ë¿Œë¦¬ë©° ì›ƒëŠ”ë‹¤.</p><p class="en">As violins scatter blue and golden light, laughing in brilliance.</p>
        <p class="ko">ê¿ˆê¾¸ëŠ” ì—¬ì¸ë“¤ê³¼ ê¿ˆê¾¸ëŠ” ë‚¨ì„±ë“¤ì´ ì†ì„ ì¡ê³ ,</p><p class="en">Dreaming women and dreaming men clasp hands,</p>
        <p class="ko">ì‚¬ëŒì˜ í–¥ê¸°ë¥¼ ë§¡ìœ¼ë©° ì¬ë¹ ë¥¸ ìŒë¥ ì— ëª¸ì„ ë§¡ê¸´ë‹¤.</p><p class="en">Breathing the scent of humanity, surrendering to the swift rhythm.</p>
        <p class="ko">ì•„ë‹´ê³¼ ì´ë¸Œì˜ ë³„ìêµ­ì´ ëˆˆë¬¼ë°©ìš¸ì²˜ëŸ¼ í˜ëŸ¬ë‚´ë¦¬ëŠ” ë‚˜ë¬´,</p><p class="en">A tree where Adam and Eveâ€™s star-traces drip like tears,</p>
        <p class="ko">ê·¸ í’ê²½ ì†ì—ì„œ ì´ˆìŠ¹ë‹¬ì€ ì–´ì—¬ìœ í•˜ì–€ ë¯¸ì†Œë¥¼ í˜ë¦°ë‹¤.</p><p class="en">In that scene, the crescent moon releases a tender white smile.</p>
        <p class="ko">ìƒ¤ë½, ìƒ¤ë½â€” ì¶¤ì‚¬ìœ„ì˜ ë¦¬ë“¬ì´ í™•ì¥ë ìˆ˜ë¡,</p><p class="en">Sharak, sharakâ€” as the rhythm of dance expands,</p>
        <p class="ko">êµ¬ê²½í•˜ë˜ ì´ë“¤ë§ˆì € ì–´ê¹¨ì™€ í—ˆë¦¬ë¥¼ ë“¤ì©ì´ë©°,</p><p class="en">Even the onlookers begin to sway their shoulders and waists,</p>
        <p class="ko">ì‚¬ë‘ì˜ ì…ë§ì¶¤ì„ ì˜ì‹í•œë‹¤.</p><p class="en">Becoming aware of loveâ€™s gentle kiss.</p>
        <p class="ko">í˜ëŸ¬ê° ì†ì— í¬ê°œì§„ ìˆœê°„, ê·¸ë“¤ì€ ì˜í˜¼ì˜ ë°•ì œê°€ ë˜ì–´, ë©ˆì¶¤ ì†ì— ì˜ì›ì„ ìƒˆê¸´ë‹¤.</p>
        <p class="en">Within the flowing overlap of time, they become taxidermies of the soul, inscribing eternity into stillness.</p>
      </div>
    </div>
  </section>

  <!-- WORKS -->
  <section id="works" style="display:none">
    <h2 class="ko">ì‘í’ˆ ì•„ì¹´ì´ë¸Œ</h2><h2 class="en">Artworks</h2>
    <div class="tabs" role="tablist" aria-label="Art Sections">
      <button class="tab active" data-panel="pray">â…  ìš°ë¦¬ë¥¼ ìœ„í•´ ê¸°ë„í•´ ì£¼ì„¸ìš” Â· Pray for Us</button>
      <button class="tab" data-panel="human">â…¡ ì¸ê°„ Â· Human Being</button>
      <button class="tab" data-panel="rebirth">â…¢ ì •ì‹ ì˜ ì¬íƒ„ìƒ Â· Rebirth of Mind</button>
      <button class="tab" data-panel="exist">â…£ ì¡´ì¬ì˜ íšŒë³µ Â· Restoration of Being</button>
      <button class="tab" data-panel="cosmos">â…¤ ë¹›ì˜ ì´ˆì˜ì‹ Â· Metaconsciousness of Light</button>
    </div>
    <div id="panel-pray" class="tabpanel active"></div>
    <div id="panel-human" class="tabpanel"></div>
    <div id="panel-rebirth" class="tabpanel"></div>
    <div id="panel-exist" class="tabpanel"></div>
    <div id="panel-cosmos" class="tabpanel"></div>
  </section>

  <!-- REPORTS -->
  <section id="reports" style="display:none">
    <h2 class="ko">ë¯¸í•™ ë³´ê³ ì„œ (DCAR Series)</h2>
    <h2 class="en">Aesthetic Reports (DCAR Series)</h2>
    <div class="reports-omega">
      <div class="r-head">
        <div class="r-tabs">
          <button class="r-tab is-active" data-r="all">All</button>
          <button class="r-tab" data-r="theory">Theory</button>
          <button class="r-tab" data-r="archive">Archive</button>
          <button class="r-tab" data-r="practice">Practice</button>
        </div>
        <button class="r-toggle" id="reportsToggle" aria-expanded="false">Open Reports</button>
      </div>
      <div class="r-grid" id="reportGrid"></div>
    </div>
  </section>
</main>

<!-- ARTIST BIO MODAL -->
<div id="bio-modal" hidden>
  <div class="bio-backdrop"></div>
  <div class="bio-card" role="dialog" aria-modal="true" aria-labelledby="bio-title">
    <div class="bio-head">
      <h2 id="bio-title" class="ko">ì‘ê°€ ì†Œê°œ</h2>
      <h2 class="en">Artist Bio</h2>

      <!-- Bio language mini segment -->
      <div class="langseg" id="bioLang" data-active="kr" aria-label="Bio Language" style="width:210px;--h:36px;margin-left:auto">
        <div class="rail">
          <button class="lang" data-bio-lang="kr" aria-pressed="true"><span class="label">KR</span></button>
          <button class="lang" data-bio-lang="en" aria-pressed="false"><span class="label">EN</span></button>
          <button class="lang" data-bio-lang="hy" aria-pressed="false"><span class="label">KR+EN</span></button>
          <div class="thumb" aria-hidden="true" style="width:33.33%"></div>
        </div>
      </div>

      <button class="bio-close" aria-label="Close">âœ•</button>
    </div>

    <!-- one-line summary (KR/EN ë™ê¸°í™”) -->
    <button class="expo-kicker" id="expoToggle" aria-expanded="false">
      <span class="ko">ë“±ì‘ ç‡ˆé…Œ DUNGZAK CESTLAVIE Â· êµ­ë‚´ì™¸ ê°œì¸ì „ 28íšŒ â–¾</span>
      <span class="en">DUNGZAK CESTLAVIE Â· 28 solo exhibitions worldwide â–¾</span>
    </button>

    <!-- slide list -->
    <div class="slide-wrap" id="expoSlide" data-open="false">
      <!-- Korean list -->
      <div class="bio-body ko">
        <p><strong>êµ­ë‚´ ì£¼ìš”ì „ì‹œ</strong></p>
        <p>2025 êµ¬êµ¬ê°¤ëŸ¬ë¦¬ ëª©ë™, ì„œìš¸</p>
        <p>2023, 2024 êµ¬êµ¬ê°¤ëŸ¬ë¦¬ ëª©ë™, ì„œìš¸</p>
        <p>2023 ì•„íŠ¸í”ŒëŸ¬ìŠ¤ ê°¤ëŸ¬ë¦¬ ì¸ì‚¬ë™, ì„œìš¸</p>
        <p>2019, 2022 í•´ì–‘ ì—ë„ˆì§€ ì •ì› í•œë‚¨ë™, ì„œìš¸</p>
        <p>2015 NC ê°¤ëŸ¬ë¦¬, ë¶€ì‚°</p>
        <p>2014 ê°¤ëŸ¬ë¦¬ ê³¨ëª©, ì´íƒœì›</p>
        <p>2013 í”„ë¼ë¯¸ìŠ¤ ëœë“œ, ë¶€ì‚°</p>
        <p>2009 ì•„íŠ¸ ê°¤ëŸ¬ë¦¬ ìœ , ë¶€ì‚°</p>
        <p>2005 íš¡ì„± ë¬¸í™”ê´€</p>
        <p>2003 ìŠ¤í˜ì´ìŠ¤ í‚¤ì¹œ, ì„œìš¸</p>
        <p>2003 í™ëŒ€ ë†€ì´í„° ì‚¬ê³„ ì•¼ì™¸ ì „ì‹œ, ì„œìš¸</p>
        <p>2000 ê°¤ëŸ¬ë¦¬ ì†Œí˜¸, ë¶€ì‚°</p>
        <p>2000 ì„¸ì›ë°±í™”ì , ë¶€ì‚°</p>
        <br><p><strong>êµ­ì™¸ ì£¼ìš”ì „ì‹œ</strong></p>
        <p>2016 Berlin Mitte Live Concert Bar, ë² ë¥¼ë¦°</p>
        <p>2015 ëª¨ìŠ¤í¬ë°” êµ­ì œê³µí•­ ã€ì‚¶ê³¼ ì˜ˆìˆ ì˜ ê°„ê²©ã€</p>
        <p>2014 í˜¸ì°Œë¯¼ ì¤‘ì•™ ê²½ì°°ì„œ ì¦‰í¥ í¼í¬ë¨¼ìŠ¤</p>
        <p>2011 Open Art in Amsterdam, ë„¤ëœë€ë“œ</p>
        <p>2006 Linka Gallery, ì•”ìŠ¤í…Œë¥´ë‹´</p>
        <p>2005 Lune Cafe, ëª½íŒŒë¥´ë‚˜ìŠ¤, íŒŒë¦¬</p>
        <p>2005 ë£¨ë¸Œë¥´ ë°•ë¬¼ê´€ ì™¸ë²½ ì „ì‹œ, íŒŒë¦¬</p>
        <br><p><strong>ê·¸ ì™¸ ì „ì‹œ</strong></p>
        <p>2025 ê·¸ë¦¼ë”°ë¼ ê±·ëŠ” ë„ì‹œ, ìµì‚°</p>
        <p>2025 ê°¤ëŸ¬ë¦¬5 ì „êµ­ ì´ˆëŒ€ì „, ì¸ì²œ</p>
        <p>2024, 2025 êµ¬êµ¬ê°¤ëŸ¬ë¦¬ ì†¡ë…„ ì„ ë¬¼ì „, ì„œìš¸</p>
        <p>2022 ê¹€ì˜ìš°Â·ë“±ì‘ 2ì¸ì „, ì•„ë¥´í…œ ê°¤ëŸ¬ë¦¬, ì„œìš¸</p>
        <p>2004 ê´‘ì£¼ë¹„ì—”ë‚ ë ˆ â€œThe Stageâ€</p>
        <p>2004 í•˜ëŒ€ë¦¬ ìˆ²ì† ë¯¸ìˆ ì œ â€œì˜ˆìˆ ì˜ íœ´ê°€â€</p>
        <p>2000 JosÃ© DelgadoÂ·ë“±ì‘ 2ì¸ì „, ë¶€ì‚°</p>
        <br><p><strong>ì†Œì¥</strong></p>
        <p>ë² ë¥¼ë¦° ì‹œì²­ / í›”ë³¼íŠ¸ ë³‘ì› / ë…¸íŠ¸ë¥´ë‹´ ëŒ€ì„±ë‹¹ / íŒŒë¦¬ ì •ì¹˜ëŒ€í•™ / ë°”ë¥´ìƒ¤ë°” êµ­ë¦½ ì˜ë£Œì› / ë„ì¿„ êµíšŒ / í˜¸ì°Œë¯¼ ì¤‘ì•™ ê²½ì°°ì„œ / ë°˜ ê³ í ë¯¸ìˆ ê´€(Portfolio) / MoMA(Portfolio) / ë©”ë¦¬ì¸  ì¦ê¶Œ / ê°œì¸ ì†Œì¥ ë‹¤ìˆ˜</p>
        <br><p><strong>ì €ì„œ</strong></p>
        <p>ã€Šëˆˆë¬¼ì€ ì ˆëŒ€ ë©ˆì¶”ì§€ ì•ŠëŠ”ë‹¤ã€‹(2022)</p>
        <p>ã€Šì˜ˆìˆ , ê·¸ ëì—†ëŠ” ì‚¬ë‘ã€‹(2024)</p>
      </div>

      <!-- English list -->
      <div class="bio-body en">
        <p><strong>Major Exhibitions in Korea</strong></p>
        <p>2025 Gugu Gallery Mokdong, Seoul, Republic of Korea</p>
        <p>2023, 2024 Gugu Gallery Mokdong, Seoul, Republic of Korea</p>
        <p>2023 Art Plus Gallery Insadong, Seoul, Republic of Korea</p>
        <p>2019, 2022 Ocean Energy Garden, Hannam-dong, Seoul, Republic of Korea</p>
        <p>2015 NC Gallery, Busan, Republic of Korea</p>
        <p>2014 Gallery Golmok, Itaewon, Seoul, Republic of Korea</p>
        <p>2013 Promise Land, Busan, Republic of Korea</p>
        <p>2009 Art Gallery You, Busan, Republic of Korea</p>
        <p>2005 Hoengseong Cultural Center, Gangwon-do, Republic of Korea</p>
        <p>2003 Space Kitchen, Seoul, Republic of Korea</p>
        <p>2003 Seasonal Outdoor Project & Exhibition, Hongdae Playground, Seoul, Republic of Korea</p>
        <p>2000 Gallery Soho, Busan, Republic of Korea</p>
        <p>2000 Sewon Department Store, Busan, Republic of Korea</p>
        <br><p><strong>Major International Exhibitions</strong></p>
        <p>2016 Berlin Mitte Live Concert Bar, Berlin, Germany</p>
        <p>2015 Moscow International Airport, â€œThe Distance Between Life and Artâ€, Moscow, Russia</p>
        <p>2014 Improvised performance & exhibition, Ho Chi Minh City Central Police Building, Vietnam</p>
        <p>2011 Open Art in Amsterdam, Netherlands</p>
        <p>2006 Linka Gallery, Amsterdam, Netherlands</p>
        <p>2005 Lune Cafe, Montparnasse, Paris, France</p>
        <p>2005 Exterior Wall Exhibition, Louvre Museum, Paris, France</p>
        <br><p><strong>Selected Other Exhibitions</strong></p>
        <p>2025 Walking with Art in Iksan, Republic of Korea</p>
        <p>2025 Gallery 5 National Invitational Exhibition, Incheon, Republic of Korea</p>
        <p>2024, 2025 Gugu Gallery Year-End Gift Exhibition, Seoul, Republic of Korea</p>
        <p>2022 Two-person Exhibition (Kim Young-woo & Dungzak), Artem Gallery, Seoul, Republic of Korea</p>
        <p>2004 Gwangju Biennale â€œThe Stageâ€, Gwangju, Republic of Korea</p>
        <p>2004 Summer Forest Art Festival â€œArt Vacationâ€, Hadaeri, Hoengseong-gun, Republic of Korea</p>
        <p>2000 Two-person Exhibition (JosÃ© Delgado & Dungzak), Seomyeon Metro Art Museum, Busan, Republic of Korea</p>
        <br><p><strong>Collections</strong></p>
        <p>Berlin City Hall; Humboldt Hospital; Notre-Dame Cathedral, Paris; Sciences Po, Paris; National Medical Institute, Warsaw; Church in Tokyo; Ho Chi Minh City Central Police Department; Van Gogh Museum (Portfolio), Amsterdam; MoMA, New York (Portfolio); Meritz Securities Co., Ltd., Republic of Korea; numerous private collections.</p>
        <br><p><strong>Publications</strong></p>
        <p><em>Tears Never Stop</em> â€” The Artistâ€™s Duty and Human Desire (2022)</p>
        <p><em>Art, the Endless Love</em> (2024)</p>
      </div>
    </div>

    <!-- Bio main text -->
    <div class="bio-body">
      <div class="ko">
        <p><strong>ì‘ê°€ ì†Œê°œ</strong></p>
        <p>ë“±ì‘ ç‡ˆé…Œ DUNGZAK CESTLAVIEëŠ” ë¹›ê³¼ ê¸°ì–µ, ì¡´ì¬ì˜ ê·¼ì›ì„ íƒêµ¬í•˜ëŠ” í•œêµ­ í˜„ëŒ€ ì˜ˆìˆ ê°€ë‹¤.</p>
        <p>ê·¸ì˜ ì‘ì—…ì€ ì¸ê°„ì´ ìŠ¤ì³ ì§€ë‚˜ê°€ëŠ” ê°ì •ì˜ í”ì , ìƒì²˜ë¥¼ í†µê³¼í•œ ë¹›ì˜ ê¸°ì›, ê·¸ë¦¬ê³  ì†Œë©¸ê³¼ íƒ„ìƒì´ ë°˜ë³µë˜ëŠ” ì¡´ì¬ì˜ ìˆœí™˜ì„ ê¸°ë¡í•œë‹¤.</p>
        <p>ì„œìš¸ì„ ê¸°ë°˜ìœ¼ë¡œ ë² ë¥¼ë¦°Â·íŒŒë¦¬Â·ì•”ìŠ¤í…Œë¥´ë‹´Â·ë°”ë¥´ìƒ¤ë°”Â·ëª¨ìŠ¤í¬ë°”ì—ì„œ íšŒí™”ì™€ ë‹¤ë§¤ì²´ í”„ë¡œì íŠ¸ë¥¼ ì „ê°œí•˜ë©°, íšŒí™”Â·í…ìŠ¤íŠ¸Â·ì‚¬ìš´ë“œÂ·ì˜ìƒÂ·ì•„ì¹´ì´ë¸Œë¥¼ ê²°í•©í•´ â€œë¹›ì˜ ìœ¤ë¦¬â€ì™€ â€œê¸°ì–µì˜ ì¡´ì—„â€ì„ íƒêµ¬í•œë‹¤.</p>
        <p>ê·¸ì˜ íšŒí™”ëŠ” ê¸°ë„ë¬¸ì´ì ê¸°ë¡ì´ë©°, í”ì ê³¼ ì—¬ë°±ì„ í†µí•´ ê°ì •ì˜ ê·¼ì›ì„ ë˜ì‚´ë¦°ë‹¤.</p>
        <p>ê·¸ì˜ ì˜ˆìˆ  ì„¸ê³„ëŠ” ìƒì²˜ ì´í›„ì— ë‚¨ëŠ” ë”°ìŠ¤í•¨, ì‚¬ë¼ì§€ì§€ ì•ŠëŠ” ê¸°ì–µì˜ í˜, ì¸ê°„ ì¡´ì—„ì˜ ì¡°ìš©í•œ ì„ ì–¸ì´ë‹¤.</p>
      </div>
      <div class="en">
        <p><strong>Artist Bio</strong></p>
        <p>DUNGZAK CESTLAVIE is a Korean contemporary artist exploring the origins of light, memory, and being.</p>
        <p>His practice documents emotional traces, the genesis of light passing through wounds, and cycles of disappearance and rebirth.</p>
        <p>Based in Seoul, he has worked across Berlin, Paris, Amsterdam, Warsaw, and Moscow, integrating painting, text, sound, video, and archival structures to explore an â€œethics of lightâ€ and â€œdignity of memory.â€</p>
        <p>His paintings act as prayers and records, rebuilding the foundations of feeling through traces and silence.</p>
        <p>His world offers warmth after wounding, the persistence of memory, and the quiet dignity of the human spirit.</p>
      </div>
    </div>
  </div>
</div>

<!-- Lightbox & Sound controls -->
<div id="lightbox" aria-hidden="true">
  <div class="lb-stage">
    <img id="lbImg" alt="Artwork view">
    <div class="lb-caption" id="lbCap"></div>
    <button class="lb-arrow lb-prev" id="lbPrev" aria-label="Previous">â—€</button>
    <button class="lb-arrow lb-next" id="lbNext" aria-label="Next">â–¶</button>
  </div>
  <button class="lb-close" id="lbClose" aria-label="Close">âœ•</button>
  <div class="lb-meta" id="lbMeta"></div>
</div>
<div id="fftBar"><span></span></div>
<div id="ctrl">
  <button class="ctrlbtn" id="soundBtn" aria-label="Play ambient">âœ¨</button>
  <button class="ctrlbtn" id="soundStopBtn" aria-label="Stop ambient" disabled>ğŸ”‡</button>
</div>

<footer>
  <div class="links">
    <a href="https://flickr.com/photos/dungzak" target="_blank" rel="noopener">Flickr</a>
    <a href="https://instagram.com/dungzakcestlavie" target="_blank" rel="noopener">Instagram</a>
    <a href="https://youtube.com/@dungzakcestlavie" target="_blank" rel="noopener">YouTube</a>
    <a href="https://naver.me/x95dk3l1" target="_blank" rel="noopener">Naver Info</a>
    <a href="mailto:dungzakcestlavie@gmail.com">Email</a>
  </div>
  <small class="ko">Â© 2025 ë“±ì‘ ç‡ˆé…Œ DUNGZAK CESTLAVIE</small>
  <small class="en">Â© 2025 DUNGZAK CESTLAVIE</small>
</footer>

<!-- ===== SCRIPTS ===== -->
<script>
/* Helpers */
const $$=(q,sc)=>Array.from((sc||document).querySelectorAll(q));
const $=(q,sc)=>(sc||document).querySelector(q);

/* Site language â€” segmented control (instant + remembered + synced) */
(function(){
  const LANG_KEY='dz_site_lang';
  const body=document.body, html=document.documentElement;
  const seg=$('#langseg');
  const koBtn=$('#koBtn'), enBtn=$('#enBtn'), hyBtn=$('#hyBtn');

  function setButtons(code){
    const map={ko:koBtn,en:enBtn,hy:hyBtn};
    [koBtn,enBtn,hyBtn].forEach(b=>b&&b.setAttribute('aria-pressed','false'));
    (map[code]||koBtn)?.setAttribute('aria-pressed','true');
    seg?.setAttribute('data-active', code);
  }
  function setBodyClass(code){
    body.classList.remove('korean','english','hybrid');
    body.classList.add(code==='ko'?'korean':code==='en'?'english':'hybrid');
    html.setAttribute('lang', code==='en'?'en':'ko');
    document.dispatchEvent(new CustomEvent('dz-lang-change',{detail:code}));
  }
  function setLang(code, persist=true){
    if(!['ko','en','hy'].includes(code)) code='ko';
    setButtons(code); setBodyClass(code);
    persist && localStorage.setItem(LANG_KEY, code);
  }
  function pickInitial(){
    const q=new URLSearchParams(location.search).get('lang');
    if(q==='ko'||q==='en'||q==='hy') return q;
    const saved=localStorage.getItem(LANG_KEY);
    if(saved) return saved;
    const nav=navigator.languages?.[0]||navigator.language||'en';
    return /^ko/i.test(nav)?'ko':'en';
  }
  const init=pickInitial(); setLang(init,false);

  // bindings
  koBtn?.addEventListener('click',()=>setLang('ko'));
  enBtn?.addEventListener('click',()=>setLang('en'));
  hyBtn?.addEventListener('click',()=>setLang('hy'));

  // keyboard
  [koBtn,enBtn,hyBtn].forEach(b=>{
    if(!b) return; b.setAttribute('role','button'); b.addEventListener('keydown',e=>{
      if(e.key==='Enter'||e.key===' '){e.preventDefault(); b.click();}
    });
  });

  // sync other tabs
  window.addEventListener('storage',e=>{
    if(e.key===LANG_KEY && e.newValue){ setLang(e.newValue,false); }
  });
})();

/* Primary nav show/hide with smooth scroll */
(function(){
  const sections=['poem','works','reports'];
  function show(id){
    sections.forEach(s=>{
      const el=document.getElementById(s);
      if(el) el.style.display=(s===id)?'block':'none';
    });
    $$('nav.primary button[data-target]').forEach(b=>b.classList.toggle('active',b.dataset.target===id));
    const target=$('#'+id); if(target) window.scrollTo({top:target.offsetTop-70,behavior:'smooth'});
  }
  $$('nav.primary button[data-target]').forEach(b=>b.addEventListener('click',()=>show(b.dataset.target)));
  show('poem');
  $('#tab-bio')?.addEventListener('click',()=>window.DZ_BIO?.open());
})();

/* Background waves & trail (safe + reduced-motion aware) */
(function(){
  try{
    const wcv=$('#waves'), tcv=$('#trail');
    const wctx=wcv?.getContext('2d',{alpha:true});
    const tctx=tcv?.getContext('2d',{alpha:true});
    if(!wctx||!tctx) return;
    let DPR=1,px=innerWidth/2,py=innerHeight/2,tx=px,ty=py,visible=true;
    const ease=x=>x*x*(3-2*x);
    function resize(){
      DPR=Math.max(1,Math.min(2,devicePixelRatio||1));
      [wctx,tctx].forEach(c=>{
        c.canvas.width=Math.floor(innerWidth*DPR);
        c.canvas.height=Math.floor(innerHeight*DPR);
        c.setTransform(1,0,0,1,0,0); c.scale(1/DPR,1/DPR);
      });
    }
    function waveY(x,k,t){const f1=0.003+k*0.0007,f2=0.006+k*0.0006,a1=26+k*12,a2=14+k*8,dr=t*(0.75+k*0.15),base=innerHeight*0.30+k*108+Math.sin(t*0.5+k)*12,curve=0.9+ease(x/innerWidth)*0.2;return base+Math.sin(x*f1+dr*1.1+Math.sin(dr*0.7+k)*.25)*a1*curve+Math.sin(x*f2+dr*.85)*a2}
    function frame(now){
      if(!visible){requestAnimationFrame(frame);return}
      const T=(now/1000)%30,hue=(T<15)?200+(260-200)*(T/15):(T<22.5)?260+(45-260)*((T-15)/7.5):45+(200-45)*((T-22.5)/7.5);
      wctx.clearRect(0,0,innerWidth,innerHeight);
      for(let k=0;k<4;k++){
        wctx.beginPath();
        for(let x=0;x<=innerWidth;x+=6){const y=waveY(x,k,now*0.001);x?wctx.lineTo(x,y):wctx.moveTo(x,y)}
        const y0=waveY(0,k,now*0.001),g=wctx.createLinearGradient(0,y0-140,0,y0+140);
        g.addColorStop(0,`hsla(${(hue+k*12)%360},60%,70%,.10)`); g.addColorStop(.5,`hsla(45,70%,68%,.30)`); g.addColorStop(1,`hsla(${(hue+60+k*12)%360},60%,60%,.10)`);
        wctx.strokeStyle=g; wctx.lineWidth=1.1+k*0.45; wctx.globalAlpha=0.9-k*0.12; wctx.shadowBlur=16; wctx.shadowColor='rgba(160,200,255,.18)'; wctx.stroke();
      }
      wctx.globalAlpha=1; wctx.shadowBlur=0;
      px+=(tx-px)*0.16; py+=(ty-py)*0.16;
      const speed=Math.hypot(tx-px,ty-py),r=96+Math.min(speed*160,240);
      tctx.fillStyle='rgba(0,0,0,.12)'; tctx.fillRect(0,0,innerWidth,innerHeight);
      const grad=tctx.createRadialGradient(px,py,0,px,py,r);
      grad.addColorStop(0,`hsla(${hue},70%,68%,.22)`); grad.addColorStop(.55,'rgba(140,185,255,.14)'); grad.addColorStop(1,'rgba(140,185,255,0)');
      tctx.fillStyle=grad; tctx.beginPath(); tctx.arc(px,py,r,0,Math.PI*2); tctx.fill();
      requestAnimationFrame(frame);
    }
    resize(); addEventListener('resize',resize,{passive:true});
    document.addEventListener('visibilitychange',()=>visible=!document.hidden);
    addEventListener('mousemove',e=>{tx=e.clientX;ty=e.clientY},{passive:true});
    addEventListener('touchmove',e=>{const p=e.touches[0];tx=p.clientX;ty=p.clientY},{passive:true});
    requestAnimationFrame(frame);
  }catch(e){console.warn('canvas init error',e)}
})();

/* Artist Bio modal + focus trap + language mini segment */
window.DZ_BIO=(function(){
  const modal=$('#bio-modal');
  const closeBtn=modal?.querySelector('.bio-close');
  const expoToggle=$('#expoToggle');
  const expoSlide=$('#expoSlide');
  const headKo=modal?.querySelector('.bio-head .ko');
  const headEn=modal?.querySelector('.bio-head .en');

  // mini segment
  const seg=$('#bioLang');
  const btns=seg?$$('.lang',seg):[];
  function setThumb(code){
    seg?.setAttribute('data-active', code==='en'?'en':code==='hy'?'hy':'kr');
    btns.forEach(b=>b.setAttribute('aria-pressed','false'));
    (btns.find(b=>b.dataset.bioLang===code)||btns[0])?.setAttribute('aria-pressed','true');
  }
  function showKR(){ headKo.style.display='block'; headEn.style.display='none';
    $$('.bio-body.ko',modal).forEach(n=>n.style.display='block');
    $$('.bio-body.en',modal).forEach(n=>n.style.display='none'); }
  function showEN(){ headKo.style.display='none'; headEn.style.display='block';
    $$('.bio-body.ko',modal).forEach(n=>n.style.display='none');
    $$('.bio-body.en',modal).forEach(n=>n.style.display='block'); }
  function showHY(){ headKo.style.display='block'; headEn.style.display='block';
    $$('.bio-body.ko',modal).forEach(n=>n.style.display='block');
    $$('.bio-body.en',modal).forEach(n=>n.style.display='block'); }
  function setBioLang(c){ setThumb(c); if(c==='en') showEN(); else if(c==='hy') showHY(); else showKR(); localStorage.setItem('dz_bio_lang',c); }

  btns.forEach(b=>b.addEventListener('click',()=>setBioLang(b.dataset.bioLang)));

  function setExpoOpen(open){ expoSlide?.setAttribute('data-open',open?'true':'false'); expoToggle?.setAttribute('aria-expanded',open?'true':'false'); }
  function open(){
    if(!modal) return;
    modal.hidden=false; document.body.style.overflow='hidden';
    const site=document.body.classList.contains('english')?'en':document.body.classList.contains('hybrid')?'hy':'kr';
    setBioLang(localStorage.getItem('dz_bio_lang')||site);
    setExpoOpen(false);
    // focus trap
    const focusables=()=>Array.from(modal.querySelectorAll('a[href],button,[tabindex]:not([tabindex="-1"])')).filter(x=>x.offsetParent!==null);
    const first=()=>focusables()[0], last=()=>focusables().slice(-1)[0];
    modal.addEventListener('keydown',trap); first()?.focus();
    function trap(e){ if(e.key!=='Tab')return; const f=focusables(); if(!f.length)return;
      if(e.shiftKey && document.activeElement===f[0]){e.preventDefault(); last().focus()}
      else if(!e.shiftKey && document.activeElement===last()){e.preventDefault(); first().focus()}
    }
  }
  function close(){ if(!modal) return; modal.hidden=true; document.body.style.overflow=''; }

  closeBtn?.addEventListener('click',close);
  modal?.querySelector('.bio-backdrop')?.addEventListener('click',close);
  expoToggle?.addEventListener('click',()=>setExpoOpen(expoToggle.getAttribute('aria-expanded')!=='true'));

  // sync with site language if user didn't set bio preference
  document.addEventListener('dz-lang-change',ev=>{
    const pref=localStorage.getItem('dz_bio_lang'); if(!pref){ setBioLang(ev.detail==='en'?'en':ev.detail==='hy'?'hy':'kr'); }
  });

  return {open,close};
})();

/* Works loader (5Ã—20) */
(async function(){
  const MAP={pray:"Light & Memory",human:"Human Prayer",rebirth:"Rebirth",exist:"Existence",cosmos:"Cosmos"};
  const panels={pray:$('#panel-pray'),human:$('#panel-human'),rebirth:$('#panel-rebirth'),exist:$('#panel-exist'),cosmos:$('#panel-cosmos')};
  async function getCB(){try{const r=await fetch('/data/cachebust.json',{cache:'no-store'});const j=await r.json();return j.v||j.ts||Date.now()}catch{return Date.now()}}
  const CB=await getCB();
  async function loadJSON(url){const r=await fetch(url,{cache:'no-store'}); if(!r.ok) throw 0; return r.json()}
  async function loadWorks(){
    try{ return await loadJSON('/data/works.json?cb='+CB) }
    catch(_){ try{ return await loadJSON('/artworks.json?cb='+CB) } catch(__){ return {[MAP.pray]:[],[MAP.human]:[],[MAP.rebirth]:[],[MAP.exist]:[],[MAP.cosmos]:[]} } }
  }
  const WORKS=await loadWorks();
  const isKR=()=>!document.body.classList.contains('english');
  function cardHTML(w){
    const title=isKR()?(w.title_kr||w.title_en||''):(w.title_en||w.title_kr||'');
    const meta=isKR()?(w.material_kr||''):(w.material_en||'');
    const size=isKR()?(w.size_kr||''):(w.size_en||'');
    const year=w.year||''; const file=encodeURIComponent((w.image||'').trim());
    const ssrc=`/images/standard/${file}?cb=${CB}`; const zsrc=`/images/zoom/${file}?cb=${CB}`;
    const alt=[title,meta,size,year].filter(Boolean).join('Â·');
    return `<article class="card" data-zoom="${zsrc}"><img loading="lazy" decoding="async" data-src="${ssrc}" alt="${alt}"></article>`;
  }
  async function renderPanel(host,key){
    if(!host) return;
    const list=Array.isArray(WORKS[key])?WORKS[key].slice(0,20):[];
    if(!list.length){host.innerHTML=`<div class="grid"><article class="card visible" style="grid-column:1/-1;padding:20px;text-align:center;opacity:.8">No works yet. Upload works JSON and images.</article></div>`;return}
    host.innerHTML=`<div class="grid">${list.map(cardHTML).join('')}</div>`;
    try{
      const io=new IntersectionObserver(es=>{es.forEach(e=>{if(e.isIntersecting){const img=e.target;if(img.dataset.src){img.src=img.dataset.src;img.removeAttribute('data-src')}img.closest('.card')?.classList.add('visible');io.unobserve(img)}})},{rootMargin:'200px'});
      $$(`#${host.id} img[loading][data-src]`).forEach(i=>io.observe(i));
    }catch{}
  }
  async function renderAll(){
    await Promise.all([
      renderPanel(panels.pray,MAP.pray),
      renderPanel(panels.human,MAP.human),
      renderPanel(panels.rebirth,MAP.rebirth),
      renderPanel(panels.exist,MAP.exist),
      renderPanel(panels.cosmos,MAP.cosmos)
    ]);
  }
  await renderAll();
  document.addEventListener('dz-lang-change',renderAll);
  $$('.tabs .tab').forEach(b=>{
    b.addEventListener('click',()=>{
      $$('.tabs .tab').forEach(x=>x.classList.remove('active'));
      b.classList.add('active');
      $$('.tabpanel').forEach(p=>p.classList.remove('active'));
      $('#panel-'+b.dataset.panel)?.classList.add('active');
    });
  });
})();

/* Lightbox */
(function(){
  const lb=$('#lightbox'),img=$('#lbImg'),cap=$('#lbCap'),meta=$('#lbMeta'),prev=$('#lbPrev'),next=$('#lbNext'),close=$('#lbClose');
  if(!lb||!img) return;
  let list=[],idx=0,zoom=1,ox=0,oy=0,drag=false,sx=0,sy=0;
  function collect(){
    const panel=document.querySelector('.tabpanel.active')||$('#panel-pray');
    if(!panel){list=[];return}
    list=Array.from(panel.querySelectorAll('.card')).map(c=>({z:c.getAttribute('data-zoom'),alt:c.querySelector('img')?.alt||''})).filter(x=>x.z);
  }
  function openAt(i){
    if(!list.length) return;
    idx=(i+list.length)%list.length; img.src=list[idx].z; cap.textContent=list[idx].alt; meta.textContent=`${idx+1} / ${list.length}`;
    zoom=1;ox=oy=0;apply(); lb.classList.add('on'); lb.setAttribute('aria-hidden','false');
  }
  function apply(){img.style.transform=`translate(${ox}px,${oy}px) scale(${zoom})`; img.style.cursor=zoom>1?'grab':'zoom-in'}
  function hide(){lb.classList.remove('on'); lb.setAttribute('aria-hidden','true')}
  document.addEventListener('click',e=>{
    const card=e.target.closest('.card'); if(!card) return;
    const panel=document.querySelector('.tabpanel.active')||$('#panel-pray');
    const cards=Array.from(panel.querySelectorAll('.card')); collect(); openAt(Math.max(0,cards.indexOf(card)));
  });
  prev?.addEventListener('click',()=>openAt(idx-1));
  next?.addEventListener('click',()=>openAt(idx+1));
  close?.addEventListener('click',hide);
  $('#lightbox')?.addEventListener('click',e=>{if(e.target===lb) hide()});
  lb.addEventListener('wheel',e=>{
    if(!lb.classList.contains('on')) return; e.preventDefault();
    const d=e.deltaY>0?0.9:1.1, pz=zoom; zoom=Math.min(5,Math.max(1,zoom*d));
    if(zoom===1){ox=oy=0}else{
      const r=img.getBoundingClientRect(); const cx=e.clientX-r.left-r.width/2-ox; const cy=e.clientY-r.top-r.height/2-oy;
      ox-=cx*(zoom/pz-1); oy-=cy*(zoom/pz-1);
    } apply();
  },{passive:false});
  img.addEventListener('mousedown',e=>{if(zoom===1)return; drag=true; sx=e.clientX-ox; sy=e.clientY-oy; img.style.cursor='grabbing'});
  window.addEventListener('mousemove',e=>{if(!drag)return; ox=e.clientX-sx; oy=e.clientY-sy; apply()});
  window.addEventListener('mouseup',()=>{drag=false; if(zoom>1) img.style.cursor='grab'});
  window.addEventListener('keydown',e=>{if(!lb.classList.contains('on'))return; if(e.key==='Escape')hide(); else if(e.key==='ArrowLeft')openAt(idx-1); else if(e.key==='ArrowRight')openAt(idx+1); else if(e.key==='+'){zoom=Math.min(zoom*1.25,5);apply()} else if(e.key==='-'){zoom=Math.max(zoom/1.25,1); if(zoom===1){ox=oy=0} apply()}});
})();

/* Reports demo & filter */
(function(){
  const wrap=$('.reports-omega'); const grid=$('#reportGrid'); const toggle=$('#reportsToggle');
  if(!wrap||!grid||!toggle) return;
  wrap.classList.add('is-collapsed');

  const items=Array.from({length:12},(_,i)=>({
    id:`DCAR${String(i+1).padStart(2,'0')}`,
    title_kr:`DCAR-${String(i+1).padStart(2,'0')} â€” (KR) ì œëª© ì˜ˆì‹œ`,
    title_en:`DCAR-${String(i+1).padStart(2,'0')} â€” (EN) Sample Title`,
    snippet_kr:`(KR) ë³´ê³ ì„œ ê°œìš” í…ìŠ¤íŠ¸ê°€ ì—¬ê¸°ì— ë“¤ì–´ê°‘ë‹ˆë‹¤. ì² í•™ì  ë‹¨ìƒ, ì‘ì—… ë…¸íŠ¸, ì „ì‹œ ë©”ëª¨ ë“±.`,
    snippet_en:`(EN) Report abstract here: philosophical notes, studio log, exhibition memoranda, etc.`,
    cat:(i%3===0?'theory':i%3===1?'archive':'practice'),
    n:i+1
  }));

  function render(cat){
    const list=(cat==='all')?items:items.filter(x=>x.cat===cat);
    grid.innerHTML=list.map(r=>`
      <article class="r-card">
        <div class="r-in">
          <div class="r-meta">
            <span class="r-badge">DCAR-${String(r.n).padStart(2,'0')}-2025</span>
            <span class="r-badge pdf">PDF</span>
          </div>
          <h3 class="r-title">${r.title_kr} Â· ${r.title_en}</h3>
          <p class="r-sub">/reports/${r.id}.md</p>
          <div class="r-body">
            <div class="ko">${r.snippet_kr}</div>
            <hr class="sep" style="border:0;border-top:1px dashed #2a3a78;margin:10px 0">
            <div class="en">${r.snippet_en}</div>
          </div>
          <div class="r-actions">
            <a href="/reports/print-preview.html?file=${r.id}.md" target="_blank" rel="noopener">ë¯¸ë¦¬ë³´ê¸°Â·ì¸ì‡„ / Print</a>
            <button data-open="${r.id}">ì „ì²´ ë³´ê¸° / Open</button>
          </div>
        </div>
      </article>
    `).join('');
  }
  render('all');

  $$('.r-tab').forEach(t=>{
    t.addEventListener('click',()=>{
      $$('.r-tab').forEach(x=>x.classList.remove('is-active'));
      t.classList.add('is-active'); render(t.dataset.r);
    });
  });
  grid.addEventListener('click',e=>{
    const id=e.target.getAttribute('data-open'); if(!id) return;
    const w=window.open(`/reports/print-preview.html?file=${encodeURIComponent(id+'.md')}`,'_blank'); if(w) w.focus();
  });
  function setOpen(open){
    wrap.classList.toggle('is-collapsed',!open);
    toggle.setAttribute('aria-expanded',open?'true':'false');
    toggle.textContent=open?'Close Reports':'Open Reports';
  }
  toggle.addEventListener('click',()=>setOpen(toggle.getAttribute('aria-expanded')!=='true'));
})();

/* Ambient sound (same behavior) + progress hint width */
(function(){
  const btn=$('#soundBtn'), stopBtn=$('#soundStopBtn'), bar=$('#fftBar span');
  if(!btn||!stopBtn||!bar) return;
  let ac=null,nodes=null,on=false,analyser=null,rafId=null;
  async function ensureAC(){if(!ac){const C=window.AudioContext||window.webkitAudioContext;ac=new C({latencyHint:'interactive'})} if(ac.state==='suspended') await ac.resume(); return ac}
  function G(v){const g=ac.createGain();g.gain.value=v;return g}
  function O(t,f){const o=ac.createOscillator();o.type=t;o.frequency.value=f;return o}
  function ir(len=1.6,decay=2.6){const sr=ac.sampleRate,n=Math.floor(sr*len),buf=ac.createBuffer(2,n,sr);for(let ch=0;ch<2;ch++){const d=buf.getChannelData(ch);for(let i=0;i<n;i++) d[i]=(Math.random()*2-1)*Math.pow(1-i/n,decay)}return buf}
  function draw(){if(!analyser){rafId=requestAnimationFrame(draw);return}const arr=new Uint8Array(analyser.frequencyBinCount);analyser.getByteTimeDomainData(arr);let avg=0;for(let i=0;i<arr.length;i++)avg+=Math.abs(arr[i]-128);avg/=arr.length;bar.style.width=Math.min(180,Math.max(10,avg*2.2))+'px';rafId=requestAnimationFrame(draw)}
  async function start(){
    if(on) return; await ensureAC();
    const base=G(0.12),sub=G(0.05),mid=G(0.06),shim=G(0.012),pan=ac.createStereoPanner();
    const low=O('sine',62),low2=O('sine',124),floor=O('sine',31),ch1=O('sine',432),ch2=O('sine',528);
    const lfo1=O('sine',7.7),lfo2=O('sine',5.2),lpg=G(0.08),lpg2=G(0.06); lfo1.connect(lpg).connect(base.gain); lfo2.connect(lpg2).connect(base.gain);
    const lp=ac.createBiquadFilter(); lp.type='lowpass'; lp.frequency.value=880; lp.Q.value=0.8;
    const bp=ac.createBiquadFilter(); bp.type='bandpass'; bp.frequency.value=120; bp.Q.value=0.7;
    const conv=ac.createConvolver(); conv.buffer=ir(); const wet=G(0.25),dry=G(0.85);
    low.connect(base).connect(bp).connect(lp); low2.connect(mid).connect(bp); floor.connect(sub).connect(bp); ch1.connect(shim).connect(lp); ch2.connect(shim).connect(lp);
    lp.connect(dry).connect(pan).connect(ac.destination); lp.connect(wet).connect(conv).connect(pan).connect(ac.destination); bp.connect(dry).connect(pan); bp.connect(wet).connect(conv);
    analyser=ac.createAnalyser(); analyser.fftSize=512; pan.connect(analyser);
    [low,low2,floor,ch1,ch2].forEach(o=>o.start());
    [base.gain,sub.gain,mid,shim.gain].forEach(g=>{const t=g.value; try{g.setValueAtTime(Math.max(0.0001,t*0.001),ac.currentTime); g.exponentialRampToValueAtTime(t,ac.currentTime+1.2)}catch{}});
    (function panLoop(){if(!ac||!pan)return; try{pan.pan.value=Math.sin(performance.now()*0.000012)*0.35}catch{} if(on) requestAnimationFrame(panLoop)})();
    (function breath(){if(!ac)return; try{lp.frequency.setTargetAtTime(720+Math.sin(ac.currentTime*0.33)*240,ac.currentTime,0.28)}catch{} if(on) setTimeout(breath,160)})();
    nodes={low,low2,floor,ch1,ch2,base,sub,mid,shim,lp,bp,conv,wet,dry,pan}; on=true; btn.disabled=true; stopBtn.disabled=false; draw();
  }
  function stop(){
    if(!on||!nodes||!ac) return;
    const {low,low2,floor,ch1,ch2,base,sub,mid,shim}=nodes, t=ac.currentTime;
    [base.gain,sub.gain,mid,shim.gain].forEach(g=>{try{g.cancelScheduledValues(0);g.exponentialRampToValueAtTime(0.0001,t+1.6)}catch{}});
    setTimeout(()=>{[low,low2,floor,ch1,ch2].forEach(o=>{try{o.stop()}catch{}})},1700);
    on=false; btn.disabled=false; stopBtn.disabled=true; cancelAnimationFrame(rafId); bar.style.width='0px';
  }
  const unlock=async()=>{try{await ensureAC()}catch{} window.removeEventListener('touchend',unlock); window.removeEventListener('click',unlock)}
  window.addEventListener('touchend',unlock,{once:true}); window.addEventListener('click',unlock,{once:true});
  btn.addEventListener('click',start); stopBtn.addEventListener('click',stop);

  // bottom progress hint width
  function upd(){
    const h=document.documentElement;
    const scrolled=(h.scrollTop)/(h.scrollHeight-h.clientHeight);
    h.style.setProperty('--scrollX',Math.max(.06,Math.min(1,scrolled||0.0001)));
  }
  document.addEventListener('scroll',upd,{passive:true}); window.addEventListener('resize',upd,{passive:true}); upd();
})();
</script>