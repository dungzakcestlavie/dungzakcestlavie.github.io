<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>Lightflow Admin Ω.13.2 — Unified + iPhone Stable</title>
<style>
:root{
  --bg:#060c1d; --card:#0c1428; --fg:#e9d59a; --fg2:#c2c9e4;
  --btn:#d6b46c; --ok:#65e6a0; --bad:#ff6767; --blue:#0e193a;
}
body{
  margin:0;padding:0;background:var(--bg);color:var(--fg2);
  font-family:"Pretendard",system-ui,sans-serif;font-size:15px;line-height:1.5;
}
header{
  padding:16px 12px;background:linear-gradient(90deg,#091224,#1a2950);
  font-weight:700;color:var(--fg);font-size:20px;
}

.admin-nav{
  display:flex;gap:8px;padding:12px;background:var(--bg);
  position:sticky;top:0;z-index:9999;
}
.admin-nav button{
  flex:1;padding:10px;border-radius:24px;border:none;
  background:var(--blue);color:var(--fg2);font-weight:600;
}
.admin-nav button.active{background:var(--btn);color:#000;}

section{padding:16px;}
.card{
  background:var(--card);border-radius:16px;padding:16px;margin-bottom:16px;
}
.card h2{margin:0 0 12px;color:var(--fg);font-size:18px;}

input,select,textarea{
  width:100%;padding:12px;margin:6px 0 12px;
  border-radius:10px;border:1px solid #222;background:#0a1122;color:var(--fg2);
}
button{cursor:pointer;touch-action:manipulation;}

.btn-main{background:var(--btn);}
.btn-ok{background:var(--ok);}
.btn-bad{background:var(--bad);color:#fff;}
.btn-blue{background:var(--blue);}

textarea{height:180px;white-space:pre-wrap;}

.hidden{display:none}
</style>
</head>
<body>

<header>✨ Lightflow Admin Ω.13.2 — Unified • iPhone-Stable</header>

<!-- NAV -->
<div class="admin-nav">
  <button class="tab active" data-tab="home">Home</button>
  <button class="tab" data-tab="art">Artworks</button>
  <button class="tab" data-tab="dcar">DCAR</button>
  <button class="tab" data-tab="trigger">Trigger</button>
  <button class="tab" data-tab="settings">Settings</button>
</div>

<!-- HOME -->
<div id="home" class="tab-page">
<section class="card">
<h2>1. GitHub 연결</h2>
<input id="owner" placeholder="Owner (예: dungzakcestlavie)">
<input id="repo" placeholder="Repo (예: dungzakcestlavie.github.io)">
<input id="branch" placeholder="Branch" value="main">
<input id="token" placeholder="GitHub Token (repo 권한)" type="password">
<button type="button" class="btn-main" onclick="saveCfg()">저장</button>
<button type="button" class="btn-ok" onclick="testConn()">연결 테스트</button>
<button type="button" class="btn-blue" onclick="touchPages()">🚀 Pages 캐시 무효화</button>
<button type="button" class="btn-bad" onclick="logout()">토큰 삭제</button>
<div id="status"></div>
</section>
</div>

<!-- ARTWORKS -->
<div id="art" class="tab-page hidden">
<section class="card">
<h2>2. 작품 관리</h2>
<select id="artSection">
  <option>I Light & Memory</option>
  <option>II Human Being</option>
  <option>III Rebirth</option>
  <option>IV Existence</option>
  <option>V Cosmos</option>
</select>

<input id="artId" placeholder="ID (예: light-01)">
<input id="artTitle" placeholder="Title">
<input id="artYear" placeholder="Year">
<input id="artMedium" placeholder="Medium">
<input id="artSize" placeholder="Size (ex: 162.2 × 130.3 cm)">
<input id="artFile" type="file">

<button type="button" class="btn-main" onclick="uploadArtwork()">업로드+등록</button>
<button type="button" class="btn-bad" onclick="deleteArtwork()">삭제</button>
</section>
</div>

<!-- DCAR -->
<div id="dcar" class="tab-page hidden">
<section class="card">
<h2>3. 미학 보고서 (DCAR)</h2>
<select id="dcarId">
  <option>dcar01</option>
  <option>dcar02</option>
  <option>dcar03</option>
  <option>dcar04</option>
  <option>dcar05</option>
  <option>dcar06</option>
  <option>dcar07</option>
  <option>dcar08</option>
</select>

<textarea id="dcarKR" placeholder="한글 본문 붙여넣기"></textarea>
<textarea id="dcarEN" placeholder="English text paste"></textarea>

<button type="button" class="btn-main" onclick="saveDCAR()">저장</button>
</section>
</div>

<!-- TRIGGER -->
<div id="trigger" class="tab-page hidden">
<section class="card">
<h2>4. Pages Trigger</h2>
<button type="button" class="btn-main" onclick="commitTouch()">✏️ Commit Touch</button>
<button type="button" class="btn-ok" onclick="pagesBuild()">🚀 Pages Build 요청</button>
<button type="button" class="btn-bad" onclick="resetLocal()">localStorage 초기화</button>
</section>
</div>

<!-- SETTINGS -->
<div id="settings" class="tab-page hidden">
<section class="card">
<h2>5. Settings</h2>
<button type="button" class="btn-blue" onclick="window.location.href='/'">홈 보기</button>
<button type="button" class="btn-blue" onclick="window.location.reload()">새로고침</button>
<button type="button" class="btn-bad" onclick="resetLocal()">localStorage 초기화</button>
</section>
</div>

<script>
/* NAV Tabs */
document.querySelectorAll(".tab").forEach(btn=>{
  btn.addEventListener("click",()=>{
    document.querySelectorAll(".tab").forEach(b=>b.classList.remove("active"));
    btn.classList.add("active");
    const t=btn.dataset.tab;
    document.querySelectorAll(".tab-page").forEach(p=>p.classList.add("hidden"));
    document.getElementById(t).classList.remove("hidden");
  });
});

/* Local config */
function saveCfg(){
  localStorage.setItem("owner",owner.value);
  localStorage.setItem("