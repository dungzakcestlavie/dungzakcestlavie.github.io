<head>
  <!-- =========================
  â‘  HEAD / STYLE  (Lightflow âˆ®27 Â· caption micro fix)
  ========================= -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="color-scheme" content="dark light" />
  <meta name="theme-color" content="#070A14" />
  <meta name="format-detection" content="telephone=no,address=no,email=no" />

  <title>ë“±ì‘ ç‡ˆé…Œ DUNGZAK CESTLAVIE âˆ®27 Â· Lightflow</title>
  <meta name="description" content="ë“±ì‘ ç‡ˆé…Œ DUNGZAK CESTLAVIE Â· Lightflow Â· Light Â· Memory Â· Being" />
  <link rel="canonical" href="https://dungzak.art/" />

  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="ë“±ì‘ ç‡ˆé…Œ DUNGZAK CESTLAVIE" />
  <meta property="og:title" content="Lightflow Â· Light Â· Memory Â· Being" />
  <meta property="og:description" content="Painting, Aesthetic Reports (DCAR), and the archive of DUNGZAK CESTLAVIE." />
  <meta property="og:url" content="https://dungzak.art/" />
  <meta property="og:image" content="https://dungzak.art/og-lightflow.jpg" />

  <style>
    :root {
      color-scheme: dark;
      --navy: #050814;
      --navy-soft: #090e20;
      --card: #111622;
      --line: rgba(255,255,255,0.04);
      --gold: #d7b86a;
      --gold-soft: rgba(215,184,106,0.72);
      --gold-faint: rgba(215,184,106,0.32);
      --text-main: #f4efe4;
      --text-sub: rgba(244,239,228,0.78);
      --text-dim: rgba(244,239,228,0.55);
      --radius-lg: 22px;
      --radius-md: 16px;
      --radius-pill: 999px;
      --shadow-soft: 0 18px 45px rgba(0,0,0,0.75);
      --font-ui: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Segoe UI", sans-serif;
    }

    * {
      box-sizing: border-box;
    }

    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at 0% 0%, #19223b 0, #050814 40%, #000 100%);
      color: var(--text-main);
      font-family: var(--font-ui);
      -webkit-font-smoothing: antialiased;
    }

    body {
      display: flex;
      flex-direction: column;
    }

    canvas#waves {
      position: fixed;
      inset: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      opacity: 0.65;
      z-index: 0;
    }

    .page-wrap {
      position: relative;
      z-index: 1;
      min-height: 100vh;
      padding: 14px 10px 80px;
    }

    @media (min-width: 768px) {
      .page-wrap {
        padding: 24px 32px 96px;
      }
    }

    /* -----------------------------
     *  ì–¸ì–´ ê°€ì‹œì„± (KR / EN / HY)
     * --------------------------- */
    .ko, .en {
      transition: opacity 0.16s ease;
    }

    body.korean .ko { display: inline; opacity: 1; }
    body.korean .en { display: none; }

    body.english .ko { display: none; }
    body.english .en { display: inline; opacity: 1; }

    body.hybrid .ko,
    body.hybrid .en { display: inline; opacity: 1; }

    /* ë¸”ë¡ ìš”ì†Œì¼ ê²½ìš° */
    .block {
      display: block;
    }

    /* -----------------------------
     *  ìƒë‹¨ ë¸Œëœë“œ / ë„¤ë¹„
     * --------------------------- */
    header.site-header {
      position: sticky;
      top: 0;
      z-index: 10;
      padding-bottom: 10px;
      margin-bottom: 18px;
      backdrop-filter: blur(22px);
      background: linear-gradient(
        to bottom,
        rgba(5,8,20,0.96),
        rgba(5,8,20,0.78),
        transparent
      );
    }

    header.site-header-inner {
      max-width: 1120px;
      margin: 0 auto;
    }

    .brand-line {
      display: flex;
      flex-direction: column;
      gap: 4px;
      padding: 6px 4px 10px;
    }

    .brand-main {
      font-size: 16px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: var(--gold);
      font-weight: 500;
    }

    .brand-sub {
      font-size: 10px;
      letter-spacing: 0.26em;
      text-transform: uppercase;
      color: var(--text-dim);
    }

    nav.primary {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 8px;
    }

    nav.primary button {
      border-radius: var(--radius-pill);
      border: 1px solid rgba(215,184,106,0.4);
      background: radial-gradient(circle at 0 0, rgba(215,184,106,0.21), rgba(9,12,22,0.96));
      padding: 7px 16px;
      font-size: 12px;
      color: var(--gold-soft);
      text-transform: none;
      letter-spacing: 0.06em;
      cursor: pointer;
      outline: none;
      transition: background 0.16s ease, border-color 0.16s ease, color 0.16s ease, transform 0.12s ease;
    }

    nav.primary button.active {
      background: radial-gradient(circle at 0 0, rgba(215,184,106,0.55), #101320);
      color: #080a13;
      border-color: rgba(237,226,196,0.9);
      box-shadow: 0 0 0 1px rgba(247,232,184,0.25);
      transform: translateY(-0.5px);
    }

    nav.primary button:hover {
      border-color: rgba(247,232,184,0.9);
    }

    .lang-switch {
      display: inline-flex;
      gap: 6px;
      margin-top: 10px;
    }

    .lang-switch button {
      border-radius: var(--radius-pill);
      border: 1px solid rgba(215,184,106,0.35);
      background: rgba(7,9,18,0.96);
      padding: 5px 13px;
      font-size: 11px;
      color: var(--text-sub);
      letter-spacing: 0.08em;
      text-transform: uppercase;
      cursor: pointer;
      transition: background 0.16s ease, border-color 0.16s ease, color 0.16s ease;
    }

    .lang-switch button.active {
      background: radial-gradient(circle at 0 0, rgba(215,184,106,0.7), #141720);
      color: #050814;
      border-color: rgba(247,232,184,0.9);
    }

    /* -----------------------------
     *  ë©”ì¸ ì„¹ì…˜ ê³µí†µ
     * --------------------------- */
    main {
      max-width: 1120px;
      margin: 0 auto;
    }

    main > section {
      display: none;
    }

    main > section.is-active {
      display: block;
    }

    /* -----------------------------
     *  Works
     * --------------------------- */
    #works {
      margin-top: 4px;
    }

    .works-shell {
      margin-top: 14px;
      border-radius: var(--radius-lg);
      background:
        linear-gradient(
          135deg,
          rgba(215,184,106,0.18),
          rgba(80,100,160,0.18),
          rgba(9,11,24,0.9)
        );
      padding: 14px 12px 16px;
      box-shadow: var(--shadow-soft);
      border: 1px solid rgba(255,255,255,0.07);
    }

    .works-shell h2 {
      margin: 0 0 8px;
      font-size: 18px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
    }

    .tabs {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 10px;
    }

    .tabs .tab {
      border-radius: var(--radius-pill);
      border: 1px solid rgba(255,255,255,0.08);
      background: rgba(7,10,22,0.9);
      padding: 5px 13px;
      font-size: 11px;
      color: var(--text-sub);
      cursor: pointer;
      white-space: nowrap;
      transition: background 0.15s ease, border-color 0.15s ease, transform 0.12s ease;
    }

    .tabs .tab.active {
      background: radial-gradient(circle at 0 0, rgba(215,184,106,0.7), #10131f);
      border-color: rgba(247,232,184,0.9);
      color: #050814;
      transform: translateY(-0.5px);
    }

    .works-panels {
      margin-top: 6px;
    }

    .works-panel {
      display: none;
    }

    .works-panel.active {
      display: block;
    }

    .w-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0,1fr));
      gap: 14px;
    }

    @media (min-width: 900px) {
      .w-grid {
        grid-template-columns: repeat(4, minmax(0,1fr));
        gap: 18px;
      }
    }

    .w-card {
      background: radial-gradient(circle at 0 0, rgba(255,255,255,0.04), rgba(5,7,16,0.98));
      border-radius: 18px;
      overflow: hidden;
      border: 1px solid rgba(255,255,255,0.07);
      box-shadow: 0 12px 28px rgba(0,0,0,0.8);
      cursor: pointer;
      display: flex;
      flex-direction: column;
    }

    .w-thumb {
      width: 100%;
      display: block;
      object-fit: cover;
      aspect-ratio: 4/5;
    }

    .w-meta {
      padding: 10px 11px 20px;
    }

    .w-title {
      font-size: 15.5px;
      font-weight: 500;
      letter-spacing: 0.02em;
      margin-bottom: 4px;
      color: var(--text-main);
    }

    .w-sub {
      white-space: pre-line;
      font-size: 13px;
      line-height: 1.22;
      color: var(--text-sub);
    }

    /* --- ìº¡ì…˜ ëª¨ë°”ì¼ ì¶•ì†Œ ë²„ì „ (ìš”ì²­ ë°˜ì˜) --- */
    @media (max-width: 768px) {
      .w-meta {
        padding: 8px 9px 18px;
      }
      .w-title {
        font-size: 14.8px;
        line-height: 1.18;
      }
      .w-sub {
        font-size: 12px;
        line-height: 1.16;
        opacity: 0.9;
      }
      .w-card {
        border-radius: 16px;
      }
    }

    .w-msg {
      padding: 18px 14px;
      font-size: 13px;
      color: var(--text-sub);
    }

    /* -----------------------------
     *  Lightbox
     * --------------------------- */
    #lightbox {
      position: fixed;
      inset: 0;
      background: radial-gradient(circle at 10% 0%, rgba(215,184,106,0.18), rgba(0,0,0,0.95));
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 18px;
      z-index: 40;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.16s ease;
    }

    #lightbox.is-open {
      opacity: 1;
      pointer-events: auto;
    }

    .lb-inner {
      max-width: 1000px;
      width: 100%;
      max-height: 100%;
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    #lbImg {
      max-height: 70vh;
      width: auto;
      margin: 0 auto;
      border-radius: 18px;
      box-shadow: 0 24px 60px rgba(0,0,0,0.9);
    }

    #lbCap {
      white-space: pre-line;
      font-size: 13px;
      color: var(--text-main);
      padding: 10px 4px;
    }

    #lbClose {
      position: absolute;
      top: 18px;
      right: 18px;
      width: 32px;
      height: 32px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(5,7,14,0.9);
      color: var(--text-main);
      font-size: 15px;
      cursor: pointer;
    }

    /* -----------------------------
     *  Reports
     * --------------------------- */
    #reports {
      margin-top: 10px;
    }

    .reports-shell {
      margin-top: 12px;
      padding: 14px 12px 20px;
      border-radius: var(--radius-lg);
      background: radial-gradient(circle at 0 0, rgba(215,184,106,0.18), rgba(7,9,18,0.96));
      border: 1px solid rgba(255,255,255,0.08);
      box-shadow: var(--shadow-soft);
    }

    .reports-shell h2 {
      margin: 0 0 10px;
      font-size: 18px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
    }

    .r-tabs {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 10px;
    }

    .r-tab {
      border-radius: var(--radius-pill);
      border: 1px solid rgba(255,255,255,0.08);
      background: rgba(5,8,20,0.96);
      padding: 5px 11px;
      font-size: 11px;
      color: var(--text-sub);
      cursor: pointer;
      letter-spacing: 0.05em;
      text-transform: uppercase;
    }

    .r-tab.is-active {
      background: radial-gradient(circle at 0 0, rgba(215,184,106,0.7), #10131f);
      border-color: rgba(247,232,184,0.9);
      color: #050814;
    }

    #reportGrid {
      margin-top: 10px;
      display: grid;
      grid-template-columns: minmax(0,1fr);
      gap: 10px;
    }

    @media (min-width: 900px) {
      #reportGrid {
        grid-template-columns: repeat(2, minmax(0,1fr));
      }
    }

    .r-item {
      background: rgba(5,7,15,0.98);
      border-radius: 16px;
      padding: 11px 12px 14px;
      border: 1px solid rgba(255,255,255,0.07);
      box-shadow: 0 10px 26px rgba(0,0,0,0.8);
      font-size: 13px;
    }

    .r-item .t {
      font-weight: 500;
      margin-bottom: 5px;
    }

    .r-item .m {
      font-size: 11px;
      color: var(--text-dim);
      margin-bottom: 6px;
    }

    .r-item .s {
      font-size: 12px;
      color: var(--text-sub);
    }

    /* -----------------------------
     *  Artist Bio Modal
     * --------------------------- */
    #bio-modal[hidden] {
      display: none;
    }

    #bio-modal {
      position: fixed;
      inset: 0;
      z-index: 50;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .bio-backdrop {
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 10% 0%, rgba(215,184,106,0.18), rgba(0,0,0,0.96));
      backdrop-filter: blur(18px);
    }

    .bio-dialog {
      position: relative;
      max-width: 860px;
      width: 100%;
      margin: 0 16px;
      max-height: 80vh;
      border-radius: 22px;
      background: rgba(7,9,18,0.98);
      border: 1px solid rgba(255,255,255,0.15);
      box-shadow: 0 24px 70px rgba(0,0,0,0.95);
      padding: 16px 18px 18px;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .bio-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }

    .bio-title {
      font-size: 15px;
      font-weight: 500;
      color: var(--gold);
    }

    .bio-lang {
      display: inline-flex;
      gap: 6px;
    }

    .bio-lang .lang {
      border-radius: var(--radius-pill);
      border: 1px solid rgba(215,184,106,0.32);
      background: rgba(5,8,18,0.96);
      padding: 4px 12px;
      font-size: 11px;
      color: var(--text-sub);
      letter-spacing: 0.08em;
      text-transform: uppercase;
      cursor: pointer;
    }

    .bio-lang .lang.active {
      background: radial-gradient(circle at 0 0, rgba(215,184,106,0.75), #171a25);
      border-color: rgba(247,232,184,0.95);
      color: #050814;
    }

    .bio-close {
      width: 30px;
      height: 30px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.2);
      background: rgba(3,4,9,0.96);
      color: var(--text-main);
      font-size: 15px;
      cursor: pointer;
    }

    .bio-body {
      margin-top: 6px;
      padding-top: 8px;
      border-top: 1px solid rgba(255,255,255,0.09);
      overflow: auto;
      padding-right: 4px;
      font-size: 13px;
      line-height: 1.55;
      color: var(--text-sub);
    }

    .bio-body .bio-kr,
    .bio-body .bio-en {
      white-space: pre-line;
    }

    /* Bio ì–¸ì–´ ê°€ì‹œì„± */
    #bio-modal[data-bio="kr"] .bio-kr { display: block; }
    #bio-modal[data-bio="kr"] .bio-en { display: none; }

    #bio-modal[data-bio="en"] .bio-kr { display: none; }
    #bio-modal[data-bio="en"] .bio-en { display: block; }

    /* -----------------------------
     *  Sound bar (C ê³µëª…)
     * --------------------------- */
    #soundBarWrap {
      position: fixed;
      left: 0;
      right: 0;
      bottom: 18px;
      display: flex;
      justify-content: center;
      pointer-events: none;
      z-index: 30;
    }

    #fftBar {
      width: 120px;
      height: 3px;
      border-radius: 999px;
      background: radial-gradient(circle at 0 50%, rgba(215,184,106,0.26), rgba(4,6,12,0.95));
      overflow: hidden;
      box-shadow: 0 0 16px rgba(215,184,106,0.28);
      opacity: 0.4;
      pointer-events: auto;
      cursor: pointer;
    }

    #fftBar span {
      display: block;
      width: 0%;
      height: 100%;
      background: rgba(215,184,106,0.48);
      transition: width 0.22s ease-out;
    }

    /* -----------------------------
     *  Footer ë§í¬ (ì•„ì´ì½˜ë°”)
     * --------------------------- */
    footer.site-footer {
      margin-top: 26px;
      padding-top: 16px;
      border-top: 1px solid rgba(255,255,255,0.08);
      font-size: 11px;
      color: var(--text-dim);
    }

    .footer-links {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 8px;
    }

    .footer-links a {
      border-radius: var(--radius-pill);
      border: 1px solid rgba(215,184,106,0.38);
      padding: 6px 11px;
      font-size: 11px;
      text-decoration: none;
      color: var(--gold-soft);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .footer-links a span.icon {
      width: 14px;
      height: 14px;
      border-radius: 999px;
      border: 1px solid rgba(215,184,106,0.7);
    }

    .footer-copy {
      font-size: 10px;
      color: var(--text-dim);
    }

    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        scroll-behavior: auto !important;
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }
  </style>
</head>

<!-- ==========================================================
â‘¡ BODY / HTML  (ë“±ì‘ ì›ë¬¸ ê·¸ëŒ€ë¡œ)
========================================================== -->
<body class="korean">
  <!-- BACKGROUND -->
  <canvas id="waves" aria-hidden="true"></canvas>

  <!-- HEADER -->
  <header>
    <div class="brand">ë“±ì‘ ç‡ˆé…Œ DUNGZAK CESTLAVIE âˆ®27</div>
    <div class="brand-sub">LIGHTFLOW Â· LIGHT Â· MEMORY Â· BEING</div>

    <nav class="primary" aria-label="Primary">
      <button type="button" data-target="poem" class="active" aria-current="page">Poem</button>
      <button type="button" data-target="works">Works</button>
      <button type="button" data-target="reports">Reports</button>
      <button type="button" id="tab-bio">Artist Bio</button>
    </nav>

    <div class="lang" aria-label="Language">
      <button type="button" id="koBtn" class="active">KR</button>
      <button type="button" id="enBtn">EN</button>
      <button type="button" id="hyBtn">KR+EN</button>
    </div>
  </header>

  <main>
    <!-- 1) POEM -->
    <section id="poem" class="hero">
      <h1 class="ko">ë¹› Â· ê¸°ì–µ Â· ì¡´ì¬</h1>
      <h1 class="en">Light Â· Memory Â· Being</h1>

      <div class="poemwrap">
        <p class="ko" style="font-weight:700">ã€ˆíŒŒë¦¬ì˜ ì„¼ëŠê°•ã€‰</p>
        <p class="en" style="font-weight:700">ã€ˆThe Seine of Parisã€‰</p>
        <p class="ko" style="opacity:.85;margin-top:4px">ë“±ì‘ ç‡ˆé…Œ DUNGZAK CESTLAVIE</p>
        <p class="en" style="opacity:.85;margin-top:4px">DUNGZAK CESTLAVIE</p>

        <div class="poem">
          <p class="ko">ì„¼ëŠê°• ë‹¤ë¦¬ ì•„ë˜, ë…¸íŠ¸ë¥´ë‹´ ì„±ë‹¹ì˜ ì´›ë¶ˆì´ ì¼œì§ˆ ë¬´ë µâ€”</p>
          <p class="en">Beneath the bridge of the Seine, as the candles of Notre-Dame begin to glowâ€”</p>

          <p class="ko">ì†Œë°•í•œ ê¿ˆë“¤ì„ ì•ˆê³  ì‚¬ëŠ” ì‚¬ëŒë“¤ì´ ëª¨ì—¬ ì¶¤ì¶˜ë‹¤.</p>
          <p class="en">People who live with humble dreams gather to dance.</p>

          <p class="ko">ë¹™ê¸€ë¹™ê¸€ ëŒì•„ê°€ë©° ë‚´ë”›ëŠ” ë°œê±¸ìŒì˜ í™”ìŒ ìœ„ë¡œ,</p>
          <p class="en">Their circling steps form harmonies upon the rhythm of their feet,</p>

          <p class="ko">ë°”ì´ì˜¬ë¦°ì´ ìƒˆíŒŒë—ê³  ìƒ›ë…¸ë‘ì˜ ë¹›ì„ í©ë¿Œë¦¬ë©° ì›ƒëŠ”ë‹¤.</p>
          <p class="en">As violins scatter blue and golden light, laughing in brilliance.</p>

          <p class="ko">ê¿ˆê¾¸ëŠ” ì—¬ì¸ë“¤ê³¼ ê¿ˆê¾¸ëŠ” ë‚¨ì„±ë“¤ì´ ì†ì„ ì¡ê³ ,</p>
          <p class="en">Dreaming women and dreaming men clasp hands,</p>

          <p class="ko">ì‚¬ëŒì˜ í–¥ê¸°ë¥¼ ë§¡ìœ¼ë©° ì¬ë¹ ë¥¸ ìŒë¥ ì— ëª¸ì„ ë§¡ê¸´ë‹¤.</p>
          <p class="en">Breathing the scent of humanity, surrendering to the swift rhythm.</p>

          <p class="ko">ì•„ë‹´ê³¼ ì´ë¸Œì˜ ë³„ìêµ­ì´ ëˆˆë¬¼ë°©ìš¸ì²˜ëŸ¼ í˜ëŸ¬ë‚´ë¦¬ëŠ” ë‚˜ë¬´,</p>
          <p class="en">A tree where Adam and Eveâ€™s star-traces drip like tears,</p>

          <p class="ko">ê·¸ í’ê²½ ì†ì—ì„œ ì´ˆìŠ¹ë‹¬ì€ ì–´ì—¬ìœ í•˜ì–€ ë¯¸ì†Œë¥¼ í˜ë¦°ë‹¤.</p>
          <p class="en">In that scene, the crescent moon releases a tender white smile.</p>

          <p class="ko">ìƒ¤ë½, ìƒ¤ë½â€” ì¶¤ì‚¬ìœ„ì˜ ë¦¬ë“¬ì´ í™•ì¥ë ìˆ˜ë¡,</p>
          <p class="en">Sharak, sharakâ€” as the rhythm of dance expands,</p>

          <p class="ko">êµ¬ê²½í•˜ë˜ ì´ë“¤ë§ˆì € ì–´ê¹¨ì™€ í—ˆë¦¬ë¥¼ ë“¤ì©ì´ë©°,</p>
          <p class="en">Even the onlookers begin to sway their shoulders and waists,</p>

          <p class="ko">ì‚¬ë‘ì˜ ì…ë§ì¶¤ì„ ì˜ì‹í•œë‹¤.</p>
          <p class="en">Becoming aware of loveâ€™s gentle kiss.</p>

          <p class="ko">í˜ëŸ¬ê° ì†ì— í¬ê°œì§„ ìˆœê°„, ê·¸ë“¤ì€ ì˜í˜¼ì˜ ë°•ì œê°€ ë˜ì–´,</p>
          <p class="en">Within the flowing overlap of time, they become taxidermies of the soul,</p>

          <p class="ko">ë©ˆì¶¤ ì†ì— ì˜ì›ì„ ìƒˆê¸´ë‹¤.</p>
          <p class="en">inscribing eternity into stillness.</p>
        </div>
      </div>
    </section>

    <!-- 2) WORKS -->
    <section id="works">
      <h2 class="ko">ì‘í’ˆ ì•„ì¹´ì´ë¸Œ</h2>
      <h2 class="en">Artworks</h2>

      <div class="tabs" role="tablist">
        <button type="button" class="tab active" data-panel="pray">â…  ìš°ë¦¬ë¥¼ ìœ„í•´ ê¸°ë„í•´ ì£¼ì„¸ìš” Â· Pray for Us</button>
        <button type="button" class="tab" data-panel="human">â…¡ ì¸ê°„ Â· Human Being</button>
        <button type="button" class="tab" data-panel="rebirth">â…¢ ì •ì‹ ì˜ ì¬íƒ„ìƒ Â· Rebirth of Mind</button>
        <button type="button" class="tab" data-panel="exist">â…£ ì¡´ì¬ì˜ íšŒë³µ Â· Restoration of Being</button>
        <button type="button" class="tab" data-panel="cosmos">â…¤ ë¹›ì˜ ì´ˆì˜ì‹ Â· Metaconsciousness of Light</button>
      </div>

      <div id="panel-pray" class="tabpanel active"></div>
      <div id="panel-human" class="tabpanel"></div>
      <div id="panel-rebirth" class="tabpanel"></div>
      <div id="panel-exist" class="tabpanel"></div>
      <div id="panel-cosmos" class="tabpanel"></div>
    </section>

    <!-- 3) REPORTS -->
    <section id="reports">
      <h2 class="ko">ë¯¸í•™ ë³´ê³ ì„œ (DCAR Series)</h2>
      <h2 class="en">Aesthetic Reports (DCAR Series)</h2>

      <div class="reports-omega">
        <div class="r-head">
          <div class="r-tabs">
            <button type="button" class="r-tab is-active" data-r="all">All</button>
            <button type="button" class="r-tab" data-r="theory">Theory</button>
            <button type="button" class="r-tab" data-r="archive">Archive</button>
            <button type="button" class="r-tab" data-r="practice">Practice</button>
          </div>

          <button type="button" id="reportsToggle" class="r-toggle" aria-expanded="false">
            Open Reports
          </button>
        </div>

        <div id="reportGrid" class="r-grid"></div>
      </div>
    </section>
  </main>

  <!-- ARTIST BIO MODAL -->
  <div id="bio-modal" hidden>
    <div class="bio-backdrop"></div>

    <div class="bio-card" role="dialog" aria-modal="true" aria-labelledby="bio-title">
      <div class="bio-head">
        <h2 id="bio-title" class="ko">ì‘ê°€ ì†Œê°œ</h2>
        <h2 class="en">Artist Bio</h2>

        <div class="bio-lang">
          <button class="lang active" data-bio-lang="kr" aria-pressed="true">KR</button>
          <button class="lang" data-bio-lang="en" aria-pressed="false">EN</button>
        </div>

        <button class="bio-close" aria-label="Close">âœ•</button>
      </div>

      <button class="expo-kicker" id="expoToggle" aria-expanded="false">
        <span class="ko">ë“±ì‘ ç‡ˆé…Œ DUNGZAK CESTLAVIE Â· êµ­ë‚´ì™¸ ê°œì¸ì „ 29íšŒ â–¾</span>
        <span class="en">DUNGZAK CESTLAVIE Â· 29 solo exhibitions worldwide â–¾</span>
      </button>

      <div class="slide-wrap" id="expoSlide" data-open="false">
        <div class="bio-body ko">
          <p><strong>êµ­ë‚´ ì£¼ìš”ì „ì‹œ</strong></p>
          <p>2026 ê¹€ì •ìˆ™ ê°¤ëŸ¬ë¦¬, ì¸ì²œ, ëŒ€í•œë¯¼êµ­</p>
          <p>2025 êµ¬êµ¬ê°¤ëŸ¬ë¦¬ ëª©ë™, ì„œìš¸, ëŒ€í•œë¯¼êµ­</p>
          <p>2023, 2024 êµ¬êµ¬ê°¤ëŸ¬ë¦¬ ëª©ë™, ì„œìš¸, ëŒ€í•œë¯¼êµ­</p>
          <p>2023 ì•„íŠ¸í”ŒëŸ¬ìŠ¤ ê°¤ëŸ¬ë¦¬ ì¸ì‚¬ë™, ì„œìš¸, ëŒ€í•œë¯¼êµ­</p>
          <p>2019, 2022 í•´ì–‘ ì—ë„ˆì§€ ì •ì› í•œë‚¨ë™, ì„œìš¸, ëŒ€í•œë¯¼êµ­</p>
          <p>2015 NC ê°¤ëŸ¬ë¦¬, ë¶€ì‚°, ëŒ€í•œë¯¼êµ­</p>
          <p>2014 ê°¤ëŸ¬ë¦¬ ê³¨ëª©, ì´íƒœì›, ì„œìš¸, ëŒ€í•œë¯¼êµ­</p>
          <p>2013 í”„ë¼ë¯¸ìŠ¤ ëœë“œ, ë¶€ì‚°, ëŒ€í•œë¯¼êµ­</p>
          <p>2009 ì•„íŠ¸ ê°¤ëŸ¬ë¦¬ ìœ , ë¶€ì‚°, ëŒ€í•œë¯¼êµ­</p>
          <p>2005 íš¡ì„± ë¬¸í™”ê´€, ê°•ì›ë„, ëŒ€í•œë¯¼êµ­</p>
          <p>2003 ìŠ¤í˜ì´ìŠ¤ í‚¤ì¹œ, ì„œìš¸, ëŒ€í•œë¯¼êµ­</p>
          <p>2003 í™ëŒ€ ë†€ì´í„° ì‚¬ê³„ ì•¼ì™¸ ì „ì‹œ, ì„œìš¸, ëŒ€í•œë¯¼êµ­</p>
          <p>2000 ê°¤ëŸ¬ë¦¬ ì†Œí˜¸, ë¶€ì‚°, ëŒ€í•œë¯¼êµ­</p>
          <p>2000 ì„¸ì›ë°±í™”ì , ë¶€ì‚°, ëŒ€í•œë¯¼êµ­</p>
          <br><p><strong>êµ­ì™¸ ì£¼ìš”ì „ì‹œ</strong></p>
          <p>2016 Berlin Mitte Live Concert Bar, ë² ë¥¼ë¦°, ë…ì¼</p>
          <p>2015 ëª¨ìŠ¤í¬ë°” êµ­ì œê³µí•­ ã€ì‚¶ê³¼ ì˜ˆìˆ ì˜ ê°„ê²©ã€, ëª¨ìŠ¤í¬ë°”, ëŸ¬ì‹œì•„</p>
          <p>2014 í˜¸ì°Œë¯¼ ì¤‘ì•™ ê²½ì°°ì„œ, ì¦‰í¥ í¼í¬ë¨¼ìŠ¤ & ì „ì‹œ, ë² íŠ¸ë‚¨</p>
          <p>2011 Open Art in Amsterdam, ë„¤ëœë€ë“œ</p>
          <p>2006 Linka Gallery, ì•”ìŠ¤í…Œë¥´ë‹´, ë„¤ëœë€ë“œ</p>
          <p>2005 Lune Cafe, ëª½íŒŒë¥´ë‚˜ìŠ¤, íŒŒë¦¬, í”„ë‘ìŠ¤</p>
          <p>2005 ë£¨ë¸Œë¥´ ë°•ë¬¼ê´€ ì™¸ë²½ ì „ì‹œ, íŒŒë¦¬, í”„ë‘ìŠ¤</p>
          <br><p><strong>ê·¸ ì™¸ ì „ì‹œ</strong></p>
          <p>2025 ê·¸ë¦¼ë”°ë¼ ê±·ëŠ” ë„ì‹œ ìµì‚°, ìµì‚°, ëŒ€í•œë¯¼êµ­</p>
          <p>2025 ê°¤ëŸ¬ë¦¬5 ì „êµ­ ì´ˆëŒ€ì „, ì¸ì²œ, ëŒ€í•œë¯¼êµ­</p>
          <p>2024, 2025 êµ¬êµ¬ê°¤ëŸ¬ë¦¬ ì†¡ë…„ ì„ ë¬¼ì „, ì„œìš¸, ëŒ€í•œë¯¼êµ­</p>
          <p>2022 ê¹€ì˜ìš°Â·ë“±ì‘ 2ì¸ì „, ì•„ë¥´í…œ ê°¤ëŸ¬ë¦¬, ì„œìš¸, ëŒ€í•œë¯¼êµ­</p>
          <p>2004 ê´‘ì£¼ë¹„ì—”ë‚ ë ˆ â€œThe Stageâ€, ê´‘ì£¼, ëŒ€í•œë¯¼êµ­</p>
          <p>2004 í•˜ëŒ€ë¦¬ ìˆ²ì† ë¯¸ìˆ ì œ â€œì˜ˆìˆ ì˜ íœ´ê°€â€, íš¡ì„±êµ°, ëŒ€í•œë¯¼êµ­</p>
          <p>2000 JosÃ© DelgadoÂ·ë“±ì‘ 2ì¸ì „, ì„œë©´ ë©”íŠ¸ë¡œ ë¯¸ìˆ ê´€, ë¶€ì‚°, ëŒ€í•œë¯¼êµ­</p>
          <br><p><strong>ì†Œì¥</strong></p>
          <p>ë² ë¥¼ë¦° ì‹œì²­; í›”ë³¼íŠ¸ ë³‘ì›; ë…¸íŠ¸ë¥´ë‹´ ëŒ€ì„±ë‹¹(íŒŒë¦¬); íŒŒë¦¬ ì •ì¹˜ëŒ€í•™; ë°”ë¥´ìƒ¤ë°” êµ­ë¦½ ì˜ë£Œì›; ì¼ë³¸ ë„ì¿„ êµíšŒ; ë² íŠ¸ë‚¨ í˜¸ì°Œë¯¼ ì¤‘ì•™ ê²½ì°°ì„œ; ë„¤ëœë€ë“œ ì•”ìŠ¤í…Œë¥´ë‹´ ë°˜ ê³ í ë¯¸ìˆ ê´€(í¬íŠ¸í´ë¦¬ì˜¤); ë¯¸êµ­ ë‰´ìš• í˜„ëŒ€ ë¯¸ìˆ ê´€(í¬íŠ¸í´ë¦¬ì˜¤); ë©”ë¦¬ì¸  ì¦ê¶Œ; êµ­ë‚´ì™¸ ê°œì¸ ì†Œì¥ì ë‹¤ìˆ˜</p>
          <br><p><strong>ì €ì„œ</strong></p>
          <p>ã€Š1 ëˆˆë¬¼ì€ ì ˆëŒ€ ë©ˆì¶”ì§€ ì•ŠëŠ”ë‹¤ â€” ì˜ˆìˆ ê°€ì˜ ì±…ë¬´ì™€ ì¸ê°„ ìš•ë§ã€‹(2022)</p>
          <p>ã€Šì˜ˆìˆ , ê·¸ ëì—†ëŠ” ì‚¬ë‘ã€‹(2024)</p>
        </div>

        <div class="bio-body en">
          <p><strong>Major Exhibitions in Korea</strong></p>
          <p>2026 Kim Jeongsuk Gallery, Incheon, Republic of Korea</p>
          <p>2025 Gugu Gallery Mokdong, Seoul, Republic of Korea</p>
          <p>2023, 2024 Gugu Gallery Mokdong, Seoul, Republic of Korea</p>
          <p>2023 Art Plus Gallery Insadong, Seoul, Republic of Korea</p>
          <p>2019, 2022 Ocean Energy Garden, Hannam-dong, Seoul, Republic of Korea</p>
          <p>2015 NC Gallery, Busan, Republic of Korea</p>
          <p>2014 Gallery Golmok, Itaewon, Seoul, Republic of Korea</p>
          <p>2013 Promise Land, Busan, Republic of Korea</p>
          <p>2009 Art Gallery You, Busan, Republic of Korea</p>
          <p>2005 Hoengseong Cultural Center, Gangwon-do, Republic of Korea</p>
          <p>2003 Space Kitchen, Seoul, Republic of Korea</p>
          <p>2003 Seasonal Outdoor Project &amp; Exhibition, Hongdae Playground, Seoul, Republic of Korea</p>
          <p>2000 Gallery Soho, Busan, Republic of Korea</p>
          <p>2000 Sewon Department Store, Busan, Republic of Korea</p>
          <br><p><strong>Major International Exhibitions</strong></p>
          <p>2016 Berlin Mitte Live Concert Bar, Berlin, Germany</p>
          <p>2015 Moscow International Airport, â€œThe Distance Between Life and Artâ€, Moscow, Russia</p>
          <p>2014 Improvised performance &amp; exhibition, Ho Chi Minh City Central Police Building, Vietnam</p>
          <p>2011 Open Art in Amsterdam, Netherlands</p>
          <p>2006 Linka Gallery, Amsterdam, Netherlands</p>
          <p>2005 Lune Cafe, Montparnasse, Paris, France</p>
          <p>2005 Exterior Wall Exhibition, Louvre Museum, Paris, France</p>
          <br><p><strong>Selected Other Exhibitions</strong></p>
          <p>2025 Walking with Art in Iksan, Republic of Korea</p>
          <p>2025 Gallery 5 National Invitational Exhibition, Incheon, Republic of Korea</p>
          <p>2024, 2025 Gugu Gallery Year-End Gift Exhibition, Seoul, Republic of Korea</p>
          <p>2022 Two-person Exhibition (Kim Young-woo &amp; DUNGZAK CESTLAVIE), Artem Gallery, Seoul</p>
          <p>2004 Gwangju Biennale â€œThe Stageâ€, Gwangju, Republic of Korea</p>
          <p>2004 Summer Forest Art Festival â€œArt Vacationâ€, Hadaeri, Hoengseong-gun, Republic of Korea</p>
          <p>2000 Two-person Exhibition (JosÃ© Delgado &amp; DUNGZAK CESTLAVIE), Seomyeon Metro Art Museum, Busan, Republic of Korea</p>
          <br><p><strong>Collections</strong></p>
          <p>Berlin City Hall, Germany; Humboldt Hospital, Germany; Notre-Dame Cathedral, Paris, France; Sciences Po, Paris, France; National Medical Institute, Warsaw, Poland;
Church in Tokyo, Japan; Ho Chi Minh City Central Police Department, Vietnam; Van Gogh Museum Amsterdam, Netherlands (Portfolio Collection); Museum of Modern Art, New York, USA (Portfolio Collection);
Meritz Securities Co., Ltd., Republic of Korea;
Numerous private collections worldwide.</p>
          <p><strong>Publications</strong></p>
          <p><em>1 Tears Never Stop</em> â€” The Artistâ€™s Duty and Human Desire (2022)</p>
          <p><em>Art, the Endless Love</em> (2024)</p>
        </div>
      </div>

      <div class="bio-body ko">
        <p>ë“±ì‘ ç‡ˆé…Œ DUNGZAK CESTLAVIEëŠ” â€˜ë¹› Â· ê¸°ì–µ Â· ì¡´ì¬â€™ë¼ëŠ” ì„¸ ì¶•ì„ ì¤‘ì‹¬ìœ¼ë¡œ ì˜ˆìˆ ì˜ ê·¼ì›ì„ íƒêµ¬í•˜ëŠ” í•œêµ­ í˜„ëŒ€ ì˜ˆìˆ ê°€ë‹¤.</p>
        <p>ê·¸ì˜ íšŒí™”ëŠ” í•œ ì¸ê°„ì´ ê²ªì–´ë‚¸ ê°ì •ì˜ ì”í–¥, ìƒì²˜ë¥¼ í†µê³¼í•˜ë©° ë‚¨ëŠ” ë¹›ì˜ ê¸°ì›, ê·¸ë¦¬ê³  ì‚¬ë¼ì§ê³¼ ë‹¤ì‹œ íƒœì–´ë‚¨ì´ ë°˜ë³µë˜ëŠ” ì¡´ì¬ì˜ ìˆœí™˜ì„ ê¸°ë¡í•œë‹¤. ë“±ì‘ì˜ í™”ë©´ì—ëŠ” ê¸°ë„Â·í”ì Â·ìˆ¨ê²° ê°™ì€ ì •ì„œì  ì¸µìœ„ê°€ ì¼œì¼œì´ ë‚¨ì•„ ìˆìœ¼ë©°, ì´ëŠ” ë‹¨ìˆœí•œ í˜•ìƒì´ë‚˜ ìƒ‰ì±„ë¥¼ ë„˜ì–´ â€˜ê°ì •ì˜ ìƒë¬¼í•™ì  í”ì â€™ê³¼ â€˜ê¸°ì–µì˜ ì¡´ì—„â€™ì„ ì‘ì‹œí•˜ëŠ” ë¯¸í•™ìœ¼ë¡œ í™•ì¥ëœë‹¤.</p>
        <p>ì„œìš¸ì„ ê¸°ë°˜ìœ¼ë¡œ ë² ë¥¼ë¦°, íŒŒë¦¬, ì•”ìŠ¤í…Œë¥´ë‹´, ë°”ë¥´ìƒ¤ë°”, ëª¨ìŠ¤í¬ë°” ë“±ì§€ì—ì„œ íšŒí™”ì™€ ë‹¤ë§¤ì²´ í”„ë¡œì íŠ¸ë¥¼ ì„ ë³´ì—¬ ì™”ìœ¼ë©°, íšŒí™”Â·í…ìŠ¤íŠ¸Â·ì‚¬ìš´ë“œÂ·ì˜ìƒÂ·ì•„ì¹´ì´ë¸Œë¥¼ í†µí•©í•´ â€˜ë¹›ì˜ ìœ¤ë¦¬â€™ì™€ â€˜ì¡´ì¬ ê°ì‘ì˜ ë¯¸í•™â€™ì„ êµ¬ì¶•í•´ì™”ë‹¤.</p>
        <p>ë“±ì‘ì˜ ì‘í’ˆì€ ê¸°ë„ë¬¸ì´ì ê¸°ë¡ì´ë©°, ìƒì²˜ ì´í›„ì— ë‚¨ëŠ” ë”°ëœ»í•¨ê³¼ ì§€ì›Œì§€ì§€ ì•ŠëŠ” ê¸°ì–µì˜ ì§€ì†, ê·¸ë¦¬ê³  ì¸ê°„ ì¡´ì—„ì— ëŒ€í•œ ì¡°ìš©í•œ ì„ ì–¸ì´ë‹¤. ê·¸ì˜ ì˜ˆìˆ  ì„¸ê³„ëŠ” â€˜ê³ í†µ ì´í›„ì˜ ë¹›â€™, â€˜ê¸°ì–µì´ ìŠ¤ìŠ¤ë¡œë¥¼ ë³µì›í•˜ëŠ” ìˆœê°„â€™, â€˜ì¡´ì¬ê°€ ë‹¤ì‹œ ê¹¨ì–´ë‚˜ëŠ” í˜¸í¡â€™ì„ ì¤‘ì‹¬ìœ¼ë¡œ í™•ì¥ëœë‹¤.</p>
      </div>

      <div class="bio-body en">
        <p>DUNGZAK CESTLAVIE is a Korean contemporary artist whose practice centers on the triad â€œLight Â· Memory Â· Being.â€</p>
        <p>His paintings trace emotional residues, the genesis of light passing through wounds, and cycles of disappearance and rebirth. Beyond image or color, his work expands into an ethics of light and the dignity of memory.</p>
        <p>Based in Seoul, he has developed painting and multi-media projects across Berlin, Paris, Amsterdam, Warsaw, and Moscow, integrating text, sound, video, and archival structures.</p>
        <p>Each work is both prayer and record: a quiet declaration of human dignity, the warmth that follows wounding, and the breath by which being reawakens.</p>
      </div>
    </div>
  </div>

  <!-- LIGHTBOX -->
  <div id="lightbox" aria-hidden="true">
    <div class="lb-stage">
      <img id="lbImg" alt="">
      <div id="lbCap" class="lb-caption"></div>
    </div>
    <button id="lbClose" class="lb-close">âœ•</button>
  </div>

  <!-- SOUND PLAYER -->
  <div id="fftBar"><span></span></div>
  <div id="ctrl">
    <button id="soundBtn" class="ctrlbtn">âœ¨</button>
    <button id="soundStopBtn" class="ctrlbtn" disabled>ğŸ”‡</button>
  </div>

  <!-- FOOTER -->
  <footer>
    <div class="links">
      <a href="https://flickr.com/photos/dungzak" target="_blank" rel="noopener">Flickr</a>
      <a href="https://instagram.com/dungzakcestlavie" target="_blank" rel="noopener">Instagram</a>
      <a href="https://youtube.com/@dungzakcestlavie" target="_blank" rel="noopener">MUSIC UNIVERSE</a>
      <a href="https://naver.me/x95dk3l1" target="_blank" rel="noopener">Naver Info</a>
      <a href="mailto:dungzakcestlavie@gmail.com">Email</a>
    </div>

    <small class="ko">Â©ë“±ì‘ ç‡ˆé…Œ DUNGZAK CESTLAVIE</small>
    <small class="en">Â©DUNGZAK CESTLAVIE</small>
  </footer>

<!-- ============================================
â‘¢ SCRIPTS  (Lightflow âˆ®27 Â· script patch)
- Nav / Lang / Works / Reports / Bio
- Sound: C ê³µëª… Â· ì‚¬ìš´ë“œë°” í´ë¦­ í† ê¸€
- Waves: ì½”ìŠ¤ë¯¹ íŒŒë™ ë°°ê²½
============================================ -->
<script>
(function () {
  'use strict';

  /* -------------------------------------------
   * 0. ì‘ì€ í—¬í¼
   * ---------------------------------------- */
  const $  = (sel, root = document) => root.querySelector(sel);
  const $$ = (sel, root = document) => Array.from(root.querySelectorAll(sel));

  function safeJSONFetch(url) {
    return fetch(url, { cache: 'no-store' }).then(res => {
      if (!res.ok) throw new Error('HTTP ' + res.status);
      return res.json();
    });
  }

  function getLang() {
    const b = document.body;
    if (b.classList.contains('english')) return 'en';
    if (b.classList.contains('hybrid'))  return 'hy';
    return 'kr';
  }

  /* -------------------------------------------
   * 1. ë©”ì¸ Nav (Poem / Works / Reports / Artist Bio)
   * ---------------------------------------- */
  function initNav() {
    const navButtons = $$('nav.primary button');
    const sections   = $$('main > section');
    const bioBtn     = $('#tab-bio');

    function showSection(id) {
      sections.forEach(sec => {
        sec.classList.toggle('is-active', sec.id === id);
      });
    }

    navButtons.forEach(btn => {
      const target = btn.dataset.target;
      if (!target) return;
      btn.addEventListener('click', () => {
        navButtons.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        showSection(target);
      });
    });

    // ì²« ë¡œë“œ: Poem
    showSection('poem');

    // Artist Bio ëª¨ë‹¬ ì—´ê¸°
    if (bioBtn) {
      bioBtn.addEventListener('click', () => {
        openBioModal();
      });
    }
  }

  /* -------------------------------------------
   * 2. ì „ì—­ ì–¸ì–´ í† ê¸€ (KR / EN / KR+EN)
   * ---------------------------------------- */
  function initLanguage() {
    const koBtn = $('#koBtn');
    const enBtn = $('#enBtn');
    const hyBtn = $('#hyBtn');

    function setBodyLang(mode) {
      document.body.classList.remove('korean', 'english', 'hybrid');
      if (mode === 'en') {
        document.body.classList.add('english');
      } else if (mode === 'hy') {
        document.body.classList.add('hybrid');
      } else {
        document.body.classList.add('korean');
      }
    }

    function activate(btn) {
      [koBtn, enBtn, hyBtn].forEach(b => b && b.classList.remove('active'));
      if (btn) btn.classList.add('active');
    }

    if (koBtn) {
      koBtn.addEventListener('click', () => {
        setBodyLang('kr');
        activate(koBtn);
        syncBioLangToGlobal();
        updateOpenLightboxCaption();
      });
    }
    if (enBtn) {
      enBtn.addEventListener('click', () => {
        setBodyLang('en');
        activate(enBtn);
        syncBioLangToGlobal();
        updateOpenLightboxCaption();
      });
    }
    if (hyBtn) {
      hyBtn.addEventListener('click', () => {
        setBodyLang('hy');
        activate(hyBtn);
        updateOpenLightboxCaption();
      });
    }

    // ì´ˆê¸° ê°’: korean
    setBodyLang('kr');
    if (koBtn) koBtn.classList.add('active');
  }

  /* -------------------------------------------
   * 3. Works (data/works.json 1íšŒ ë¡œë“œ)
   * ---------------------------------------- */
  let worksLoaded = false;
  let worksByPanel = {};
  function initWorks() {
    const panelIds = ['pray', 'human', 'rebirth', 'exist', 'cosmos'];
    const idMap = { 1: 'pray', 2: 'human', 3: 'rebirth', 4: 'exist', 5: 'cosmos' };

    const tabButtons = $$('.tabs .tab');
    tabButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        const key = btn.dataset.panel;
        if (!key) return;
        tabButtons.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        panelIds.forEach(p => {
          const el = $('#panel-' + p);
          if (el) el.classList.toggle('active', p === key);
        });
      });
    });

    safeJSONFetch('data/works.json')
      .then(json => {
        const list = Array.isArray(json)
          ? json
          : (json.works || json.items || []);
        if (!Array.isArray(list)) return;

        worksByPanel = { pray: [], human: [], rebirth: [], exist: [], cosmos: [] };

        list.forEach(item => {
          let key = item.section || item.panel;
          if (!key && item.section_id != null) {
            const sid = Number(item.section_id);
            key = idMap[sid] || 'pray';
          }
          if (!key || !worksByPanel[key]) key = 'pray';
          worksByPanel[key].push(item);
        });

        Object.keys(worksByPanel).forEach(key => {
          const panel = $('#panel-' + key);
          if (!panel) return;
          renderWorksPanel(panel, worksByPanel[key]);
        });

        attachWorksLightbox();
        worksLoaded = true;
      })
      .catch(err => {
        console.error('works.json load error:', err);
        const allPanels = ['pray','human','rebirth','exist','cosmos'];
        allPanels.forEach(key => {
          const panel = $('#panel-' + key);
          if (!panel) return;
          panel.innerHTML = `
            <div class="w-msg">
              <div class="ko">ì‘í’ˆ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. data/works.json ê²½ë¡œì™€ íŒŒì¼ êµ¬ì„±ì„ í™•ì¸í•´ ì£¼ì„¸ìš”.</div>
              <div class="en">Unable to load artworks. Please check data/works.json path and structure.</div>
              <small>GitHub Actions ë¡œê·¸ì—ì„œ ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ í•¨ê»˜ í™•ì¸í•´ ì£¼ì„¸ìš”.</small>
            </div>
          `;
        });
      });
  }

  function renderWorksPanel(panel, items) {
    if (!panel) return;
    if (!items || !items.length) {
      panel.innerHTML = `
        <div class="w-msg">
          <div class="ko">ì´ ì„¹ì…˜ì—ëŠ” ì•„ì§ ë“±ë¡ëœ ì‘í’ˆì´ ì—†ìŠµë‹ˆë‹¤.</div>
          <div class="en">No artworks have been registered in this section yet.</div>
        </div>
      `;
      return;
    }

    const html = [
      '<div class="w-grid">',
      ...items.map(item => {
        const id         = item.id || '';
        const titleKr    = item.title_kr || '';
        const titleEn    = item.title_en || '';
        const matKr      = item.material_kr || '';
        const matEn      = item.material_en || '';
        const sizeKr     = item.size_kr || '';
        const sizeEn     = item.size_en || '';
        const year       = item.year || '';
        const imgStd     = item.image || item.image_standard || '';
        const imgZoom    = item.zoom  || item.image_zoom     || imgStd;
        const safe = s => String(s).replace(/"/g, '&quot;');

        const captionKr = [titleKr, matKr, sizeKr, year].filter(Boolean).join('\n');
        const captionEn = [titleEn, matEn, sizeEn, year].filter(Boolean).join('\n');

        return `
          <article class="w-card"
                   data-id="${safe(id)}"
                   data-img="${safe(imgZoom || imgStd)}"
                   data-title-kr="${safe(titleKr)}"
                   data-title-en="${safe(titleEn)}"
                   data-mat-kr="${safe(matKr)}"
                   data-mat-en="${safe(matEn)}"
                   data-size-kr="${safe(sizeKr)}"
                   data-size-en="${safe(sizeEn)}"
                   data-year="${safe(year)}"
                   data-cap-kr="${safe(captionKr)}"
                   data-cap-en="${safe(captionEn)}">
            <img class="w-thumb"
                 src="${safe(imgStd)}"
                 alt="${safe(titleEn || titleKr || 'Artwork')}"
                 loading="lazy" />
            <div class="w-meta">
              <div class="w-title">
                <span class="ko">${titleKr}</span>
                <span class="en">${titleEn}</span>
              </div>
              <div class="w-sub">
                <span class="ko">
${matKr || ''}${matKr && (sizeKr || year) ? '\n' : ''}${sizeKr || ''}${(sizeKr && year) ? '\n' : (!sizeKr && year ? '\n' : '')}${year || ''}
                </span>
                <span class="en">
${matEn || ''}${matEn && (sizeEn || year) ? '\n' : ''}${sizeEn || ''}${(sizeEn && year) ? '\n' : (!sizeEn && year ? '\n' : '')}${year || ''}
                </span>
              </div>
            </div>
          </article>
        `;
      }),
      '</div>'
    ].join('');

    panel.innerHTML = html;
  }

  /* -------------------------------------------
   * 4. Lightbox
   * ---------------------------------------- */
  let lbOpenFrom = null;

  function attachWorksLightbox() {
    const worksRoot = $('#works');
    if (!worksRoot) return;

    worksRoot.addEventListener('click', e => {
      const card = e.target.closest('.w-card');
      if (!card) return;
      openLightboxFromCard(card);
    });

    const lb   = $('#lightbox');
    const btnX = $('#lbClose');
    if (lb) {
      lb.addEventListener('click', e => {
        if (e.target === lb) closeLightbox();
      });
    }
    if (btnX) {
      btnX.addEventListener('click', closeLightbox);
    }
    document.addEventListener('keydown', e => {
      if (e.key === 'Escape') closeLightbox();
    });
  }

  function buildCaptionForCard(card, mode) {
    const capKr = card.getAttribute('data-cap-kr') || '';
    const capEn = card.getAttribute('data-cap-en') || '';
    if (mode === 'en') {
      return capEn || capKr || '';
    }
    if (mode === 'hy') {
      if (capKr && capEn) return capKr + '\n\n' + capEn;
      return capKr || capEn || '';
    }
    return capKr || capEn || '';
  }

  function openLightboxFromCard(card) {
    const lb    = $('#lightbox');
    const lbImg = $('#lbImg');
    const lbCap = $('#lbCap');
    if (!lb || !lbImg || !lbCap) return;

    lbOpenFrom = card;

    const src  = card.getAttribute('data-img') || card.querySelector('img')?.src || '';
    const mode = getLang();

    lbImg.src = src;
    lbCap.textContent = buildCaptionForCard(card, mode);

    lb.classList.add('is-open');
    lb.setAttribute('aria-hidden', 'false');
  }

  function closeLightbox() {
    const lb    = $('#lightbox');
    const lbImg = $('#lbImg');
    const lbCap = $('#lbCap');
    if (!lb) return;
    lb.classList.remove('is-open');
    lb.setAttribute('aria-hidden', 'true');
    if (lbImg) lbImg.src = '';
    if (lbCap) lbCap.textContent = '';
    lbOpenFrom = null;
  }

  function updateOpenLightboxCaption() {
    if (!lbOpenFrom) return;
    const lbCap = $('#lbCap');
    if (!lbCap) return;
    lbCap.textContent = buildCaptionForCard(lbOpenFrom, getLang());
  }

  /* -------------------------------------------
   * 5. Reports
   * ---------------------------------------- */
  function initReports() {
    const grid = $('#reportGrid');
    if (!grid) return;

    const tabs = $$('.r-tab');
    const toggleBtn = $('#reportsToggle');

    function applyFilter(type) {
      const items = $$('.r-item', grid);
      items.forEach(item => {
        const cat = (item.dataset.category || '').toLowerCase();
        if (!type || type === 'all' || cat === type) {
          item.style.display = '';
        } else {
          item.style.display = 'none';
        }
      });
    }

    tabs.forEach(btn => {
      btn.addEventListener('click', () => {
        const type = (btn.dataset.r || '').toLowerCase();
        tabs.forEach(b => b.classList.remove('is-active'));
        btn.classList.add('is-active');
        applyFilter(type);
      });
    });

    if (toggleBtn) {
      toggleBtn.addEventListener('click', () => {
        const expanded = toggleBtn.getAttribute('aria-expanded') === 'true';
        toggleBtn.setAttribute('aria-expanded', String(!expanded));
        grid.style.display = expanded ? 'none' : 'grid';
      });
    }

    safeJSONFetch('data/reports.json')
      .then(json => {
        const list = Array.isArray(json)
          ? json
          : (json.reports || json.items || []);
        if (!Array.isArray(list) || !list.length) return;

        const html = list.map(item => {
          const id        = item.id || '';
          const year      = item.year || '';
          const category  = (item.category || 'theory').toLowerCase();
          const titleKr   = item.title_ko || item.title_kr || '';
          const titleEn   = item.title_en || '';
          const summaryKr = item.summary_ko || item.summary_kr || '';
          const summaryEn = item.summary_en || '';
          const href      = item.url || item.link || item.md_path || '#';

          return `
            <article class="r-item" data-category="${category}">
              <div class="t">
                <span class="ko">${titleKr}</span>
                <span class="en">${titleEn}</span>
              </div>
              <div class="m">
                <span>${id}</span> Â· <span>${year}</span> Â· <span>${category}</span>
              </div>
              <div class="s">
                <span class="ko">${summaryKr}</span>
                <span class="en">${summaryEn}</span>
              </div>
              <a href="${href}" target="_blank" rel="noopener"
                 style="display:inline-block;margin-top:10px;font-size:11px;text-decoration:underline;">
                <span class="ko">ì „ì²´ ë³´ê¸° (ìƒˆ ì°½)</span>
                <span class="en">Open full report (new tab)</span>
              </a>
            </article>
          `;
        }).join('');

        grid.innerHTML = html;
        grid.style.display = 'grid';
        const defaultTab = tabs.find(b => b.dataset.r === 'all') || tabs[0];
        if (defaultTab) {
          defaultTab.classList.add('is-active');
          applyFilter((defaultTab.dataset.r || 'all').toLowerCase());
        }
      })
      .catch(err => {
        console.error('reports.json load error:', err);
      });
  }

  /* -------------------------------------------
   * 6. Artist Bio Modal
   * ---------------------------------------- */
  function openBioModal() {
    const modal = $('#bio-modal');
    if (!modal) return;
    modal.hidden = false;

    const cur = getLang();
    const lang = (cur === 'en') ? 'en' : 'kr';
    setBioLanguage(lang);
  }

  function closeBioModal() {
    const modal = $('#bio-modal');
    if (!modal) return;
    modal.hidden = true;
  }

  function setBioLanguage(lang) {
    const modal = $('#bio-modal');
    if (!modal) return;
    modal.setAttribute('data-bio', lang === 'en' ? 'en' : 'kr');

    const buttons = $$('#bio-modal .bio-lang .lang');
    buttons.forEach(btn => {
      const bLang = btn.getAttribute('data-bio-lang');
      const active = (bLang === lang || (!bLang && lang === 'kr'));
      btn.classList.toggle('active', active);
      btn.setAttribute('aria-pressed', active ? 'true' : 'false');
    });
  }

  function syncBioLangToGlobal() {
    const modal = $('#bio-modal');
    if (!modal || modal.hidden) return;
    const cur = getLang();
    const lang = (cur === 'en') ? 'en' : 'kr';
    setBioLanguage(lang);
  }

  function initBioModal() {
    const modal    = $('#bio-modal');
    if (!modal) return;
    const backdrop = $('.bio-backdrop', modal);
    const closeBtn = $('.bio-close', modal);
    const expoBtn  = $('#expoToggle');
    const expoWrap = $('#expoSlide');
    const langBtns = $$('#bio-modal .bio-lang .lang');

    if (backdrop) {
      backdrop.addEventListener('click', closeBioModal);
    }
    if (closeBtn) {
      closeBtn.addEventListener('click', closeBioModal);
    }
    document.addEventListener('keydown', e => {
      if (e.key === 'Escape' && !modal.hidden) closeBioModal();
    });

    if (expoBtn && expoWrap) {
      expoBtn.addEventListener('click', () => {
        const isOpen = expoWrap.getAttribute('data-open') === 'true';
        expoWrap.setAttribute('data-open', isOpen ? 'false' : 'true');
        expoBtn.setAttribute('aria-expanded', isOpen ? 'false' : 'true');
      });
    }

    langBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        const lang = btn.getAttribute('data-bio-lang') || 'kr';
        setBioLanguage(lang);
      });
    });

    modal.hidden = true;
  }

  /* -------------------------------------------
   * 7. Sound (íˆ¬ëª…Â·ì‘ì€ ê³µëª… ì‚¬ìš´ë“œë°”)
   *    - ì‚¬ìš´ë“œë°” í´ë¦­ ì‹œ í† ê¸€
   *    - /audio/lightflow_c_resonance.wav ì‚¬ìš©
   * ---------------------------------------- */
  function initSound() {
    const startBtn = $('#soundBtn');
    const stopBtn  = $('#soundStopBtn');
    const barWrap  = $('#fftBar');
    const barFill  = barWrap ? barWrap.querySelector('span') : null;

    if (!barWrap || !barFill) return;

    // í™”ë©´ì—ì„œëŠ” ë²„íŠ¼ì„ ê±°ì˜ ë³´ì´ì§€ ì•Šê²Œ ì²˜ë¦¬ (BODY êµ¬ì¡°ëŠ” ìœ ì§€)
    if (startBtn) {
      startBtn.style.position = 'absolute';
      startBtn.style.width = '1px';
      startBtn.style.height = '1px';
      startBtn.style.opacity = '0';
      startBtn.style.pointerEvents = 'none';
      startBtn.setAttribute('aria-hidden', 'true');
    }
    if (stopBtn) {
      stopBtn.style.position = 'absolute';
      stopBtn.style.width = '1px';
      stopBtn.style.height = '1px';
      stopBtn.style.opacity = '0';
      stopBtn.style.pointerEvents = 'none';
      stopBtn.setAttribute('aria-hidden', 'true');
    }

    const audio = new Audio('/audio/lightflow_c_resonance.wav');
    audio.loop = true;
    audio.preload = 'auto';

    let playing  = false;
    let fftTimer = null;

    function setPlaying(on) {
      playing = on;
    }

    function startFFT() {
      if (fftTimer) clearInterval(fftTimer);
      fftTimer = setInterval(() => {
        if (!playing) {
          barFill.style.width = '0%';
          return;
        }
        const w = 6 + Math.random() * 18; // 6~24%
        barFill.style.width = w + '%';
      }, 140);
    }

    function stopFFT() {
      if (fftTimer) {
        clearInterval(fftTimer);
        fftTimer = null;
      }
      barFill.style.width = '0%';
    }

    async function playSound() {
      try {
        await audio.play();
        setPlaying(true);
        startFFT();
      } catch (err) {
        console.warn('Audio play failed:', err);
      }
    }

    function stopSound() {
      if (!playing) return;
      audio.pause();
      audio.currentTime = 0;
      setPlaying(false);
      stopFFT();
    }

    function toggleSound() {
      if (playing) {
        stopSound();
      } else {
        playSound();
      }
    }

    // ì‚¬ìš´ë“œë°” ì „ì²´ë¥¼ í† ê¸€ ë²„íŠ¼ì²˜ëŸ¼ ì‚¬ìš©
    barWrap.addEventListener('click', toggleSound);

    // ë³´ì´ì§€ ì•ŠëŠ” start/stop ë²„íŠ¼ì—ë„ ì—°ê²° (ì ‘ê·¼ì„±/í˜¸í™˜ìš©)
    if (startBtn) startBtn.addEventListener('click', toggleSound);
    if (stopBtn)  stopBtn.addEventListener('click', toggleSound);

    window.addEventListener('pagehide', () => {
      stopSound();
    });

    // ì´ˆê¸° ìƒíƒœ: ì •ì§€
    setPlaying(false);
    stopFFT();
  }

  /* -------------------------------------------
   * 7-1. Waves ë°°ê²½ (ì½”ìŠ¤ë¯¹ íŒŒë™)
   * ---------------------------------------- */
  function initWaves() {
    const canvas = document.getElementById('waves');
    if (!canvas) return;

    const ctx = canvas.getContext('2d');
    if (!ctx) return;

    const prefersReduced = window.matchMedia &&
      window.matchMedia('(prefers-reduced-motion: reduce)').matches;

    function resize() {
      const dpr = window.devicePixelRatio || 1;
      canvas.width  = window.innerWidth * dpr;
      canvas.height = window.innerHeight * dpr;
      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
    }

    resize();
    window.addEventListener('resize', resize);

    let t = 0;
    function draw() {
      if (prefersReduced) return; // ì›€ì§ì„ ìµœì†Œí™” ì„¤ì • ì‚¬ìš© ì‹œ ì •ì§€ ë°°ê²½

      const dpr = window.devicePixelRatio || 1;
      const w = canvas.width  / dpr;
      const h = canvas.height / dpr;

      ctx.clearRect(0, 0, w, h);

      const gradients = [
        { color: 'rgba(215,184,106,0.22)', amp: 28, freq: 0.0015, speed: 0.015 },
        { color: 'rgba(121,167,255,0.20)', amp: 46, freq: 0.0011, speed: -0.010 },
        { color: 'rgba(237,227,201,0.16)', amp: 18, freq: 0.0020, speed: 0.008 }
      ];

      gradients.forEach((g, idx) => {
        ctx.beginPath();
        for (let x = 0; x <= w; x += 8) {
          const y = h * 0.25 + idx * 80 +
            Math.sin(x * g.freq + t * g.speed + idx) * g.amp;
          if (x === 0) ctx.moveTo(x, y);
          else ctx.lineTo(x, y);
        }
        ctx.strokeStyle = g.color;
        ctx.lineWidth = 1.4;
        ctx.shadowColor = 'rgba(0,0,0,0.55)';
        ctx.shadowBlur = 10;
        ctx.stroke();
      });

      ctx.shadowBlur = 0;
      t += 1;
      requestAnimationFrame(draw);
    }

    if (!prefersReduced) {
      requestAnimationFrame(draw);
    }
  }

  /* -------------------------------------------
   * 8. ì´ˆê¸°í™”
   * ---------------------------------------- */
  document.addEventListener('DOMContentLoaded', () => {
    try { initNav(); }        catch (e) { console.error(e); }
    try { initLanguage(); }   catch (e) { console.error(e); }
    try { initWorks(); }      catch (e) { console.error(e); }
    try { initReports(); }    catch (e) { console.error(e); }
    try { initBioModal(); }   catch (e) { console.error(e); }
    try { initSound(); }      catch (e) { console.error(e); }
    try { initWaves(); }      catch (e) { console.error(e); }
  });

})();
</script>